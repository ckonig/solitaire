(this["webpackJsonpsolitaire-react"]=this["webpackJsonpsolitaire-react"]||[]).push([[0],{13:function(t,e,n){},17:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var c=n(0),s=(n(13),n(7)),r=n.n(s),i=n(10),a=n.n(i),o=n(2),u=n(1),l=n(3),d=n(8),h=n(5),p=n(4),f=(n(17),function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(t){var c;return Object(u.a)(this,n),(c=e.call(this,t)).state={timeElapsed:null},c}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;setInterval((function(){t.setState((function(e){var n=(t.props.end||Date.now())-t.props.started,c=Math.floor(n/1e3/60/60);n-=1e3*c*60*60;var s=Math.floor(n/1e3/60);n-=1e3*s*60;var r=Math.floor(n/1e3);return n-=1e3*r,e.timeElapsed=c?c+":"+s+":"+r:s+":"+r,Object(o.a)({},e)}))}),1e3)}},{key:"render",value:function(){return Object(c.jsxs)("span",{children:["Time Elapsed: ",this.state.timeElapsed]})}}]),n}(s.Component));function k(t){return Object(c.jsxs)("div",{children:["Points: ",t.points,Object(c.jsx)("br",{}),Object(c.jsx)(f,{started:t.started,end:t.end}),Object(c.jsx)("br",{}),"Is Ended: ",t.isEnded?"Y":"N",Object(c.jsx)("br",{}),"Report Issues ",Object(c.jsx)("a",{href:"https://github.com/ckonig/solitaire/issues",children:"here"}),"."]})}var b={borderStyle:"solid",borderWidth:"1px",borderColor:"black",width:"9.45vw",height:"13.2vw",float:"left",borderRadius:"0.5vw",position:"relative",backgroundColor:"white"},v={position:"absolute",display:"inline-block",fontSize:"2vw"},j={tl:Object(o.a)(Object(o.a)({},v),{},{left:"0.5vw",top:"0vw"}),tr:Object(o.a)(Object(o.a)({},v),{},{right:"0.5vw",top:"0vw"}),bl:Object(o.a)(Object(o.a)({},v),{},{left:"0.5vw",bottom:"0vw"}),br:Object(o.a)(Object(o.a)({},v),{},{right:"0.5vw",bottom:"0vw"})},O={textAlign:"center",position:"absolute",top:"6.5vw",width:"6.45vw"},y={cardStyle:{borderStyle:"dashed",borderColor:"gray",width:"9.45vw",height:"13.2vw",float:"left",borderRadius:"0.3vw",position:"relative"},faceStyle:Object(o.a)({},O),faceStyleRed:Object(o.a)(Object(o.a)({},O),{},{color:"red"})},g={table:{backgroundColor:"darkgreen",zIndex:-1},stackbox:{width:"9.45vw",height:"13.2vw",float:"left"}},x=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e=Object(o.a)(Object(o.a)({},b),{},{boxShadow:"2px 2px 2px 2px black"});this.props.isSelected&&(e.backgroundColor="lightgray",e.borderColor="yellow");this.props.offset&&(e.top=this.props.offset,e.left=this.props.offset),this.props.offsetTop&&(e.top=this.props.offsetTop/10+"vw");var n={tl:Object(o.a)({},j.tl),br:Object(o.a)({},j.br)};n.tl.left="2vw",n.br.right="2vw";var s=Object(c.jsx)("div",{});return s=this.props.isHidden?Object(c.jsx)("div",{className:"karo",style:{margin:"5%",bordeRradius:"5px",height:"92%",borderColor:"black",borderStyle:"solid",borderWidth:"1px"},children:"\xa0"}):Object(c.jsxs)("div",{className:"card-grid-container",style:{height:"100%",width:"100%"},children:[Object(c.jsx)("div",{className:"tlicon",children:Object(c.jsxs)("div",{className:"mcontent",children:[" ",this.props.type.icon]})}),Object(c.jsx)("div",{className:"tlface",children:Object(c.jsxs)("div",{className:"lcontent",children:[" ",this.props.face]})}),Object(c.jsx)("div",{className:"tspacer"}),Object(c.jsx)("div",{className:"tricon",children:Object(c.jsxs)("div",{className:"mcontent",children:[" ",this.props.type.icon]})}),Object(c.jsxs)("div",{className:"mainface",children:[" ",Object(c.jsx)("div",{className:"mcontent",children:this.props.face})]}),Object(c.jsx)("div",{className:"blicon",children:Object(c.jsxs)("div",{className:"mcontent",children:[" ",this.props.type.icon]})}),Object(c.jsx)("div",{className:"bspacer"}),Object(c.jsxs)("div",{className:"brface",children:[" ",Object(c.jsx)("div",{className:"rcontent",children:this.props.face})]}),Object(c.jsxs)("div",{className:"bricon",children:[" ",Object(c.jsx)("div",{className:"mcontent",children:this.props.type.icon})]})]}),Object(c.jsx)("div",{style:function(n){var c=Object(o.a)({},e);return c.color=n,c.zIndex=t.props.offsetTop+2,t.props.zIndex&&(c.zIndex=t.props.zIndex),t.props.blink&&(c.borderColor="red",c.boxShadow="2px 2px 2px 2px red"),c}(this.props.type.color),className:"",onClick:function(e){return t.props.onClick(Object(o.a)({},t.props))},children:s})}}]),n}(s.Component),m=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e={position:"absolute",left:"0px",top:"0px"};return Object(c.jsx)("div",{style:{position:"absolute",left:"0px",top:"0px",width:"0px",height:"0px"},children:this.props.stack&&this.props.stack.map((function(n,s){return Object(c.jsx)("div",{style:e,children:Object(c.jsx)(x,{offsetTop:t.props.offset+20*s,zIndex:1e3+20*s,type:n.type,face:n.face,isSelected:!0,source:n.source,onClick:function(e){return t.props.onClick(e)}})})}))})}}]),n}(s.Component),C=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(t){var c;return Object(u.a)(this,n),(c=e.call(this,t)).isTouch=c.is_touch_device(),c}return Object(l.a)(n,[{key:"is_touch_device",value:function(){try{var t=" -webkit- -moz- -o- -ms- ".split(" ");return"ontouchstart"in window||"undefined"!==typeof window.DocumentTouch&&document instanceof window.DocumentTouch||(e=["(",t.join("touch-enabled),("),"heartz",")"].join(""),window.matchMedia(e).matches)}catch(n){return console.error("(Touch detect failed)",n),!1}var e}}]),n}(s.Component),w=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e=Object(o.a)({},y),n={position:"absolute",left:"0px",top:"0px"},s={fontSize:"6vw"};s.color=this.props.model.color;var r=Object(o.a)({},e.cardStyle);this.props.model.blinkFor>0&&(r.borderColor="red");return Object(c.jsxs)("div",{style:{position:"relative"},children:[Object(c.jsx)("div",{style:r,onClick:function(){return t.props.onClick()},children:Object(c.jsx)("div",{className:"mcontent",style:s,children:this.props.model.icon})}),this.props.model.stack.map((function(e){return Object(c.jsx)("div",{style:n,children:Object(c.jsx)(x,{blink:t.props.model.blinkFor,type:e.type,source:e.source,face:e.face,onClick:function(e){return t.props.onClick(e)}})})})),t.isTouch&&t.props.hand.isHoldingCard()&&t.props.hand.source=="foundation-"+t.props.index&&Object(c.jsx)(m,{offset:(this.props.model.stack.length,0),stack:this.props.hand.stack,onClick:function(e){return t.props.onClick(t.props.model.stack[t.props.model.stack.length-1])}})]})}}]),n}(C),S=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(t){var c;return Object(u.a)(this,n),(c=e.call(this,t)).myRef=r.a.createRef(),c}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this.myRef.current;this.is_touch_device()||document.addEventListener("mousemove",(function(e){var n=e.clientX,c=e.clientY;t.style.top=c+"px",t.style.left=n+"px",t.style.position="relative"}))}},{key:"render",value:function(){var t={position:"absolute",left:"0px",top:"0px"};return this.isTouch?Object(c.jsx)("span",{}):Object(c.jsx)("div",{style:{position:"absolute",left:"0px",top:"0px",width:"0px",height:"0px"},children:Object(c.jsx)("div",{ref:this.myRef,children:this.props.stack&&this.props.stack.map((function(e,n){return Object(c.jsx)("div",{style:t,children:Object(c.jsx)(x,{offsetTop:20*n,zIndex:1e3+20*n,type:e.type,face:e.face,isSelected:!0})})}))})})}}]),n}(C),N=function(){function t(){Object(u.a)(this,t),this.moves=[],this.currentMove=null}return Object(l.a)(t,[{key:"registerMove",value:function(t,e,n){var c={source:n.source,card:n,target:t};return e.moves.push(Object(o.a)({},c)),e.points+=this._rateMove(c),!0}},{key:"registerRecycle",value:function(t){t.moves.push({source:"waste",target:"stock",card:null}),t.points-=100,console.debug("RATING: subtract 100 points for RECYCLE")}},{key:"registerUncover",value:function(t,e){e.moves.push({source:null,target:null,card:t}),e.points+=5,console.debug("RATING: add 5 points for UNCOVER")}},{key:"_rateMove",value:function(t){var e="tableau"==t.source.substr(0,7),n="tableau"==t.target.substr(0,7);if(e){if("foundation"==t.target)return console.debug("RATING: add 10 points for MOVE tableau -> foundation"),10}else if("waste"==t.source){if("foundation"==t.target)return console.debug("RATING: add 10 points for MOVE waste -> foundation"),10;if(n)return console.debug("RATING: add 5 points for MOVE waste -> tableau"),5}else if("foundation"==t.source&&n)return console.debug("RATING: subtract 15 points for MOVE foundation -> tableau"),-15;return 0}}]),t}(),T=function(){function t(e){var n=this;Object(u.a)(this,t),this._blink=function(t){return n._toggleBlink(t,10,(function(){return setTimeout((function(){return n._toggleBlink(t,0)}),100)}))},this.actions=new N,this._setState=function(t,n){return e.setState((function(e){return t(e),Object(o.a)({},e)}),n)},this.hand=function(){return e.state.hand},this.state=function(){return e.state}}return Object(l.a)(t,[{key:"_toggleBlink",value:function(t,e,n){this._setState((function(n){t(n).blinkFor=e}),n)}}]),t}(),_=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(u.a)(this,n);for(var c=arguments.length,s=new Array(c),r=0;r<c;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).click=function(e){return t.hand().isHoldingCard()?t.tryPutDown(e):t.pickup(e)},t.blink=function(e){return t._blink((function(t){return t.foundation.stacks[e]}))},t}return Object(l.a)(n,[{key:"pickup",value:function(t){var e=this.state().foundation.getTop(t);e?this._setState((function(n){n.foundation.getPreviousUsed(t)==e.face&&(n.foundation.remove(t,e),n.hand.pickUp([e],e.source))})):this.blink(t)}},{key:"tryPutDown",value:function(t){var e=this;!this.hand().hasMoreThanOneCard()&&this.state().foundation.accepts(t,this.hand().currentCard())?this._setState((function(n){n.hand.isHoldingCard()&&!n.foundation.contains(t,n.hand.currentCard())&&(n.foundation.add(t,n.hand.currentCard()),e.actions.registerMove("foundation",n,n.hand.currentCard()),n.hand.putDown(),e._tryDetectEnd(n))})):this.blink(t)}},{key:"_tryDetectEnd",value:function(t){52==t.foundation.stacks.map((function(t){return parseInt(t.stack.length)})).reduce((function(t,e){return t+e}),0)&&(t.isEnded=!0,t.end=Date.now())}}]),n}(T),H=new(function(){function t(){Object(u.a)(this,t)}return Object(l.a)(t,[{key:"cardEquals",value:function(t,e){return!t&&!e||t&&e&&e.face==t.face&&e.type.icon==t.type.icon}},{key:"cardNotEquals",value:function(t,e){return e.face!==t.face||e.type.icon!==t.type.icon}},{key:"filterNotEqual",value:function(t,e){return t.filter((function(t,n,c){return H.cardNotEquals(t,e)}))}},{key:"filterOut",value:function(t,e){for(var n=0;n<t.length;n++)t[n].stack=H.filterNotEqual(t[n].stack,e);return t}}]),t}()),E=H,M=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(u.a)(this,n);for(var c=arguments.length,s=new Array(c),r=0;r<c;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).click=function(e){t.hand().isHoldingCard()?t.blink():e?t.moveToWaste(e):t.recycleWaste()},t.blink=function(){return t._blink((function(t){return t.stock}))},t}return Object(l.a)(n,[{key:"moveToWaste",value:function(t){var e=this;this._setState((function(n){E.cardEquals(t,n.stock.getTop())&&(n.waste.stack.push(n.stock.stack.pop()),e.actions.registerMove("stock",n,Object(o.a)(Object(o.a)({},t),{},{source:"waste"})))}))}},{key:"recycleWaste",value:function(){var t=this;this._setState((function(e){e.stock.recycle(e.waste.recycle())&&t.actions.registerRecycle(e)}))}}]),n}(T),I=n(6),D=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],A=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(u.a)(this,n);for(var c=arguments.length,s=new Array(c),r=0;r<c;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).click=function(e,n,c){return e?t.clickCard(e,n):t.clickEmpty(c,n)},t.validateTableauStackMove=function(t,e){var n=Object(I.a)(D);return n.indexOf(t.face)+1==n.indexOf(e.face)&&t.type.color!=e.type.color},t.pickup=function(e){t._setState((function(t){if(!t.hand.isHoldingCard()&&!e.isHidden){var n=t.tableau.findFollowing(e);t.hand.pickUp([e].concat(Object(I.a)(n)),e.source),t.tableau.filterOut([e].concat(Object(I.a)(n)))}}))},t.tryPutDown=function(e){t._setState((function(n){n.hand.isHoldingCard()&&!n.hand.containsCurrentCard(n.tableau.stacks[e].stack)&&(n.tableau.filterOut([n.hand.currentCard()]),t.actions.registerMove("tableau-"+e,n,n.hand.currentCard()),n.tableau.add(e,n.hand.putDown()))}))},t.tryUncover=function(e,n){return!(t.hand().isHoldingCard()||!e.isHidden||!e.canUncover)&&(t._setState((function(c){c.tableau.uncover(n,e)&&t.actions.registerUncover(e,c)})),!0)},t.blink=function(e){return t._blink((function(t){return t.tableau.stacks[e]}))},t}return Object(l.a)(n,[{key:"clickCard",value:function(t,e){this.hand().isHoldingCard()?!this.tryUncover(t,e)&&this.hand().isFromCurrentSource(t)&&t.isHidden||this.validateTableauStackMove(this.hand().currentCard(),t)?this.tryPutDown(e):this.blink(e):this.tryUncover(t,e)||this.pickup(t)}},{key:"clickEmpty",value:function(t,e){(this.hand().isHoldingKing()||this.hand().source==t)&&this.tryPutDown(e)}}]),n}(T),R=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(u.a)(this,n);for(var c=arguments.length,s=new Array(c),r=0;r<c;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).click=function(e){t.hand().isHoldingCard()?t.tryPutDown(e):e?t.pickup(e):t.blink()},t.blink=function(){return t._blink((function(t){return t.waste}))},t}return Object(l.a)(n,[{key:"pickup",value:function(t){this._setState((function(e){e.hand.isHoldingCard()||(e.hand.pickUp([t],t.source),e.waste.filterOut(t))}))}},{key:"tryPutDown",value:function(){var t=this;"waste"==this.state().hand.source?this._setState((function(e){e.waste.tryPutDown(e.hand.currentCard())&&t.actions.registerMove("waste",e,e.hand.currentCard())&&e.hand.putDown()})):this.blink()}}]),n}(T),F=function t(e){Object(u.a)(this,t),this.clickTableauStack=new A(e).click,this.clickFoundation=new _(e).click,this.clickStock=new M(e).click,this.clickWaste=new R(e).click};function U(t){var e={position:"absolute",left:"0px",top:"0px"},n=Object(o.a)({},y.cardStyle);return t.blinkFor>0&&(n.borderColor="red"),Object(c.jsxs)("div",{style:{position:"relative"},children:[Object(c.jsx)("div",{style:n,onClick:function(){return t.onClick()},children:"\xa0"}),t.model.stack.map((function(n,s){return Object(c.jsx)("div",{style:e,children:Object(c.jsx)(x,{type:n.type,face:n.face,blink:t.model.blinkFor,source:"main",isHidden:n.isHidden,canUncover:s==t.model.stack.length-1,onClick:t.onClick})})}))]})}var P=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e=Object(o.a)({},y),n={position:"absolute",left:"0px",top:"0px"},s=Object(o.a)({},e.cardStyle);this.props.model.blinkFor>0&&(s.borderColor="red");var r=function(e){for(var n=0;n<=e;){if(t.props.model.stack[n]&&!t.props.model.stack[n].isHidden)return 12*n+24*(e-n);n++}return 12*e};return Object(c.jsxs)("div",{style:{position:"relative",height:"30vw"},children:[Object(c.jsx)("div",{style:s,onClick:function(){return t.props.onClick(null,"tableau-"+t.props.stackIndex)},children:"\xa0"}),this.props.model.stack.map((function(e,s){return Object(c.jsx)("div",{style:n,children:Object(c.jsx)(x,{type:e.type,face:e.face,blink:t.props.model.blinkFor,offsetTop:r(s),source:e.source,isHidden:e.isHidden,canUncover:s==t.props.model.stack.length-1,onClick:function(e){return t.props.onClick(e,"tableau-"+t.props.stackIndex)}})})})),t.isTouch&&t.props.hand.isHoldingCard()&&t.props.hand.source=="tableau-"+t.props.stackIndex&&Object(c.jsx)(m,{offset:r(this.props.model.stack.length),stack:this.props.hand.stack,onClick:function(e){return t.props.onClick(function(){var e=t.props.model.stack[t.props.model.stack.length-1];return e&&(e.isHidden=e.isHidden),e}(),"tableau-"+t.props.stackIndex)}})]})}}]),n}(C),z=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e={position:"absolute",left:"0px",top:"0px"},n=Object(o.a)({},y.cardStyle);return this.props.model.blinkFor>0&&(n.borderColor="red"),Object(c.jsxs)("div",{style:{position:"relative"},children:[Object(c.jsx)("div",{style:n,onClick:function(){return t.props.onClick()},children:"\xa0"}),this.props.model.stack.map((function(n,s){return Object(c.jsx)("div",{style:e,children:Object(c.jsx)(x,{type:n.type,face:n.face,blink:t.props.model.blinkFor,source:"waste",onClick:function(e){return t.props.onClick(e)}})})})),t.isTouch&&t.props.hand.isHoldingCard()&&"waste"==t.props.hand.source&&Object(c.jsx)(m,{offset:(this.props.model.stack.length,0),stack:this.props.hand.stack,onClick:function(e){return t.props.onClick(e,"waste")}})]})}}]),n}(C),q=function(){function t(e){Object(u.a)(this,t),this.cards=e}return Object(l.a)(t,[{key:"shuffle",value:function(){return this._shuffleArray(this.cards),this}},{key:"take",value:function(t){if(t){var e=this.cards.slice(0,t);return this.cards=this.cards.slice(t),e}e=Object(I.a)(this.cards);return this.cards=[],e}},{key:"_shuffleArray",value:function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),c=[t[n],t[e]];t[e]=c[0],t[n]=c[1]}}}]),t}(),W={heart:{icon:"\u2665",color:"red"},diamond:{icon:"\u2666",color:"red"},club:{icon:"\u2663",color:"black"},spade:{icon:"\u2660",color:"black"}};var G=function(){function t(){Object(u.a)(this,t),this.stack=[],this.source=null}return Object(l.a)(t,[{key:"pickUp",value:function(t,e){this.stack=t,this.source=e}},{key:"putDown",value:function(){var t=Object(I.a)(this.stack);return this.stack=[],this.source=null,t}},{key:"isHoldingCard",value:function(){return!!this.stack.length}},{key:"isHoldingKing",value:function(){return this.currentCard()&&"K"==this.currentCard().face}},{key:"isCurrentCard",value:function(t){return t&&this.currentCard()==t}},{key:"currentCard",value:function(){return this.isHoldingCard()&&this.stack[0]}},{key:"hasMoreThanOneCard",value:function(){return this.stack.length>1}},{key:"containsCurrentCard",value:function(t){return t&&-1!==t.indexOf(this.currentCard())}},{key:"isFromCurrentSource",value:function(t){return this.source&&t.source==this.source}}]),t}(),B=function(){function t(e){Object(u.a)(this,t),this.stack=Object(I.a)(e)}return Object(l.a)(t,[{key:"recycle",value:function(t){return!!t.length&&(this.stack=Object(I.a)(t).reverse().map((function(t){return Object(o.a)(Object(o.a)({},t),{},{isHidden:!0})})),!0)}},{key:"getTop",value:function(){return this.stack[this.stack.length-1]}}]),t}(),V=function(){function t(){Object(u.a)(this,t),this.stack=[]}return Object(l.a)(t,[{key:"tryPutDown",value:function(t){return this.canAdd(t)&&(this.add(t)||!0)}},{key:"add",value:function(t){this.stack.push(t)}},{key:"canAdd",value:function(t){var e=this.getTopCard();return t&&(!e||E.cardNotEquals(t,e))}},{key:"getTopCard",value:function(){return this.stack[this.stack.length-1]}},{key:"filterOut",value:function(t){this.stack=E.filterNotEqual(this.stack,t)}},{key:"recycle",value:function(){var t=Object(I.a)(this.stack);return this.stack=[],t}}]),t}(),K=function(){function t(e){Object(u.a)(this,t),this.stacks=e}return Object(l.a)(t,[{key:"filterOut",value:function(t){this.stacks=E.filterOut(this.stacks,t)}},{key:"getCurrentAccepted",value:function(t){var e=this.stacks[t].acceptedCards;return e[e.length-1]}},{key:"accepts",value:function(t,e){var n=this.getCurrentAccepted(t);return this.stacks[t].icon==e.type.icon&&n==e.face}},{key:"contains",value:function(t,e){return-1!==this.stacks[t].stack.indexOf(e)}},{key:"add",value:function(t,e){e.source="foundation-"+t,this.stacks[t].stack.push(e),this.stacks[t].usedCards.push(this.stacks[t].acceptedCards.pop())}},{key:"remove",value:function(t,e){this.filterOut(e),this.stacks[t].acceptedCards.push(this.stacks[t].usedCards.pop())}},{key:"getTop",value:function(t){return this.stacks[t].stack[this.stacks[t].stack.length-1]}},{key:"getPreviousUsed",value:function(t){return Object(I.a)(this.stacks[t].usedCards).pop()}}]),t}(),L=function t(e,n){Object(u.a)(this,t),this.stack=[],this.acceptedCards=Object(I.a)(["A"].concat(Object(I.a)(D.slice(0,D.length-1))).reverse()),this.usedCards=[],this.icon=e,this.color=n};var J=function(){function t(e){var n=this;Object(u.a)(this,t),this.filterOut=function(t){return t.map((function(t){return E.filterOut(n.stacks,t)}))},this.stacks=e}return Object(l.a)(t,[{key:"getStack",value:function(t){return this.stacks[t]}},{key:"findFollowing",value:function(t){for(var e=0;e<this.stacks.length;e++)for(var n=0;n<this.stacks[e].stack.length;n++)if(t&&this.stacks[e].stack[n].face==t.face&&this.stacks[e].stack[n].type.icon==t.type.icon)return this.stacks[e].stack.slice(n+1,this.stacks[e].stack.length);return[]}},{key:"uncover",value:function(t,e){for(var n=0;n<this.stacks[t].stack.length;n++)if(E.cardEquals(this.stacks[t].stack[n],e)&&this.stacks[t].stack[n].isHidden)return this.stacks[t].stack[n].isHidden=!1,!0;return!1}},{key:"add",value:function(t,e){Array.isArray(e)?(e=e.map((function(e){return e.source="tableau-"+t,e})),this.stacks[t].stack=this.stacks[t].stack.concat(e)):(e.source="tableau-"+t,this.stacks[t].stack.push(e))}}]),t}(),Y=function t(){var e=this;Object(u.a)(this,t),this.getStacks=function(t){e.deck=t,e.pointer=0,e.oldpointer=e.pointer;var n=[0,1,2,3,4,5,6];return e.stacks=n.map((function(t){return e._getStack(t)})),n.reverse().forEach((function(t){e._generateStack(t)})),e.stacks},this._generateStack=function(t){e.pointer+=6-t+1,e.stacks[t].stack=e.deck.slice(e.oldpointer,e.pointer).map((function(e){return e.isHidden=!0,e.source="tableau-"+t,e})).reverse(),e.stacks[t].stack[e.stacks[t].stack.length-1]&&(e.stacks[t].stack[e.stacks[t].stack.length-1].isHidden=!1),e.oldpointer=e.pointer},this._getRndInteger=function(t,e){return Math.floor(Math.random()*(e-t))+t},this._getStack=function(t){var e={stack:[],id:t};return Object(o.a)({},e)}};var Q=function(t){return{stock:new B(t.cards.slice(28)),waste:new V,foundation:new K(Object.keys(W).map((function(t){return W[t]})).map((function(t){return new L(t.icon,t.color)}))),tableau:(e=t.cards.slice(0,28),new J((new Y).getStacks(e))),hand:new G,currentMove:null,moves:[],points:0,started:Date.now()};var e},X=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(t){var c;return Object(u.a)(this,n),(c=e.call(this,t)).reset=function(){return c.setState((function(){return Object(o.a)({},Q(c.deck))}))},c.deck=function(){for(var t=[],e=Object.keys(W),n=0;n<D.length;n++)for(var c=0;c<e.length;c++){var s=W[e[c]],r=D[n]+""+s.icon;t.push({face:D[n],type:s,key:r,isHidden:!0,toString:function(){return r}})}return new q(t)}(),c.deck.shuffle(),c.state=Q(c.deck),c.service=new F(Object(d.a)(c)),c}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e=g;return Object(c.jsxs)("div",{style:e.table,children:[Object(c.jsx)(S,{stack:this.state.hand.stack}),Object(c.jsxs)("div",{className:"grid-container",children:[Object(c.jsx)("div",{className:"stock",children:Object(c.jsx)(U,{onClick:this.service.clickStock,model:this.state.stock})}),Object(c.jsx)("div",{className:"waste",children:Object(c.jsx)(z,{onClick:this.service.clickWaste,hand:this.state.hand,model:this.state.waste})}),Object(c.jsx)("div",{className:"spacer",children:"\xa0"}),this.state.foundation.stacks.map((function(e,n){return Object(c.jsx)("div",{className:"f"+n,children:Object(c.jsx)(w,{model:e,index:n,hand:t.state.hand,onClick:function(e){return t.service.clickFoundation(n,e)}})})})),this.state.tableau.stacks.map((function(e,n){return Object(c.jsx)("div",{className:"t"+n,children:Object(c.jsx)(P,{stackIndex:n,model:e,hand:t.state.hand,onClick:function(e,c){return t.service.clickTableauStack(e,n,c)}})})})),Object(c.jsxs)("div",{className:"footer",children:[Object(c.jsx)(k,{end:this.state.end,started:this.state.started,points:this.state.points,isEnded:this.state.isEnded}),Object(c.jsx)("button",{variant:"secondary",onClick:this.reset,children:"reset"})]})]})]})}}]),n}(s.Component),Z=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(e){var n=e.getCLS,c=e.getFID,s=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),c(t),s(t),r(t),i(t)}))};a.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(X,{})}),document.getElementById("root")),Z()}},[[18,1,2]]]);
//# sourceMappingURL=main.4b732c7d.chunk.js.map