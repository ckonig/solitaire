(this["webpackJsonpsolitaire-react"]=this["webpackJsonpsolitaire-react"]||[]).push([[0],{14:function(t,e,n){},19:function(t,e,n){},20:function(t,e,n){},21:function(t,e,n){},24:function(t,e,n){},25:function(t,e,n){},29:function(t,e,n){"use strict";n.r(e);var i=n(0),s=n(3),a=n(9),c=n(7),o=n(8),r=n(5),u=n(4),l=n(2),d=(n(19),n(20),function t(){Object(l.a)(this,t)});d.QUICK={key:"QUICK",title:"Quick Game",boardMode:"singleplayer",autoConfig:!0},d.CUSTOM={key:"CUSTOM",title:"Custom Game",boardMode:"singleplayer",autoConfig:!1},d.VERSUS={key:"VERSUS",title:"Versus",boardMode:"splitscreen",autoConfig:!1},d.NULL={key:"",title:"",boardMode:"",autoConfig:!1};n(21);var h=n(1),f=n.n(h),g={state:null,replaceContext:function(){},updateContext:function(){},updateGameContext:function(){},restart:function(){}},p=f.a.createContext(g),b=p.Provider,j=p,v=n(15),m=n.n(v),k=function(t){return Object(i.jsx)(m.a,{gamepadIndex:t.gamepadIndex,onButtonDown:function(e){console.debug(e),"DPadLeft"==e&&t.onLeft&&t.onLeft(),"DPadRight"==e&&t.onRight&&t.onRight(),"DPadUp"==e&&t.onUp&&t.onUp(),"DPadDown"==e&&t.onDown&&t.onDown(),"A"==e&&t.onAction&&t.onAction(),"B"==e&&t.onCancel&&t.onCancel(),"X"==e&&t.onHint&&t.onHint(),"Y"==e&&t.onUndo&&t.onUndo(),"Start"==e&&t.onPause&&t.onPause(),"Back"==e&&t.onPause&&t.onMenu()},onConnect:function(t){console.debug("connected",t)},onDisconnect:function(t){console.debug("disconnected",t)},children:Object(i.jsx)("span",{})})},O=function(t){var e=f.a.useContext(j).state,n="gamepad"==e.settings.launchSettings.inputMode,s="singleplayer"===e.settings.launchSettings.gameMode,a=function(t){t.focus.isKeyBoard(!0),s&&(t.settings.mouseMode="remain-on-stack",t.settings.launchSettings.inputMode="gamepad")};return s||n?Object(i.jsx)(k,{gamepadIndex:0,onLeft:function(){return t.onLeft&&t.onLeft(a)},onRight:function(){return t.onRight&&t.onRight(a)},onUp:function(){return t.onUp&&t.onUp(a)},onDown:function(){return t.onDown&&t.onDown(a)},onAction:function(){return t.onAction&&t.onAction(a)},onCancel:function(){return t.onCancel&&t.onCancel(a)},onHint:function(){return t.onHint&&t.onHint(a)},onUndo:function(){return t.onUndo&&t.onUndo()},onPause:function(){return t.onPause&&t.onPause(a)},onMenu:function(){return t.onPause&&t.onMenu(a)},children:Object(i.jsx)("span",{})}):null},y=function(t){var e=function(e){var n=window.event?event:e;27==n.keyCode&&(t.onCancel&&t.onCancel(),e.preventDefault()),37==n.keyCode&&(t.onLeft&&t.onLeft(),e.preventDefault()),39==n.keyCode&&(t.onRight&&t.onRight(),e.preventDefault()),38==n.keyCode&&(t.onUp&&t.onUp(),e.preventDefault()),40==n.keyCode&&(t.onDown&&t.onDown(),e.preventDefault()),96==n.keyCode&&(t.onAction&&t.onAction(),e.preventDefault()),90==n.keyCode&&n.ctrlKey&&(t.onUndo&&t.onUndo(),e.preventDefault()),72==n.keyCode&&(t.onHint&&t.onHint(),e.preventDefault()),80==n.keyCode&&(t.onPause&&t.onPause(),e.preventDefault()),77==n.keyCode&&(t.onPause&&t.onMenu(),e.preventDefault())};return f.a.useEffect((function(){return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[t]),null},x=function(t){var e=f.a.useContext(j).state,n="keyboard"===e.settings.launchSettings.inputMode,s="singleplayer"===e.settings.launchSettings.gameMode,a=function(t){t.focus.isKeyBoard(!0),s&&(t.settings.mouseMode="remain-on-stack",t.settings.launchSettings.inputMode="keyboard")};return n||s?Object(i.jsx)(y,{onLeft:function(){return t.onLeft&&t.onLeft(a)},onRight:function(){return t.onRight&&t.onRight(a)},onUp:function(){return t.onUp&&t.onUp(a)},onDown:function(){return t.onDown&&t.onDown(a)},onAction:function(){return t.onAction&&t.onAction(a)},onCancel:function(){return t.onCancel&&t.onCancel(a)},onHint:function(){return t.onHint&&t.onHint(a)},onUndo:function(){return t.onUndo&&t.onUndo()},onPause:function(){return t.onPause&&t.onPause(a)},onMenu:function(){return t.onMenu&&t.onMenu(a)}}):null},w=function(t){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(x,{onLeft:t.onLeft,onRight:t.onRight,onUp:t.onUp,onDown:t.onDown,onAction:t.onAction,onCancel:t.onCancel,onHint:t.onHint,onUndo:t.onUndo,onPause:t.onPause,onMenu:t.onMenu}),Object(i.jsx)(O,{onLeft:t.onLeft,onRight:t.onRight,onUp:t.onUp,onDown:t.onDown,onAction:t.onAction,onCancel:t.onCancel,onHint:t.onHint,onUndo:t.onUndo,onPause:t.onPause,onMenu:t.onMenu})]})},C={started:0,end:0,paused:!1,pauses:[],pauseStartedAt:0,allowed:5,isSilent:""},M={state:C,togglePause:function(){}},S=f.a.createContext(M),N=S.Provider,E=function(t){var e=f.a.useState(Object(s.a)({},C)),n=Object(a.a)(e,2),o=n[0],r=n[1],u={state:Object(s.a)(Object(s.a)({},o),{},{started:t.started}),togglePause:function(t,e){o.paused==t&&(o.paused?r(Object(s.a)(Object(s.a)({},o),{},{pauses:[].concat(Object(c.a)(o.pauses),[Date.now()-o.pauseStartedAt]),pauseStartedAt:0,paused:!1,isSilent:e||""})):o.pauses.length<o.allowed&&r(Object(s.a)(Object(s.a)({},o),{},{pauseStartedAt:Date.now(),paused:!0,isSilent:e||""})))},getElapsed:function(){var e=function(t){return 1==(t+"").length?"0"+t:t},n=function(){var e=o.pauses.reduce((function(t,e){return t+e}),0);return(o.end||o.pauseStartedAt||Date.now())-t.started-e}(),i=Math.floor(n/1e3/60/60);n-=1e3*i*60*60;var s=Math.floor(n/1e3/60);n-=1e3*s*60;var a=Math.floor(n/1e3);return n-=1e3*a,i?i+":"+e(s)+":"+e(a):e(s)+":"+e(a)}};return Object(i.jsx)(N,{value:u,children:t.children})},P=S,D=function(){var t=f.a.useContext(j),e=t.state,n=t.updateContext,s=t.updateGameContext,a=t.replaceContext,c=f.a.useContext(P),o={x:e.navigator.currentIndex.x,y:e.navigator.currentIndex.y,z:e.navigator.currentIndex.z},r=!!c.state.paused,u=e.settings.showMenu;return r?null:Object(i.jsx)(w,{onLeft:function(t){return n((function(e){t(e),e.navigator.moveLeft(o)}))},onRight:function(t){return n((function(e){t(e),e.navigator.moveRight(o)}))},onUp:function(t){return n((function(e){t(e),e.navigator.moveUp(o)}))},onDown:function(t){return n((function(e){t(e),e.navigator.moveDown(o)}))},onAction:function(t){return s((function(n){t(n),e.navigator.pressCurrent()(n)}))},onCancel:function(t){return n((function(e){t(e),e.hand.stack.length&&e.hand.stack[0].onClick({isKeyboard:!0})(e)}))},onHint:function(t){n((function(e){t(e),function(t){return t.settings.suggestionMode.supportsHints||t.settings.suggestionMode.isTemporary}(e)&&!function(t){return t.settings.suggestionMode.isTemporary}(e)&&e.settings.enableHint()}))},onUndo:function(){a((function(t){var n=t.game.timemachine.popPreviousState(e.game.timemachine.previousStates.length-1,e);return n?(n.game.rating.penalize(t.game.rating),n):null}))},onPause:function(){return c.togglePause(r)},onMenu:function(t){n((function(e){t(e),e.settings.showMenu=!u})),c.togglePause(!e.settings.showMenu,e.player)}})},T=function(){var t=f.a.useContext(j),e=t.state,n=t.replaceContext,i=[];if(e.settings.launchSettings.quickDeal)e&&e.dealer&&!e.dealer.isDealt&&n(e.dealer.dealAll(e));else{var s=function t(s){i.push(setTimeout((function(){e&&e.dealer&&!e.dealer.isDealt&&n(e.dealer.dealOne(s,t))}),35))};f.a.useEffect((function(){return s(e.dealer.dealt),function(){return i.forEach((function(t){clearTimeout(t)}))}}),[]),f.a.useEffect((function(){}),[e.dealer.isDealt])}return null},H=n(6),U=function(t){Object(r.a)(n,t);var e=Object(u.a)(n);function n(t){var i;return Object(l.a)(this,n),(i=e.call(this)).timeout=null,i.selector=t,i}return Object(H.a)(n,[{key:"componentDidUpdate",value:function(){var t=this;this.selector(this.context.state).blinkFor&&(this.timeout=setTimeout((function(){return t.context.updateGameContext((function(e){t.selector(e).unblink(e)}))}),200))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}}]),n}(h.Component);U.contextType=j;var R=function(t){var e=f.a.useContext(j),n=e.state,a=e.updateGameContext,c=f.a.useContext(P),o=f.a.useRef(null),r=n.focus.hasCard(t.model);f.a.useEffect((function(){r&&"singleplayer"==n.settings.launchSettings.gameMode&&o&&o.current&&o.current.focus()}),[r,n.focus.card]);var u=function(e){e.preventDefault();for(var i=0==e.clientX&&0==e.clientY,s=e.target;s&&!s.className.includes("card-base");)s=s.offsetParent;var c=s.getBoundingClientRect(),o={isKeyBoard:i,click:{x:e.clientX-s.ownerDocument.defaultView.pageXOffset,y:e.clientY-s.ownerDocument.defaultView.pageYOffset},element:{x:c.x,y:c.y}},r="singleplayer"===n.settings.launchSettings.gameMode;t.model.onClick&&!o.isKeyBoard&&a((function(e){t.model.onClick(o)(e),r&&(e.settings.launchSettings.inputMode="mouse")}))},l=[0,1,2,3,4,5,6].map((function(t){return" stack "+(t+1)})),d="",h=t.model.source.split("-");return d+=h[0],h.length>1&&(d+=l[h[1]]),d+=": ",d+=t.model.isHidden?"hidden card":t.model.type.icon+t.model.face,Object(i.jsx)("div",{style:t.model.onClick?{}:{pointerEvents:"none"},className:"stack-base",children:Object(i.jsx)("button",{onFocus:function(){},onBlur:function(){},style:function(){var e=Object(s.a)({zIndex:(t.zIndex?t.zIndex:20*!!t.offsetTop)+1,top:t.offsetTop?t.offsetTop/10+"vw":0},t.model.entropyStyle);return t.offsetLeft&&(e.left=4*t.offsetLeft+"vw"),t.model.onClick||(e.pointerEvents="none"),e}(),ref:o,className:function(){var e=t.isSuggested||t.model.suggestion,n="card card-base suit-".concat(t.model.type.icon);return n+=t.isSelected||r||e?"":" card-stack-".concat(t.model.source),n+=t.isSelected?" card-selected":"",n+=t.blink?" blink":"",n+=t.model.canClick()?" clickable":"",n+=e&&!r?" card-suggested":"",n+=r?" card-focused":""}(),onClick:u||null,disabled:!t.model.canClick()||c.state.paused,tabIndex:t.model.canClick()?0:-1,"aria-label":d,title:d,children:Object(i.jsx)("div",{className:"card-content",children:t.model.isHidden||c.state.paused?Object(i.jsx)("div",{className:"card-back",children:"\xa0"}):Object(i.jsxs)("div",{className:"card-grid-container",children:[Object(i.jsx)("div",{children:Object(i.jsx)("div",{className:"align-center",children:t.model.type.icon})}),Object(i.jsx)("div",{children:Object(i.jsx)("div",{className:"align-left",children:t.model.face})}),Object(i.jsx)("div",{children:"\xa0"}),Object(i.jsx)("div",{children:Object(i.jsx)("div",{className:"align-center",children:t.model.type.icon})}),Object(i.jsx)("div",{className:"mainface",children:Object(i.jsx)("div",{className:"align-center",children:t.model.face})}),Object(i.jsx)("div",{children:Object(i.jsx)("div",{className:"align-center",children:t.model.type.icon})}),Object(i.jsx)("div",{children:"\xa0"}),Object(i.jsx)("div",{children:Object(i.jsx)("div",{className:"align-right",children:t.model.face})}),Object(i.jsx)("div",{children:Object(i.jsx)("div",{className:"align-center",children:t.model.type.icon})})]})})})})},A=function(t){Object(r.a)(n,t);var e=Object(u.a)(n);function n(t){var i;return Object(l.a)(this,n),(i=e.call(this,t)).onMouseMove=function(t){i.state.positionFixed&&i.setState((function(t){return t.positionFixed=!1,Object(s.a)({},t)})),i.updateDisplay(t)},i.myRef=f.a.createRef(),i.state={positionFixed:!0},i.onMouseMove=i.onMouseMove.bind(Object(o.a)(i)),i}return Object(H.a)(n,[{key:"componentDidMount",value:function(){this.setState((function(){return{positionFixed:!0}}))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.onMouseMove,!1)}},{key:"updateDisplay",value:function(t){if(!this.state.positionFixed){var e=this.myRef.current;if(this.props.hand&&this.props.parent==this.props.hand.source&&t){var n=t.clientX-this.props.hand.position.click.x+this.props.hand.position.element.x,i=t.clientY-this.props.hand.position.click.y+this.props.hand.position.element.y;e.style.top=i+"px",e.style.left=n+"px",e.style.position="absolute"}}}},{key:"onKeyDown",value:function(t){27==(window.event?event:t).keyCode&&this.props.hand&&this.props.parent==this.props.hand.source&&this.props.putBack(null,{isKeyboard:!1})}},{key:"render",value:function(){var t=this,e=function(e){return t.state.positionFixed?t.props.offsetTop+24*e:24*e};return this.props.hand&&this.props.parent===this.props.hand.source?Object(i.jsx)("div",{ref:this.myRef,children:this.props.hand&&this.props.hand.stack&&this.props.hand.stack.map((function(t,n){return Object(i.jsx)(R,{model:t,offsetTop:e(n),zIndex:1e3+20*n,isSelected:!0},n)}))}):null}}]),n}(f.a.Component),I=function(t){Object(r.a)(n,t);var e=Object(u.a)(n);function n(t){var i;return Object(l.a)(this,n),(i=e.call(this,t)).enableKeyNav=function(t,e){var n="singleplayer"===t.settings.launchSettings.gameMode;t.focus.isKeyBoard(!0),n&&(t.settings.mouseMode="remain-on-stack",t.settings.launchSettings.inputMode=e)},i}return Object(H.a)(n,[{key:"render",value:function(){var t=this;return this.props.hand&&this.props.parentModel.source===this.props.hand.source?Object(i.jsx)(i.Fragment,{children:[this.props.hand&&this.props.hand.stack&&this.props.hand.stack.map((function(e,n){return Object(i.jsx)(R,{model:e,offsetTop:t.props.offsetTop+24*n,offsetLeft:t.props.offsetLeft,zIndex:1e3+20*n,isSelected:!0,onClick:function(e,n){return t.props.onClick(n)}},n)}))]}):null}}]),n}(f.a.Component);I.contextType=j;var L=function(t){var e=f.a.useContext(j),n=e.state,s=e.updateGameContext;if(!n.hand||t.parentModel.source!==n.hand.source)return null;return"follow-cursor"==n.settings.mouseMode?Object(i.jsx)(A,{parent:t.parentModel.source,hand:n.hand,offsetTop:t.offsetTop,putBack:function(e){t.parentModel.stack.length?s(t.parentModel.getTop().onClick(e)):s(t.parentModel.clickEmpty(e))}}):"remain-on-stack"==n.settings.mouseMode?Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(I,{parentModel:t.parentModel,hand:n.hand,offsetTop:t.offsetTop,offsetLeft:t.offsetLeft})}):null},F=function(t){var e="card-base socket",n=f.a.useRef(null),s=f.a.useContext(j),a=s.state,c=s.updateGameContext;f.a.useEffect((function(){a.focus.hasStack(t.model.parent)&&"singleplayer"==a.settings.launchSettings.gameMode&&n&&n.current&&n.current.focus()})),t.model.stack.length?e+=" socket-full":t.model.blinkFor?e+=" socket-blink":a.focus.hasStack(t.model.source)?e+=" socket-focused":e+=" socket-empty",t.model.suggestions&&!t.model.stack.length&&(e+=" socket-suggested");var o=[0,1,2,3,4,5,6].map((function(t){return" stack "+(t+1)})),r="",u=t.model.source.split("-");return r+=u[0],u.length>1&&(r+=o[u[1]]),r+=": empty socket",Object(i.jsx)("button",{onFocus:function(){},onBlur:function(){},ref:n,className:e,onClick:function(e){e.preventDefault();var n=0==e.clientX&&0==e.clientY;n||c(t.model.clickEmpty({isKeyBoard:n}))},disabled:t.model.stack.length,tabIndex:t.model.stack.length?-1:0,"aria-label":r,title:r,children:t.children})},q=function(t){Object(r.a)(n,t);var e=Object(u.a)(n);function n(t){return Object(l.a)(this,n),e.call(this,(function(e){return e.foundation.stacks[t.index]}))}return Object(H.a)(n,[{key:"render",value:function(){var t=this.props.model;return Object(i.jsxs)("div",{className:"board-field",children:[Object(i.jsx)(F,{model:t,children:Object(i.jsx)("div",{className:"align-center foundation-base suit-"+t.icon,children:t.icon})}),t.stack.map((function(e,n){return Object(i.jsx)(R,{model:e,blink:t.blinkFor,isSuggested:t.suggestion&&t.stack.length-1==n},n)})),Object(i.jsx)(L,{parentModel:t,stack:t.stack})]},this.props.index)}}]),n}(U);q.Stacks=function(){return f.a.useContext(j).state.foundation.stacks.map((function(t,e){return Object(i.jsx)(q,{model:t,index:e},e)}))};n(24);var B=function(){var t=f.a.useContext(P),e=t.state,n=t.getElapsed,s=f.a.useState(0),c=Object(a.a)(s,2),o=c[0],r=c[1];return f.a.useEffect((function(){var t=setInterval((function(){e.started&&!e.paused&&r(n())}),1e3);return function(){return clearInterval(t)}}),[e.started,e.paused]),!e.started||o<=0?null:Object(i.jsxs)("div",{className:"header-clock",children:[Object(i.jsx)("div",{className:"icon-container",children:"\ud83d\udd52"}),o]})},z=function(){var t=f.a.useContext(j).restart;return Object(i.jsx)("div",{children:Object(i.jsx)("button",{title:"End Game",onClick:t,children:"\ud83d\uddd1\ufe0f"})})},G=function(){var t=f.a.useContext(j).state;return Object(i.jsx)("div",{className:"heart-container",children:function(){if("infinite"==t.settings.launchSettings.recyclingMode)return"\ud83d\udda4";if("1-pass"==t.settings.launchSettings.recyclingMode)return t.game.passes>0?"\u2764\ufe0f":"\ud83d\udc94";if("3-pass"==t.settings.launchSettings.recyclingMode){var e=function(t,e){return Array.from(new Array(t).keys()).map((function(){return e})).join("")};return e(t.stock.passes,"\u2764\ufe0f")+e(3-t.stock.passes,"\ud83d\udc94")}return null}()})},K=function(){var t=f.a.useContext(j),e=t.state,n=t.updateContext,s=function(t){return t.settings.suggestionMode.supportsHints||t.settings.suggestionMode.isTemporary},a=function(t){return t.settings.suggestionMode.isTemporary};return s(e)?Object(i.jsx)("div",{children:Object(i.jsx)("button",{title:"Hint",onClick:function(){n((function(t){s(t)&&!a(t)&&t.settings.enableHint()}))},disabled:a(e),children:"\ud83d\udca1"})}):null},W=function(){var t=f.a.useContext(j).state,e="\ud83d\uddb1\ufe0f";return e="keyboard"==t.settings.launchSettings.inputMode?"\u2328\ufe0f":e,e="gamepad"==t.settings.launchSettings.inputMode?"\ud83c\udfae":e,Object(i.jsx)("div",{children:Object(i.jsx)("button",{children:e})})},V=function(){var t=f.a.useContext(P),e=t.state,n=t.togglePause;return e.pauses.length<e.allowed?Object(i.jsx)("div",{children:Object(i.jsx)("button",{title:"Pause - ".concat(e.allowed-e.pauses.length," remaining"),disabled:e.paused,onClick:function(){return n(e.paused)},children:e.paused?"\u25b6\ufe0f":"\u23f8\ufe0f"})}):null},Y=function(){var t=f.a.useContext(j).state;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:"icon-container",children:"\ud83c\udfc6"})," ",t.game.rating.points]})},Q=function(){var t=f.a.useContext(j),e=t.state,n=t.replaceContext;return Object(i.jsx)("div",{children:Object(i.jsx)("button",{title:"Restart",disabled:!e.game.timemachine.previousStates.length,onClick:function(){return n((function(t){return t.game.timemachine.previousStates?t.game.timemachine.previousStates[0]:null}))},children:"\u267b\ufe0f"})})},X=function(){var t=f.a.useContext(j),e=t.state,n=t.updateContext,s=f.a.useContext(P);return Object(i.jsx)("div",{children:Object(i.jsx)("button",{disabled:s.state.pauses.length>=s.state.allowed,title:"Settings",onClick:function(){return t=e.settings.showMenu,void n((function(e){e.settings.showMenu==t&&(e.settings.showMenu=!e.settings.showMenu,s.togglePause(!e.settings.showMenu,e.player))}));var t},children:"\u2699\ufe0f"})})},J=function(){var t=f.a.useContext(j),e=t.state,n=t.replaceContext;return Object(i.jsx)("div",{children:Object(i.jsx)("button",{disabled:!e.game.timemachine.previousStates.length,title:"Undo (Penalty:"+Math.pow(2,e.game.rating.multiplicator)+")",onClick:function(){return n((function(t){var n=t.game.timemachine.popPreviousState(e.game.timemachine.previousStates.length-1,e);return n?(n.game.rating.penalize(t.game.rating),n):null}))},children:"\u23ea"})})},Z=function(t){return Object(i.jsxs)("div",{className:"header "+t.mode,children:[Object(i.jsxs)("div",{className:"header-title",children:[Object(i.jsx)(G,{}),Object(i.jsx)(Y,{})]}),Object(i.jsx)(B,{}),Object(i.jsxs)("div",{className:"header-buttons",children:[Object(i.jsx)(W,{}),Object(i.jsx)(K,{}),Object(i.jsx)(J,{}),Object(i.jsx)(V,{}),Object(i.jsx)(Q,{}),Object(i.jsx)(z,{}),Object(i.jsx)(X,{})]})]})},_=(n(25),["none","low","regular","high","extreme"]),$=function(){var t=f.a.useContext(j),e=t.state,n=t.updateContext,s=f.a.useContext(P).togglePause;return e.settings.showMenu?Object(i.jsxs)("div",{className:"ui neutral menu",children:[Object(i.jsx)("div",{className:"closer",children:Object(i.jsx)("button",{onClick:function(){return t=e.settings.showMenu,void n((function(e){e.settings.showMenu==t&&(e.settings.showMenu=!e.settings.showMenu,s(!e.settings.showMenu,e.player))}));var t},children:"\ud83d\uddd9"})}),Object(i.jsx)("div",{className:"title",children:"Settings"}),Object(i.jsxs)("div",{className:"content",children:[Object(i.jsxs)("div",{className:"section",children:[Object(i.jsx)("div",{className:"title",children:"Suggestions"}),Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"label",children:"How much help - if any - should the game offer by displaying suggestions?"}),Object(i.jsx)("select",{onChange:function(t){return e=t.target.value,n((function(t){return t.settings.setSuggestionMode(e)}));var e},value:e.settings.suggestionMode.key,disabled:e.settings.launchSettings.hintPenalty,children:e.settings.suggestionModes.map((function(t){return Object(i.jsx)("option",{value:t.key,children:t.label},t.key)}))})]})]}),Object(i.jsxs)("div",{className:"section",children:[Object(i.jsx)("div",{className:"title",children:"Active Card"}),Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"label",children:"Should the selected card follow the cursor or remain on the stack?"}),Object(i.jsx)("select",{onChange:function(t){return e=t.target.value,n((function(t){return t.settings.mouseMode=e}));var e},value:e.settings.mouseMode,children:e.settings.mouseModes.map((function(t){return Object(i.jsx)("option",{value:t,children:t},t)}))})]})]}),Object(i.jsxs)("div",{className:"section",children:[Object(i.jsx)("div",{className:"title",children:"Base Entropy"}),Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"label",children:"How much chaos will the stacks on the board contain by themselves?"}),Object(i.jsx)("select",{onChange:function(t){return e=t.target.value,n((function(t){return t.setEntropy(e)}));var e},value:e.settings.baseEntropy,children:_.map((function(t,e){return Object(i.jsx)("option",{value:e,children:t},t)}))})]})]}),Object(i.jsxs)("div",{className:"section",children:[Object(i.jsx)("div",{className:"title",children:"Interaction Entropy"}),Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"label",children:"How much chaos will each interaction add to a stack on the board?"}),Object(i.jsx)("select",{onChange:function(t){return e=t.target.value,n((function(t){return t.settings.interactionEntropy=e}));var e},value:e.settings.interactionEntropy,children:_.map((function(t,e){return Object(i.jsx)("option",{value:e,children:t},t)}))})]})]})]})]}):null},tt=(n(14),function(){var t=f.a.useContext(j),e=f.a.useContext(P),n=e.state,s=e.togglePause,a=n.allowed-n.pauses.length-1,c="You can pause the game ".concat(a," more times.");1==a&&(c="You can pause the game ".concat(a," more time.")),0==a&&(c="This is the last remaining pause. If you continue, no more pause will be possible.");var o=function(){return s(n.paused)};return!n.paused||n.isSilent&&n.isSilent==t.state.player?null:Object(i.jsxs)("div",{className:"ui neutral endscreen",children:[Object(i.jsx)("div",{className:"title",children:"\ud83d\ude34"}),Object(i.jsxs)("div",{className:"content",children:[Object(i.jsx)("div",{children:c}),Object(i.jsx)("div",{children:n.isSilent?"Wait for Player "+n.isSilent+" to continue.":Object(i.jsxs)("button",{onClick:o,children:["\u25b6\ufe0f",Object(i.jsx)("div",{children:"Continue"})]})})]}),Object(i.jsx)(y,{onAction:o,onCancel:o}),Object(i.jsx)(k,{onAction:o,onCancel:o})]})}),et=function(t){var e=f.a.useContext(P).state,n=e.paused,s=e.started;return Object(i.jsx)(nt,{length:t.length,paused:n,started:s})},nt=function(t){var e=f.a.useContext(j),n=t.length,s=t.started,a=t.paused,c=function(t){var e=f.a.useRef();return f.a.useEffect((function(){e.current=t})),e.current}({length:n,paused:a,started:s});return f.a.useEffect((function(){var t=null;return e.state.settings.launchSettings.speed&&c&&s&&!a&&(c.length!=n||c.started!=s||c.paused!=a)&&(t=setTimeout((function(){e.updateContext((function(t){n==t.stock.stack.length&&t.stock.passes>0&&(t.stock.stack.length||t.waste.stack.length)&&(t.hand.isFromWaste()&&t.waste.putDownHand(),t.stock.stack.length?t.waste.addAll(t.stock.popTop()):t.stock.canRecycle()&&t.stock.recycle(t.waste.recycle()))}))}),1e4)),function(){return clearTimeout(t)}}),[n,a,s]),Object(i.jsxs)("div",{className:"board-field stock",children:[Object(i.jsx)(F,{model:e.state.stock}),e.state.stock.stack.map((function(t,n){return Object(i.jsx)(R,{model:t,offsetTop:n/2*-1,zIndex:n,blink:e.state.stock.blinkFor,isSuggested:e.state.stock.suggestion&&n==e.state.stock.stack.length-1},n)}))]})},it=function(t){Object(r.a)(n,t);var e=Object(u.a)(n);function n(){return Object(l.a)(this,n),e.call(this,(function(t){return t.stock}))}return Object(H.a)(n,[{key:"render",value:function(){return Object(i.jsx)(et,{length:this.context.state.stock.stack.length})}}]),n}(U),st=function(t){Object(r.a)(n,t);var e=Object(u.a)(n);function n(t){return Object(l.a)(this,n),e.call(this,(function(e){return e.tableau.stacks[t.index]}))}return Object(H.a)(n,[{key:"render",value:function(){var t=this.props,e=function(e){for(var n=0;n<=e;n++)if(t.model.stack[n]&&!t.model.stack[n].isHidden)return 12*n+24*(e-n);return 12*e};return Object(i.jsxs)("div",{className:"board-field",children:[Object(i.jsx)(F,{model:t.model}),t.model.stack.map((function(n,s){return Object(i.jsx)(R,{model:n,blink:t.model.blinkFor,isSuggested:t.model.suggestion&&t.model.stack.length-1==s,offsetTop:e(s)},s)})),Object(i.jsx)(L,{parentModel:t.model,stack:t.model.stack,offsetTop:e(t.model.stack.length)})]})}}]),n}(U);st.Stacks=function(){var t=f.a.useContext(j).state;return t.tableau.stacks.map((function(e,n){return Object(i.jsx)(st,{index:n,model:e,parent:t.tableau},n)}))};var at=function(t){Object(r.a)(n,t);var e=Object(u.a)(n);function n(){return Object(l.a)(this,n),e.call(this,(function(t){return t.waste}))}return Object(H.a)(n,[{key:"render",value:function(){var t=this.context.state,e=function(e){if("single"==t.settings.launchSettings.drawMode)return 0;var n="remain-on-stack"==t.waste.settings.mouseMode&&t.hand.isHoldingCard()&&t.hand.isFromWaste()?t.waste.stack.length+1:t.waste.stack.length,i=2;return 2==n&&(i=1),1==n&&(i=0),(e-n-2)%3+i};return Object(i.jsxs)("div",{className:"board-field",children:[Object(i.jsx)(F,{model:t.waste}),t.waste.stack.map((function(n,s){return Object(i.jsx)(R,{model:n,offsetTop:s/2*-1,offsetLeft:e(s),blink:t.waste.blinkFor,isSuggested:t.waste.suggestion&&s==t.waste.stack.length-1},s)})),Object(i.jsx)(L,{offsetTop:t.waste.stack.length/2*-1,offsetLeft:e(t.waste.stack.length),parentModel:t.waste,stack:t.waste.stack})]})}}]),n}(U),ct=function(t){return Object(i.jsxs)("div",{className:"layout-grid-container "+t.mode,children:[Object(i.jsx)(Z,{mode:t.mode}),Object(i.jsxs)("div",{className:"board-jail "+t.mode,children:[Object(i.jsxs)("div",{className:"board-grid-container "+t.mode,children:[Object(i.jsx)(it,{}),Object(i.jsx)(at,{}),Object(i.jsx)("div",{className:"spacer",children:"\xa0"}),Object(i.jsx)(q.Stacks,{}),Object(i.jsx)(st.Stacks,{})]}),Object(i.jsx)($,{}),Object(i.jsx)(tt,{})]}),Object(i.jsx)(T,{}),Object(i.jsx)(D,{})]})},ot=function t(){var e=this;Object(l.a)(this,t),this.startBlink=function(t,n){t(n).blinkFor<10&&(t(n).blinkFor=10,n.game.registerBlink(!0),t(n).unblink=function(n){return e.stopBlink(t,n)})},this.stopBlink=function(t,e){t(e).blinkFor=0,e.game.registerBlink(!1)}},rt=function t(){var e=this;Object(l.a)(this,t),this.blink=function(t,e){return(new ot).startBlink((function(t){return t.tableau.stacks[e]}),t)},this.dispatchPutDown=function(t,n,i,s){if(i.tableau.wouldAcceptHand(s)){var a=i.hand.source;i.tableau.putDownHand(s)&&i.game.registerMove("tableau-"+s,a)}else e.blink(i,s)},this.dispatchPickup=function(t,n,i,s){t?i.hand.pickUp(i.tableau.popWithFollowing(t,s),t.source,n)&&i.game.registerPickup():t||e.blink(i,s)}},ut=function(t){Object(r.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(l.a)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s))).dispatchPickup=function(e,n,i,s){e&&t.tryUncover(e,s,i)},t.tryUncover=function(t,e,n){return!n.hand.isHoldingCard()&&t.isHidden&&n.tableau.uncover(e,t)&&n.game.registerUncover()},t}return n}(rt),lt=function t(){var e=this;Object(l.a)(this,t),this.dealt=void 0,this.dealingAt=void 0,this.isDealt=void 0,this.dealOne=function(t,e){return function(n){return t!=n.dealer.dealt?null:(n.dealer.deal(n.stock,n.tableau),n.dealer.isDealt&&(n.game.started=Date.now()),n.dealer.isDealt||e(n.dealer.dealt),n)}},this.dealAll=function(){return function(t){if(e.dealt!=t.dealer.dealt)return null;for(;!t.dealer.isDealt;)t.dealer.deal(t.stock,t.tableau);return t.game.started=Date.now(),t}},this.deal=function(t,n){for(var i=e.dealingAt;i<n.stacks.length;i++){var s=n.stacks[i].stack;if(s.length<=n.stacks.length-i-1){var a=t.popOne();return a.source=n.stacks[i].source,s.length==n.stacks.length-1-i&&(a.isHidden=!1),n.deal(a,i),e.dealt++,e.dealingAt++,e.dealingAt==n.stacks.length&&(e.dealingAt=0),void(e.isDealt=!1)}var c=0==e.dealingAt;return e.dealingAt=0,void(e.isDealt=c)}e.isDealt=!0},this.dealt=0,this.dealingAt=0,this.isDealt=!1},dt=function t(e){var n=this;Object(l.a)(this,t),this.clickHandler=void 0,this.getHandler=function(t){return t&&t.isHoldingCard()?n.dispatchPutDown:n.dispatchPickup},this.dispatchPutDown=function(t,e,i){return function(s){s.hand.isHoldingCard()&&n.clickHandler.dispatchPutDown(t,e,s,i)}},this.dispatchPickup=function(t,e,i){return function(s){s.hand.isHoldingCard()||n.clickHandler.dispatchPickup(t,e,s,i)}},this.clickHandler=e},ht=function(){function t(){var e=this;Object(l.a)(this,t),this.blink=function(t,e){return(new ot).startBlink((function(t){return t.foundation.stacks[e]}),t)},this.dispatchPutDown=function(t,n,i,s){if(i.foundation.wouldAcceptHand(s)){var a=i.hand.source;i.foundation.putDownHand(s)&&i.game.registerMove("foundation-"+s,a),e.tryDetectEnd(i)}else e.blink(i,s)},this.dispatchPickup=function(t,n,i,s){var a=i.foundation.getTop(s);a&&i.foundation.getPreviousUsed(s)===a.face?i.hand.pickUp([i.foundation.remove(s,a)],a.source,n)&&i.game.registerPickup():e.blink(i,s)}}return Object(H.a)(t,[{key:"tryDetectEnd",value:function(t){52===t.foundation.countCards()&&(t.game.isEnded=!0,t.game.end=Date.now())}}]),t}(),ft=function(){function t(e,n,i){var s=this;Object(l.a)(this,t),this.causeEntropy=function(t){var e=2*t,n=function(){return Math.random()<.5},i=function(t,e){return Math.random()*(e-t)+t};n()&&(n()?s.entropyStyle.left=i(0,e/20)+"vw":s.entropyStyle.right=i(0,e/20)+"vw"),s.entropyStyle.transform="rotate("+i(-1*e,e)+"deg)"},this.equals=function(e){return t.equals(s,e)},this.face=e,this.type=n,this.isHidden=i,this.entropyStyle={},this.source="",this.suggestion=!1}return Object(H.a)(t,null,[{key:"equals",value:function(t,e){return!t&&!e||t&&e&&e.face==t.face&&e.type.icon==t.type.icon}}]),t}();ft.copy=function(t){var e=new ft(t.face,t.type,t.isHidden);return e.source=t.source,e.entropyStyle=Object(s.a)({},t.entropyStyle),e.canClick=t.canClick,e.onClick=t.onClick,e},ft.copyAll=function(t){return t.map((function(t){return ft.copy(t)}))};var gt=function t(e){var n=this;Object(l.a)(this,t),this.validSettings=function(){return"mouse"!==n.settings.launchSettings.inputMode},this.isKeyBoard=function(t){n.keyboard=t},this.setCard=function(t){n.card=t,n.stack=null},this.unsetCard=function(t){n.card&&t&&ft.equals(n.card,t)&&(n.card=null)},this.unsetStack=function(t){n.stack&&t&&n.stack==t&&(n.stack=null)},this.setStack=function(t){n.card=null,n.stack=t},this.hasCard=function(t){return n.keyboard&&n.validSettings()&&n.card&&t&&ft.equals(n.card,t)},this.hasStack=function(t){return n.keyboard&&n.validSettings()&&n.stack&&t&&n.stack==t},this.settings=e,this.card=null,this.stack=null,this.keyboard=!1},pt=function t(e){var n=this;Object(l.a)(this,t),this.stack=[],this.getTop=function(){return n.stack&&n.stack.length&&n.stack[n.stack.length-1]},this.suggestion=!1,this.getClickable=function(){return n.stack.filter((function(t){return t.canClick()}))},this.source=e},bt=function(t){Object(r.a)(n,t);var e=Object(u.a)(n);function n(t,i){var s;return Object(l.a)(this,n),(s=e.call(this,t)).getHandContent=function(){return s.hand.source==s.source?s.hand.stack:[]},s.getClickable=function(){return[].concat(Object(c.a)(s.stack.filter((function(t){return t.canClick()}))),Object(c.a)(s.getHandContent().filter((function(t){return t.canClick()}))))},s.hand=i,s}return n}(pt),jt={heart:{icon:"\u2665",color:"red"},club:{icon:"\u2663",color:"black"},diamond:{icon:"\u2666",color:"red"},spade:{icon:"\u2660",color:"black"}},vt=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],mt=function t(e,n){var i=this;Object(l.a)(this,t),this.setOnClick=function(t){i.stacks.forEach((function(e,n){e.clickEmpty=function(e){return t(null,e,n)},e.stack.forEach((function(i,a){i.onClick=function(e){return t(Object(s.a)({},i),e,n)},i.canClick=function(){return a==e.stack.length-1}})),i.hand.setOnClick(e)}))},this.getCurrentAccepted=function(t){var e=i.stacks[t].acceptedCards;return e[e.length-1]},this.wouldAcceptHand=function(t){return!i.hand.hasMoreThanOneCard()&&i.accepts(t,i.hand.currentCard())},this.putDownHand=function(t){return i.add(t,i.hand.putDown())},this.accepts=function(t,e){var n=i.getCurrentAccepted(t);return i.stacks[t].icon==e.type.icon&&n==e.face},this.add=function(t,e){var n=e[0];return n.causeEntropy(Math.min(i.settings.interactionEntropy,3)),n.source=i.stacks[t].source,i.stacks[t].stack.push(n),i.stacks[t].usedCards.push(i.stacks[t].acceptedCards.pop())},this.remove=function(t,e){return i.stacks[t].acceptedCards.push(i.stacks[t].usedCards.pop()),e&&e.equals(i.getTop(t))&&i.stacks[t].stack.pop()},this.getPreviousUsed=function(t){return Object(c.a)(i.stacks[t].usedCards).pop()},this.countCards=function(){return i.stacks.map((function(t){return parseInt(t.stack.length)})).reduce((function(t,e){return t+e}),0)},this.getTop=function(t){return i.stacks[t].stack[i.stacks[t].stack.length-1]},this.setEntropy=function(t){return i.stacks.forEach((function(e){return e.stack.forEach((function(e){return e.causeEntropy(Math.min(3,t))}))})),i},this.settings=e,this.hand=n;var a=function(t){var e=new bt("foundation-"+t,n);return e.stack=[],e.acceptedCards=Object(c.a)(["A"].concat(Object(c.a)(vt.slice(0,vt.length-1))).reverse()),e.usedCards=[],e.icon=null,e.color=null,e.blinkFor=0,e},o=Object.keys(jt).map((function(t){return jt[t]})).map((function(t,e){return Object(s.a)(Object(s.a)({},a(e)),t)}));this.stacks=Object(c.a)(o),this.blinkFor=0,this.unblink=function(){}};mt.copy=function(t,e){var n=new mt(t.settings,e);return n.stacks=t.stacks.map((function(t){var n=new bt(t.source,e);return n.stack=ft.copyAll(t.stack),n.acceptedCards=Object(c.a)(t.acceptedCards),n.usedCards=Object(c.a)(t.usedCards),n.icon=t.icon,n.color=t.color,n})),n};var kt=function(){function t(e){var n=this;Object(l.a)(this,t),this.registerMove=function(t,e){var i={source:e,target:t};n.points+=n.rateMove(i)},this.registerRecycle=function(){"single"==n.settings.launchSettings.drawMode&&"infinite"==n.settings.launchSettings.recyclingMode&&(n.points>0&&(n.points<100?n.points=0:n.points-=100),console.debug("RATING: subtract (max) 100 points for RECYCLE"))},this.registerUncover=function(){n.points+=5,console.debug("RATING: add 5 points for UNCOVER")},this.penalize=function(t){if(n.settings.launchSettings.undoPenalty){var e=Math.pow(2,t.multiplicator);console.debug("RATING: applying penalty of ".concat(e," points for UNDO")),n.points=Math.min(n.points,t.points)-e,n.multiplicator=t.multiplicator+1}},this.registerHint=function(t){t&&n.settings.launchSettings.hintPenalty&&(n.points-=10,console.debug("RATING: applying penalty of 10 points for HINT"))},this.getTimePenalty=function(t,e){var n=(e-t)/1e3;return-2*Math.trunc(n/5)},this.getBonusPoints=function(t,e){var n=(e-t)/1e3;return n<30?0:Math.round(2e4/n*35)},this.getTotal=function(t,e){return n.points+n.getBonusPoints(t,e)-n.getTimePenalty(t,e)},this.settings=e,this.points=0,this.multiplicator=1}return Object(H.a)(t,[{key:"registerBlink",value:function(t){t&&this.settings.launchSettings.missPenalty&&(this.points-=10,console.debug("RATING: subtract 10 points for invalid action"))}},{key:"rateMove",value:function(t){var e=function(t){return"tableau"==t.substr(0,7)},n=function(t){return"foundation"==t.substr(0,10)};if(e(t.source)){if(n(t.target))return console.debug("RATING: add 10 points for MOVE tableau -> foundation"),10}else if("waste"==t.source){if(n(t.target))return console.debug("RATING: add 10 points for MOVE waste -> foundation"),10;if(e(t.target))return console.debug("RATING: add 5 points for MOVE waste -> tableau"),5}else if(n(t.source)&&e(t.target))return console.debug("RATING: subtract 15 points for MOVE foundation -> tableau"),-15;return 0}}]),t}();kt.copy=function(t){var e=new kt(t.settings);return e.points=t.points,e.multiplicator=t.multiplicator,e};var Ot=function(){function t(){var e=this;Object(l.a)(this,t),this.registerMove=function(t,n){e.memorable=!0,e.modified=!0,n==t&&(e.memorable=!1)},this.pushPreviousState=function(t){var n=e.previousStates[e.previousStates.length-1];n&&e.modelEquals(t,n)||e.previousStates.push(t)},this.registerPickup=function(){e.modified=!0,e.memorable=!1},this.popPreviousState=function(t,n){for(var i=e.previousStates.length-1==t,s=function(){return i&&e.previousStates&&e.previousStates.pop()},a=s();a&&(!a.game.timemachine.memorable||e.modelEquals(a,n))&&e.previousStates.length;)a=s();return a},this.registerRecycle=function(){e.memorable=!0,e.modified=!0},this.registerUncover=function(){return e.memorable=!0,e.modified=!0,!0},this.stackEquals=function(t,e){return t.stack.every((function(t,n){return ft.equals(t,e.stack[n])&&t.isHidden==e.stack[n].isHidden}))},this.stacksEqual=function(t,n){return t.stacks.every((function(t,i){return e.stackEquals(t,n.stacks[i])}))},this.modelEquals=function(t,n){return e.stackEquals(t.stock,n.stock)&&e.stackEquals(t.waste,n.waste)&&e.stacksEqual(t.tableau,n.tableau)&&e.stacksEqual(t.foundation,n.foundation)},this.previousStates=[],this.memorable=!0,this.modified=!1}return Object(H.a)(t,[{key:"registerBlink",value:function(){this.modified=!0,this.memorable=!1}}]),t}();Ot.copy=function(t){var e=new Ot;return e.previousStates=Object(c.a)(t.previousStates),e.memorable=t.memorable,e.modified=t.modified,e};var yt=function(){function t(e){var n=this;Object(l.a)(this,t),this.registerMove=function(t,e){return n.rating.registerHint(n.settings.disableHint()),n.rating.registerMove(t,e),n.timemachine.registerMove(t,e),!0},this.registerPickup=function(){return n.timemachine.registerPickup(),!0},this.registerRecycle=function(){return n.rating.registerHint(n.settings.disableHint()),n.rating.registerRecycle(),n.timemachine.registerRecycle(),!0},this.registerUncover=function(){return n.rating.registerHint(n.settings.disableHint()),n.rating.registerUncover(),n.timemachine.registerUncover(),!0},this.settings=e,this.rating=new kt(e),this.timemachine=new Ot,this.started=0,this.isEnded=!1,this.end=0}return Object(H.a)(t,[{key:"registerBlink",value:function(t){return this.rating.registerBlink(t),this.timemachine.registerBlink(t),!0}}]),t}();yt.copy=function(t){var e=new yt(t.settings);return e.timemachine=Ot.copy(t.timemachine),e.rating=kt.copy(t.rating),e.paused=t.paused,e};var xt=function t(){var e=this;Object(l.a)(this,t),this.pickUp=function(t,n,i){return t&&t[0]&&(e.stack=t.map((function(t){return t.suggestion=!1,t})),e.source=n,e.position=i),t},this.putDown=function(){return e.source=null,e.stack.splice(0,e.stack.length)},this.setOnClick=function(t){if(e.source&&e.source==t.source){var n=t.clickEmpty;t.stack.length&&(n=t.stack[t.stack.length-1].onClick),e.stack.forEach((function(t){t.onClick=n,t.canClick=function(){return!0}}))}},this.isHoldingCard=function(){return!!e.stack.length},this.isHoldingKing=function(){return e.isHoldingCard()&&"K"==e.currentCard().face},this.currentCard=function(){return e.isHoldingCard()&&e.stack[0]},this.hasMoreThanOneCard=function(){return e.stack.length>1},this.isFromCurrentSource=function(t){return e.source&&t.source==e.source},this.isFromWaste=function(){return e.source&&"waste"==e.source},this.isFromFoundation=function(t){return e.source&&e.source=="foundation-".concat(t)},this.isFromTableau=function(t){return e.source&&e.source=="tableau-".concat(t)},this.isFromAnyTableau=function(){return e.source&&"tableau-"==e.source.substring(0,8)},this.getTableauIndex=function(){return e.source&&e.source.substring(8)},this.stack=[],this.source=null,this.position=null};xt.copy=function(t){var e=new xt(t.focus);return e.stack=ft.copyAll(t.stack),e.source=t.source,e.position=t.position,e};var wt=function t(e,n){Object(l.a)(this,t),this.key=void 0,this.label=void 0,this.isTemporary=void 0,this.supportsHints=void 0,this.next=void 0,this.key=e,this.label=n.label,this.isTemporary=!!n.isTemporary,this.supportsHints=!!n.supportsHints,this.next=n.next},Ct=function t(){Object(l.a)(this,t)};Ct.NONE="NONE",Ct.SCORED="SCORED",Ct.REGULAR="REGULAR",Ct.FULL="FULL",Ct.ONCE="ONCE",Ct.TWICE="TWICE",Ct.raw={NONE:{label:"None",supportsHints:!0},SCORED:{label:"Scored"},REGULAR:{label:"Regular"},FULL:{label:"Full"},ONCE:{label:"Single Action",isTemporary:!0,next:"NONE"}},Ct.get=function(t){return new wt(t,Ct.raw[t])},Ct.all=function(){return Object.keys(Ct.raw).map(Ct.get)},Ct.allSuggestionModes=function(){return Ct.all().filter((function(t){return!t.isTemporary}))},Ct.default=function(){return Ct.get(Ct.REGULAR)},Ct.getHintMode=function(){return Ct.get(Ct.ONCE)};var Mt=function t(e){var n=this;Object(l.a)(this,t),this.setSuggestionMode=function(t){n.suggestionMode.key!==t&&(n.suggestionMode=Ct.get(t))},this.enableHint=function(){n.suggestionMode=Ct.getHintMode()},this.disableHint=function(){return!(!n.suggestionMode.isTemporary||!n.suggestionMode.next)&&(n.suggestionMode=Ct.get(n.suggestionMode.next),!0)},this.launchSettings=e,this.mouseModes=["follow-cursor","remain-on-stack"],this.mouseMode="remain-on-stack",this.baseEntropy=e.baseEntropy,this.interactionEntropy=e.interactionEntropy,this.suggestionModes=Ct.allSuggestionModes(),this.suggestionMode=Ct.default()};Mt.copy=function(t){var e=new Mt(t.launchSettings);return e.suggestionMode=t.suggestionMode,e.mouseMode=t.mouseMode,e.baseEntropy=t.baseEntropy,e.interactionEntropy=t.interactionEntropy,e.hintMode=t.hintMode,e};var St=function(t){Object(r.a)(n,t);var e=Object(u.a)(n);function n(t,i){var a;return Object(l.a)(this,n),(a=e.call(this,"stock")).setOnClick=function(t){a.clickEmpty=function(e){return t(null,e)},a.stack.forEach((function(e,n){e.onClick=function(n){return t(Object(s.a)({},e),n)},e.canClick=function(){return n==a.stack.length-1}}))},a.popOne=function(){return a.stack.pop()},a.recycle=function(t){return!!t.length&&(a.stack=t.reverse().map(a.setCardProperties),a.recyclings++,!0)},a.setCardProperties=function(t){return t.causeEntropy(Math.min(a.settings.interactionEntropy,1)),t.isHidden=!0,t.source=a.source,t},a.isOnTop=function(t){return t&&t.equals(a.getTop())},a.popTop=function(){var t=[];return"single"==a.settings.launchSettings.drawMode&&(t=[a.stack.pop()]),"triple"==a.settings.launchSettings.drawMode&&(t=a.stack.splice(a.stack.length-3)),0==a.stack.length&&a.passes--,t},a.setEntropy=function(t){return a.stack.forEach((function(e){return e.causeEntropy(Math.min(t,1))})),Object(o.a)(a)},a.settings=i,a.stack=t.map(a.setCardProperties),a.recyclings=0,a.passes=-1,a.blinkFor=0,a.unblink=function(){},"1-pass"==a.settings.launchSettings.recyclingMode&&(a.passes=1),"3-pass"==a.settings.launchSettings.recyclingMode&&(a.passes=3),a}return Object(H.a)(n,[{key:"canRecycle",value:function(){return"infinite"==this.settings.launchSettings.recyclingMode||"3-pass"==this.settings.launchSettings.recyclingMode&&this.recyclings<2}}]),n}(pt);St.copy=function(t){var e=new St([],t.settings,t.focus);return e.stack=ft.copyAll(t.stack),e.dealt=t.dealt,e.dealingAt=t.dealingAt,e.isDealt=t.isDealt,e.passes=t.passes,e.recyclings=t.recyclings,e};var Nt=function(t){Object(r.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(l.a)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s))).blinkFor=0,t.id=0,t.onClick=function(t,e){},t.clickEmpty=function(t,e){},t}return n}(bt),Et=function t(e,n){var i=this;Object(l.a)(this,t),this.stacks=void 0,this.settings=void 0,this.hand=void 0,this.setOnClick=function(t,e,n){i.stacks.forEach((function(a,c){a.clickEmpty=function(e){return t(null,e,c)},a.stack.forEach((function(n,o){var r=n.isHidden&&o==a.stack.length-1?e:t;n.onClick=function(t){return r(Object(s.a)({},n),t,c)},n.canClick=function(){return!n.isHidden||i.canUncover(c,n)}})),n.setOnClick(a)}))},this.getStack=function(t){return i.stacks[t]},this.wouldAcceptHand=function(t){return i.canPutDown(i.getTop(t),i.hand,t)},this.putDownHand=function(t){return i.add(t,i.hand.putDown())},this.canPutDown=function(t,e,n){return t&&t.isHidden&&e.isFromCurrentSource(t)||i.accepts(n,e.currentCard())||!t&&e.isFromTableau(n)},this.accepts=function(t,e){var n=i.getTop(t);if(!n)return e&&"K"===e.face;if(n.isHidden)return!1;var s=Object(c.a)([].concat(vt));return s.indexOf(e.face)+1==s.indexOf(n.face)&&e.type.color!==n.type.color&&"A"!==n.face},this.getCard=function(t,e){for(var n=0;n<i.stacks[t].stack.length;n++)if(e&&e.equals(i.stacks[t].stack[n])&&e.isHidden===i.stacks[t].stack[n].isHidden)return i.stacks[t].stack[n];return!1},this.popWithFollowing=function(t,e){for(var n=0;n<i.stacks[e].stack.length;n++)if(t&&t.equals(i.stacks[e].stack[n])){var s=i.stacks[e].stack.splice(n,i.stacks[e].stack.length);return i.stackEntropy(e),s}return[]},this.deal=function(t,e){i.stacks[e].stack.push(t)},this.canUncover=function(t,e){return i.getTop(t).isHidden&&e&&e.equals(i.getTop(t))},this.uncover=function(t,e){var n=i.getTop(t);return!!i.canUncover(t,e)&&(n.isHidden=!1,i.stackEntropy(t),!0)},this.stackEntropy=function(t){for(var e=i.settings.interactionEntropy,n=1,s=i.getTop(t);e&&0!=e&&s;)s.causeEntropy(e),e--,s=i.getTop(t,n),n++},this.add=function(t,e){return i.stacks[t].stack=i.stacks[t].stack.concat(e.map((function(e){return i.setCardProperties(e,t)}))),i.stackEntropy(t),e},this.setCardProperties=function(t,e){return t.source=i.stacks[e].source,t},this.getTop=function(t,e){return i.stacks[t].stack[i.stacks[t].stack.length-1-(e||0)]},this.setEntropy=function(t){return i.stacks.forEach((function(e){return e.stack.forEach((function(e){return e.causeEntropy(Math.min(t,4))}))})),i};this.hand=n,this.stacks=[0,1,2,3,4,5,6].map((function(t){var e=new Nt("tableau-"+t,n);return e.stack=[],e.blinkFor=0,e.id=t,e})),this.settings=e};Et.copy=function(t,e){var n=new Et(t.settings,e);return n.stacks=t.stacks.map((function(t,n){var i=new Nt(t.source,e);return i.id=n,i.stack=ft.copyAll(t.stack),i})),n};var Pt=function(t){Object(r.a)(n,t);var e=Object(u.a)(n);function n(t,i){var a;return Object(l.a)(this,n),(a=e.call(this,"waste",i)).setOnClick=function(t){a.clickEmpty=function(e){return t(null,e)},a.stack.forEach((function(e,n){e.onClick=function(n){return t(Object(s.a)({},e),n)},e.canClick=function(){return n==a.stack.length-1}})),a.hand.setOnClick(Object(o.a)(a))},a.putDownHand=function(){return a.addAll(a.hand.putDown())},a.add=function(t){return t&&a.stack.push(a.setCardProperties(t))},a.addAll=function(t){return t&&t.length&&t.map(a.add)},a.setCardProperties=function(t){return t.source=a.source,t.isHidden=!1,t.causeEntropy(Math.min(a.settings.interactionEntropy,1)),t},a.wouldAcceptHand=function(){return a.hand.isFromWaste()&&a.canAdd(a.hand.currentCard())},a.canAdd=function(t){return t&&(!a.getTop()||!t.equals(a.getTop()))},a.popTop=function(t){return t&&t.equals(a.getTop())&&a.stack.pop()},a.recycle=function(){return a.stack.splice(0,a.stack.length)},a.setEntropy=function(t){return a.stack.forEach((function(e){return e.causeEntropy(Math.min(t,1))})),Object(o.a)(a)},a.settings=t,a.blinkFor=0,a.unblink=function(){},a}return n}(bt);Pt.copy=function(t,e){var n=new Pt(t.settings,e);return n.stack=ft.copyAll(t.stack),n};var Dt=function t(e){Object(l.a)(this,t),this.stock=void 0,this.waste=void 0,this.foundation=void 0,this.tableau=void 0,this.hand=void 0,this.game=void 0,this.settings=void 0,this.focus=void 0,this.player=void 0,this.stock=e.stock,this.waste=e.waste,this.foundation=e.foundation,this.tableau=e.tableau,this.hand=e.hand,this.game=e.game,this.settings=e.settings,this.focus=e.focus,this.player=e.player};Dt.getInitialState=function(t,e,n){var i=new Mt(t),s=new xt;return{stock:new St(Object(c.a)(e.cards),i),waste:new Pt(i,s),foundation:new mt(i,s),tableau:new Et(i,s),hand:s,game:new yt(i),settings:i,focus:new gt(i),player:n}},Dt.copy=function(t){var e=xt.copy(t.hand);return{stock:St.copy(t.stock),waste:Pt.copy(t.waste,e),foundation:mt.copy(t.foundation,e),tableau:Et.copy(t.tableau,e),hand:e,game:yt.copy(t.game),settings:Mt.copy(t.settings),focus:t.focus,player:t.player}};var Tt=function t(e){var n=this;Object(l.a)(this,t),this.model=void 0,this.currentIndex=void 0,this.rows=void 0,this.getZindex=function(t,e){for(var n=t.getClickable(),i=0;i<n.length;i++)if(ft.equals(e,n[i]))return i;return 0},this.update=function(t,e){for(var i=0;i<n.rows.length;i++)for(var s=n.rows[i],a=0;a<s.length;a++){var c=s[a];if(c&&c.source==t){var o=n.getZindex(c,e);return n.currentIndex={x:a,y:i,z:o},void n.finishNav()}}},this.valid=function(t){return t.x===n.currentIndex.x&&t.y===n.currentIndex.y&&t.z===n.currentIndex.z},this.moveLeft=function(t){return n.move(t,(function(){n.currentIndex.x--,-1==n.currentIndex.x&&(n.currentIndex.x=6)}))},this.moveRight=function(t){return n.move(t,(function(){n.currentIndex.x++,7==n.currentIndex.x&&(n.currentIndex.x=0)}))},this.move=function(t,e){n.valid(t)&&(e(),void 0==n.current()?n.move(n.currentIndex,e):(n.currentIndex.z=n.current().getClickable().length-1,n.finishNav()))},this.moveUp=function(t){n.valid(t)&&(n.current().getClickable().length&&n.currentIndex.z>0?(n.currentIndex.z--,n.finishNav()):n.toggleRow(!0))},this.moveDown=function(t){if(n.valid(t)){var e=n.current().getClickable();e.length&&n.currentIndex.z<e.length-1?(n.currentIndex.z++,n.finishNav()):n.toggleRow(!1)}},this.toggleRow=function(t){0==n.currentIndex.y?n.currentIndex.y=1:n.currentIndex.y=0;var e=n.current()?n.current().getClickable().length-1:0;n.currentIndex.z=t?e:0,void 0==n.current()?n.moveLeft(n.currentIndex):n.finishNav()},this.finishNav=function(){var t=n.current().getClickable();t&&t[n.currentIndex.z]?n.model.focus.setCard(t[n.currentIndex.z]):n.model.focus.setStack(n.current().source)},this.current=function(){return n.rows[n.currentIndex.y][n.currentIndex.x]},this.pressCurrent=function(){return n.model.focus.card&&n.model.focus.card.canClick()?n.model.focus.card.onClick({isKeyboard:!0}):n.model.focus.stack?n.current().clickEmpty({isKeyboard:!0}):function(t){t.navigator.finishNav(),t.game.timemachine.modified=!0}},this.model=e,this.currentIndex={x:0,y:0,z:0},this.rows=[[this.model.stock,this.model.waste,void 0].concat(Object(c.a)(this.model.foundation.stacks)),Object(c.a)(this.model.tableau.stacks)]},Ht=function t(){var e=this;Object(l.a)(this,t),this.blink=function(t){return(new ot).startBlink((function(t){return t.stock}),t)},this.dispatchPutDown=function(t,n,i){return e.blink(i,0)},this.dispatchPickup=function(t,n,i){return null!=t?e.moveToWaste(t,i):e.recycleWaste(t,i)},this.moveToWaste=function(t,e){return e.stock.isOnTop(t)&&e.waste.addAll(e.stock.popTop())&&e.game.registerMove("waste","stock")},this.recycleWaste=function(t,n){if(!n.stock.getTop())return!!n.waste.getTop()&&n.stock.canRecycle()&&n.stock.recycle(n.waste.recycle())&&n.game.registerRecycle()||e.blink(n,0)}},Ut=function t(){var e=this;Object(l.a)(this,t),this.blink=function(t){return(new ot).startBlink((function(t){return t.waste}),t)},this.dispatchPutDown=function(t,n,i){return i.waste.wouldAcceptHand()&&i.waste.putDownHand()&&i.game.registerMove("waste","waste")||e.blink(i,0)},this.dispatchPickup=function(t,n,i){return t&&i.hand.pickUp([i.waste.popTop(t)],"waste",n)&&i.game.registerPickup()||e.blink(i,0)}},Rt=function t(){var e=this;Object(l.a)(this,t),this.tableau=void 0,this.waste=void 0,this.evaluateOptions=function(t){e.disableAllSuggestions(t),t.settings.suggestionMode.key===Ct.NONE||e.getUncoverOptions(t)||e.getPutdownSuggestions(t)||t.hand.isHoldingCard()||e.getPickupOptions(t)&&t.settings.suggestionMode.key!=Ct.FULL||!t.stock.getTop()&&!t.stock.canRecycle()||t.settings.suggestionMode.key===Ct.SCORED||(t.stock.suggestion=!0)},this.getPutdownSuggestions=function(t,e){if(!t.hand.isHoldingCard()||t.settings.suggestionMode.key==Ct.NONE)return 0;var n=[];if(t.waste.wouldAcceptHand()&&(t.settings.suggestionMode.key===Ct.FULL||!t.hand.isFromWaste())){var i={target:"waste",source:t.hand.source};(t.settings.suggestionMode.key!==Ct.SCORED||t.game.rating.rateMove(i)>0)&&(n.push(i),t.waste.suggestion=!0)}return t.foundation.stacks.forEach((function(e,i){if(t.foundation.wouldAcceptHand(i)&&(t.settings.suggestionMode.key===Ct.FULL||!t.hand.isFromFoundation(i))){var s={target:e.source,source:t.hand.source};(t.settings.suggestionMode.key!==Ct.SCORED||t.game.rating.rateMove(s)>0)&&(n.push(s),e.suggestion=!0)}})),t.tableau.stacks.forEach((function(i,s){if(t.tableau.wouldAcceptHand(s)&&(t.settings.suggestionMode.key===Ct.FULL||!t.hand.isFromTableau(s))){var a=t.hand.isHoldingKing()&&0==i.stack.length&&t.hand.isFromAnyTableau()&&0==t.tableau.stacks[t.hand.getTableauIndex()].stack.length,c=i.stack.length>0&&t.hand.isFromAnyTableau()&&t.tableau.stacks[t.hand.getTableauIndex()].stack.length>0&&i.stack[i.stack.length-1].face==t.tableau.stacks[t.hand.getTableauIndex()].stack[t.tableau.stacks[t.hand.getTableauIndex()].stack.length-1].face&&!t.tableau.getTop(t.hand.getTableauIndex()).isHidden,o=!a&&!c;if(!e||t.settings.suggestionMode.key===Ct.FULL||o){var r={target:i.source,source:t.hand.source};(t.settings.suggestionMode.key!==Ct.SCORED||t.game.rating.rateMove(r)>0)&&(n.push(r),i.suggestion=!0)}}})),n.length},this.getPickupOptions=function(t){var n=!1,i=At.copy(t);return e.waste.dispatchPickup(i.waste.getTop(),null,i),i.game.timemachine.modified&&e.getPutdownSuggestions(i,!0)>(t.settings.suggestionMode.key==Ct.FULL?1:0)&&(t.waste.suggestion=!0,n=!0),t.tableau.stacks.forEach((function(i,s){return i.stack.map((function(t,e){return{cardIndex:e,card:t}})).filter((function(t){return!t.card.isHidden})).forEach((function(a){var c=a.card,o=a.cardIndex,r=At.copy(t);e.tableau.dispatchPickup(c,null,r,s),r.game.timemachine.modified&&e.getPutdownSuggestions(r,!0)>(t.settings.suggestionMode.key==Ct.FULL?1:0)&&(i.stack[o].suggestion=!0,n=!0)}))})),n},this.getUncoverOptions=function(t){if(!t.hand.isHoldingCard()){var e=t.tableau.stacks.map((function(t,e){return e})).filter((function(e){return t.tableau.getTop(e)&&t.tableau.getTop(e).isHidden}));return e.forEach((function(e){t.tableau.getTop(e).suggestion=!0})),e.length}return 0},this.disableAllSuggestions=function(t){var e=function t(e){e.suggestion=!1,e.stack&&e.stack.forEach(t),e.stacks&&e.stacks.forEach(t)};e(t.waste),e(t.stock),e(t.tableau),e(t.foundation)},this.tableau=new rt,this.waste=new Ut},At=function(t){Object(r.a)(n,t);var e=Object(u.a)(n);function n(t){var i;return Object(l.a)(this,n),(i=e.call(this,t)).suggestor=void 0,i.dealer=void 0,i.navigator=void 0,i.withSuggestions=function(){return i.suggestor.evaluateOptions(Object(o.a)(i)),Object(o.a)(i)},i.setEntropy=function(t){i.settings.baseEntropy=t,i.stock.setEntropy(t),i.waste.setEntropy(t),i.foundation.setEntropy(t),i.tableau.setEntropy(t)},i.withHandlers=function(){var t=function(t){return new dt(t).getHandler(i.hand)};return i.stock.setOnClick(t(new Ht)),i.waste.setOnClick(t(new Ut)),i.foundation.setOnClick(t(new ht)),i.tableau.setOnClick(t(new rt),t(new ut),i.hand),Object(o.a)(i)},i.suggestor=new Rt,i.dealer=new lt,i.navigator=new Tt(Object(o.a)(i)),i}return n}(Dt);At.getInitialState=function(t,e,n){return new At(Dt.getInitialState(t,e,n))},At.copy=function(t){return new At(Dt.copy(t))};var It=function(){var t=f.a.useContext(j),e=t.state,n=t.restart,s=f.a.useContext(P);return e.game.isEnded?Object(i.jsxs)("div",{className:"ui neutral endscreen",children:[Object(i.jsx)("div",{className:"title",children:"\ud83e\udd73"}),Object(i.jsxs)("div",{className:"content",children:[Object(i.jsxs)("div",{children:["Time: ",s.getElapsed()]}),Object(i.jsxs)("div",{children:["Points: ",e.game.rating.points]}),Object(i.jsxs)("div",{children:["Time Penalty: ",e.game.rating.getTimePenalty(e.game.started,e.game.end||Date.now())]}),Object(i.jsxs)("div",{children:["Bonus Points: ",e.game.rating.getBonusPoints(e.game.started,e.game.end||Date.now())]}),Object(i.jsxs)("div",{children:["Total Points: ",e.game.rating.getTotal(e.game.started,e.game.end||Date.now())]}),Object(i.jsx)("div",{children:Object(i.jsxs)("button",{onClick:n,children:["\ud83d\uddd1\ufe0f",Object(i.jsx)("div",{children:"New Game"})]})})]})]}):null},Lt=function(t){Object(r.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(l.a)(this,n),(s=e.call(this,t)).replaceContext=function(t){return s.setState(t)},s.updateContext=function(t){return s.replaceContext((function(e){return t(e),e}))},s.updateGameContext=function(t){return s.replaceContext((function(e){e.game.timemachine.modified=!1;var n=At.copy(e);return t(e),e.game.timemachine.modified?(e.game.timemachine.pushPreviousState(n),e):null}))},s.render=function(){var t={state:s.state.withHandlers().withSuggestions(),replaceContext:s.replaceContext,updateContext:s.updateContext,updateGameContext:s.updateGameContext,restart:s.props.restart};return Object(i.jsxs)(b,{value:t,children:[Object(i.jsx)(ct,{mode:s.props.settings.gameMode}),Object(i.jsx)(It,{})]})},s.state=At.getInitialState(t.settings,t.deck,t.player),s}return n}(f.a.Component),Ft=function(){function t(){Object(l.a)(this,t);var e=Object.keys(jt);this.cards=vt.map((function(t){return Object(c.a)(e.map((function(e){return new ft(t,jt[e],!0)})))})).flat().reverse()}return Object(H.a)(t,[{key:"shuffle",value:function(){return this.shuffleArray(this.cards),this}},{key:"shuffleArray",value:function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),i=[t[n],t[e]];t[e]=i[0],t[n]=i[1]}}},{key:"copy",value:function(){var e=new t;return e.cards=ft.copyAll(this.cards),e}}]),t}(),qt=[{id:0,settings:{drawMode:"single",recyclingMode:"infinite"},icon:"\ud83d\udc2d",lines:["Turn 1 card at once.","No limit on passes","through the deck."]},{id:1,settings:{drawMode:"single",recyclingMode:"3-pass"},icon:"\ud83d\udc39",lines:["Turn 1 card at once.","Three passes","through the deck."]},{id:2,settings:{drawMode:"single",recyclingMode:"1-pass"},icon:"\ud83d\udc30",lines:["Turn 1 card at once.","Only a single pass","through the deck."]},{id:3,settings:{drawMode:"triple",recyclingMode:"infinite"},icon:"\ud83d\udc28",lines:["Turn 3 cards at once","No limit on passes","through the deck"]},{id:4,settings:{drawMode:"triple",recyclingMode:"3-pass"},icon:"\ud83d\udc3c",lines:["Turn 3 cards at once.","Three passes","through the deck."]},{id:5,settings:{drawMode:"triple",recyclingMode:"1-pass"},icon:"\ud83d\udc3b",lines:["Turn 3 cards at once.","Only a single pass","through the deck."]}],Bt=f.a.createContext({state:{difficultySettings:0,ratingPreset:0,ratingSettings:{},entropySettings:{},quickDeal:!1,menu:{x:0,y:0},screen:{x:0,y:0},focus:"menu"},setState:function(){}}),zt=Bt.Provider,Gt=Bt,Kt=function(t){var e="";t.blink&&(e+=" blinking");var n=f.a.useContext(Gt).state;return t.y>0&&(e+=" indented"),n.menu.x==t.x&&n.menu.y==t.y&&"menu"==n.focus&&(e+=" highlight"),(t.active||t.toggled)&&(e+=" active"),Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("button",{className:e,title:t.title,onClick:t.onClick,children:[Object(i.jsx)("div",{className:"icon",children:t.icon}),Object(i.jsx)("div",{className:"label",children:t.title})]})})},Wt=function(t){return Object(i.jsx)("div",{className:"title",children:t.label})},Vt=function t(){Object(l.a)(this,t)};Vt.all=[{id:0,icon:"\ud83c\udf34",label:"Chill",settings:{timedMode:!1,missPenalty:!1,undoPenalty:!1,hintPenalty:!1}},{id:1,icon:"\u2696\ufe0f",label:"Regular",settings:{timedMode:!0,missPenalty:!1,undoPenalty:!0,hintPenalty:!1}},{id:2,icon:"\ud83c\udfc6",label:"Competitive",settings:{timedMode:!0,missPenalty:!0,undoPenalty:!0,hintPenalty:!0}}],Vt.matchPreset=function(t){var e=Vt.all.filter((function(e){return Vt.equals(e.settings,t)}));return e.length>0?e[0].id:-1},Vt.equals=function(t,e){return t.timedMode===e.timedMode&&t.missPenalty===e.missPenalty&&t.undoPenalty===e.undoPenalty&&t.hintPenalty===e.hintPenalty};var Yt=function(t){return Object(i.jsxs)("div",{className:"controls startdetails",children:[Object(i.jsxs)("div",{className:"title",children:[t.head,": Controls"]}),Object(i.jsxs)("div",{className:"content center",children:[Object(i.jsx)("div",{className:"left",children:Object(i.jsx)("div",{className:"title",children:"Player 1"})}),Object(i.jsx)("div",{className:"right",children:Object(i.jsx)("div",{className:"title",children:"Player 2"})})]})]})},Qt=function t(e,n,i,s){Object(l.a)(this,t),this.icon=void 0,this.lines=void 0,this.id=void 0,this.model=void 0,this.id=e,this.icon=n,this.lines=i,this.model=s},Xt=function t(e){Object(l.a)(this,t),this.buttons=void 0,this.buttons=e},Jt=function(t){return new Qt(t.id,t.icon,t.lines,t)},Zt=function(){return[new Xt(qt.slice(0,3).map(Jt)),new Xt(qt.slice(3).map(Jt))]},_t=function(t){var e=f.a.useContext(Gt),n=e.state,a=e.setState,c=function(t,e,i){var s="screen"==n.focus&&n.screen.x==i&&n.screen.y==e,a=n.difficultySettings==t?"active active-".concat(t):"inactive-".concat(t);return a+=s?" focused":""};return Object(i.jsxs)("div",{className:"quickstart startdetails",children:[Object(i.jsxs)("div",{className:"title",children:[t.head,": Difficulty"]}),Object(i.jsx)("div",{className:"content center",children:Zt().map((function(t,e){return Object(i.jsx)("div",{children:t.buttons.map((function(t,o){return Object(i.jsxs)("button",{className:c(t.id,e,o),onClick:function(){return e=t.id,a(Object(s.a)(Object(s.a)({},n),{},{difficultySettings:e}));var e},children:[t.icon,t.lines.map((function(t,e){return Object(i.jsx)("div",{children:t},e)}))]},t.id)}))},e)}))})]})},$t=function(t){return[{entropy:2,quickDeal:!1,lines:[(t.quickDeal?"Optimize":"Optimized")+" for Desktop","with Mouse Support"],icon:"\ud83d\udda5\ufe0f"},{entropy:1,quickDeal:!0,lines:[(t.quickDeal?"Optimized":"Optimize")+" for Mobile","with Touch Support"],icon:"\ud83d\udcf1"}]},te=function(t){return[new Xt($t(t).map((function(t){return new Qt(t.entropy,t.icon,t.lines,t)})))]},ee=function(t){var e=f.a.useContext(Gt),n=e.state,c=e.setState,o=f.a.useState(!1),r=Object(a.a)(o,2),u=r[0],l=r[1],d=function(t,e,i){var s="screen"==n.focus&&n.screen.x==i&&n.screen.y==e,a=n.quickDeal==t.model.quickDeal?"active active-0":"inactive-0";return a+=s?" focused":""};return Object(i.jsxs)("div",{className:"ui quickstart startdetails",children:[Object(i.jsx)("div",{className:"closer",children:Object(i.jsx)("button",{onClick:function(){return l(!u)},children:u?"\ud83d\uddd9":"\u2630"})}),Object(i.jsxs)("div",{className:"title",children:[t.head,": Settings"]}),u?Object(i.jsxs)("div",{className:"content",children:[Object(i.jsxs)("div",{className:"section",children:[Object(i.jsx)("div",{className:"title",children:"Base Entropy"}),Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"label",children:"How much chaos will the stacks on the board contain by themselves?"}),Object(i.jsx)("select",{onChange:function(t){return e=t.target.value,void c(Object(s.a)(Object(s.a)({},n),{},{entropySettings:Object(s.a)(Object(s.a)({},n.entropySettings),{},{baseEntropy:parseInt(e)})}));var e},value:n.entropySettings.baseEntropy,children:_.map((function(t,e){return Object(i.jsx)("option",{value:e,children:t},t)}))})]})]}),Object(i.jsxs)("div",{className:"section",children:[Object(i.jsx)("div",{className:"title",children:"Interaction Entropy"}),Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"label",children:"How much chaos will each interaction add to a stack on the board?"}),Object(i.jsx)("select",{onChange:function(t){return e=t.target.value,void c(Object(s.a)(Object(s.a)({},n),{},{entropySettings:Object(s.a)(Object(s.a)({},n.entropySettings),{},{interactionEntropy:parseInt(e)})}));var e},value:n.entropySettings.interactionEntropy,children:_.map((function(t,e){return Object(i.jsx)("option",{value:e,children:t},t)}))})]})]}),Object(i.jsxs)("div",{className:"section",children:[Object(i.jsx)("div",{className:"title",children:"Instant Deal"}),Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"label",children:"Should the deal animation at the beginning of the game be skipped?"}),Object(i.jsxs)("select",{onChange:function(t){return e=t.target.value,void c(Object(s.a)(Object(s.a)({},n),{},{quickDeal:!!parseInt(e)}));var e},value:n.quickDeal?"1":"0",children:[Object(i.jsx)("option",{value:"1",children:"Yes"},0),Object(i.jsx)("option",{value:"0",children:"No"},1)]})]})]})]}):Object(i.jsx)("div",{className:"content center",children:te(n).map((function(t,e){return Object(i.jsx)("div",{children:t.buttons.map((function(t,a){return Object(i.jsxs)("button",{disabled:n.quickDeal==t.model.quickDeal,className:d(t,e,a),onClick:function(){return c(Object(s.a)(Object(s.a)({},n),{},{quickDeal:t.model.quickDeal,entropySettings:{baseEntropy:t.model.entropy,interactionEntropy:t.model.entropy}}))},children:[t.icon,t.lines.map((function(t,e){return Object(i.jsx)("div",{children:t},e)}))]},t.id)}))},e)}))})]})},ne=function(){return[new Xt(Vt.all.map((function(t){return new Qt(t.id,t.icon,[t.label],t)})))]},ie=function(t){var e=f.a.useContext(Gt),n=e.state,c=e.setState,o=f.a.useState(!1),r=Object(a.a)(o,2),u=r[0],l=r[1],d=function(t,e,i){var s="screen"==n.focus&&n.screen.x==i&&n.screen.y==e,a=n.ratingPreset==t?"active active-".concat(t):"inactive-".concat(t);return a+=s?" focused":""},h=function(t){var e=Object(s.a)({},n);t(e.ratingSettings),e.ratingPreset=Vt.matchPreset(e.ratingSettings),c(e)};return Object(i.jsxs)("div",{className:"ui rating startdetails quickstart",children:[Object(i.jsx)("div",{className:"closer",children:Object(i.jsx)("button",{onClick:function(){return l(!u)},children:u?"\ud83d\uddd9":"\u2630"})}),Object(i.jsxs)("div",{className:"title",children:[t.head,": Rating"]}),u?Object(i.jsxs)("div",{className:"content",children:[Object(i.jsxs)("div",{className:"section",children:[Object(i.jsx)("div",{className:"title",children:"Undo Penalty"}),Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"label",children:"Should there be a penalty for the UNDO operation? This penalty increases exponentially."}),Object(i.jsxs)("select",{onChange:function(t){return e=t.target.value,h((function(t){return t.undoPenalty="true"==e}));var e},value:String(!!n.ratingSettings.undoPenalty),children:[Object(i.jsx)("option",{value:"true",children:"yes"}),Object(i.jsx)("option",{value:"false",children:"no"})]})]})]}),Object(i.jsxs)("div",{className:"section",children:[Object(i.jsx)("div",{className:"title",children:"Time Rating"}),Object(i.jsxs)("div",{className:"row",children:[Object(i.jsxs)("div",{className:"label",children:["Should the performance be part of the final rating, according to the rules described"," ",Object(i.jsx)("a",{href:"https://en.wikipedia.org/wiki/Klondike_(solitaire)#Scoring",rel:"noreferrer",target:"_blank",children:"here"}),"?"]}),Object(i.jsxs)("select",{onChange:function(t){return e=t.target.value,h((function(t){return t.timedMode="true"==e}));var e},value:String(!!n.ratingSettings.timedMode),children:[Object(i.jsx)("option",{value:"true",children:"yes"}),Object(i.jsx)("option",{value:"false",children:"no"})]})]})]}),Object(i.jsxs)("div",{className:"section",children:[Object(i.jsx)("div",{className:"title",children:"Hint Penalty"}),Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"label",children:"Should there be a penalty for the HINT operation? This penalty does not increase."}),Object(i.jsxs)("select",{onChange:function(t){return e=t.target.value,h((function(t){return t.hintPenalty="true"==e}));var e},value:String(!!n.ratingSettings.hintPenalty),children:[Object(i.jsx)("option",{value:"true",children:"yes"}),Object(i.jsx)("option",{value:"false",children:"no"})]})]})]}),Object(i.jsxs)("div",{className:"section",children:[Object(i.jsx)("div",{className:"title",children:"Miss Penalty"}),Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"label",children:"Should there be a penalty for attempting to perform invalid actions?"}),Object(i.jsxs)("select",{onChange:function(t){return e=t.target.value,h((function(t){return t.missPenalty="true"==e}));var e},value:String(!!n.ratingSettings.missPenalty),children:[Object(i.jsx)("option",{value:"true",children:"yes"}),Object(i.jsx)("option",{value:"false",children:"no"})]})]})]})]}):Object(i.jsx)("div",{className:"content center",children:ne().map((function(t,e){return Object(i.jsx)("div",{children:t.buttons.map((function(t,a){return Object(i.jsxs)("button",{className:d(t.id,e,a),onClick:function(){return e=t.id,c(Object(s.a)(Object(s.a)({},n),{},{ratingSettings:Object(s.a)({},Vt.all[e].settings),ratingPreset:e}));var e},children:[t.icon,Object(i.jsx)("div",{children:t.lines[0]})]},t.id)}))},e)}))})]})},se=function(t){return t.screen?Object(i.jsx)("div",{className:"startscreen-layout",children:Object(i.jsx)("div",{className:"startscreen-jail",children:function(){switch(t.screen){case"rating":return Object(i.jsx)(ie,{head:t.mainMenu.title});case"difficulty":return Object(i.jsx)(_t,{head:t.mainMenu.title});case"settings":return Object(i.jsx)(ee,{head:t.mainMenu.title});case"controls":return Object(i.jsx)(Yt,{head:t.mainMenu.title});default:return null}}()})}):null},ae=function(){try{var t=" -webkit- -moz- -o- -ms- ".split(" ");return"ontouchstart"in window||"undefined"!==typeof window.DocumentTouch&&document instanceof window.DocumentTouch||(e=["(",t.join("touch-enabled),("),"heartz",")"].join(""),window.matchMedia(e).matches)}catch(n){return console.error("(Touch detect failed)",n),!1}var e},ce=function(t){return Object(i.jsx)("div",{className:"ui menu",children:t.children})},oe=function t(){Object(l.a)(this,t),this.isRoot=void 0,this.id=void 0,this.active=void 0,this.icon=void 0,this.title=void 0,this.onClick=void 0,this.blink=void 0,this.toggled=void 0,this.children=void 0,this.x=void 0,this.y=void 0,this.isRoot=!1,this.id="not null",this.active=!1,this.icon="",this.title="",this.onClick=function(){},this.blink=!1,this.toggled=!1,this.children=[],this.x=0,this.y=0},re=function(t){Object(r.a)(n,t);var e=Object(u.a)(n);function n(t,i,s){var a;return Object(l.a)(this,n),(a=e.call(this)).updateMap=function(t,e){a.x=t,a.y=e},a.getClickable=function(){return[Object(o.a)(a)]},a.id=t,a.icon=i,a.title=s,a}return n}(oe),ue=function(t){Object(r.a)(n,t);var e=Object(u.a)(n);function n(t){var i;return Object(l.a)(this,n),(i=e.call(this)).children=void 0,i.toggled=void 0,i.updateMap=function(t,e){i.x=t,i.y=e,i.children.forEach((function(e,n){return e.updateMap(t,n+1)}))},i.getClickable=function(){return i.toggled?[Object(o.a)(i)].concat(Object(c.a)(i.children.map((function(t){return t.getClickable()})))).flat():[Object(o.a)(i)]},i.children=t,i.toggled=!1,i}return n}(oe),le=function(t){Object(r.a)(n,t);var e=Object(u.a)(n);function n(t,i,s,a,c,o,r){var u;return Object(l.a)(this,n),(u=e.call(this,r)).gameMode=void 0,u.moveDown=function(t,e,n){return u.children.length>e?{x:t,y:e+1}:{x:n,y:0}},u.moveUp=function(t,e,n){return e>1?{x:t,y:e-1}:{x:n,y:0}},u.id=t,u.icon=i,u.title=s,u.gameMode=a,u.onClick=function(){return o(a)},u.toggled=a.key==c,u}return n}(ue),de=function(t){Object(r.a)(n,t);var e=Object(u.a)(n);function n(t,i,s,a,c){var o;return Object(l.a)(this,n),(o=e.call(this,t,i,s)).active=t==a,o.onClick=function(){return c(o.id)},o}return n}(re),he=function(t){Object(r.a)(n,t);var e=Object(u.a)(n);function n(t,i){var s;return Object(l.a)(this,n),(s=e.call(this,i)).escape=void 0,s.getClickable=function(){return Object(c.a)(s.children.map((function(t){return t.getClickable()}))).flat()},s.withMap=function(){return s.children.forEach((function(t,e){return t.updateMap(e,0)})),Object(o.a)(s)},s.moveRight=function(){throw new Error("cant go right")},s.moveLeft=function(t,e){return{x:t,y:e}},s.moveDown=function(t,e){var n=s.children[t];if(e>0){var i=s.children.length-1==t?0:t+1;return n.moveDown(t,e,i)}return n.getClickable().length>1?{x:t,y:e+1}:s.children.length>t+1?{x:t+1,y:0}:{x:0,y:0}},s.moveUp=function(t,e){var n=s.children[t];if(e>0){var i=0==t?s.children.length:t;return n.moveUp(t,e,i)}var a=0==t?s.children.length-1:t-1;return{x:a,y:s.children[a].getClickable().length-1}},s.action=function(t,e){var n=s.children[t];e>0?n.children[e-1].onClick():n.onClick()},s.isRoot=!0,s.children=i,s.escape=t,s}return n}(ue),fe=function t(e,n,i){var s=this;Object(l.a)(this,t),this.escape=void 0,this.screen=void 0,this.state=void 0,this.getRows=function(){return"rating"==s.screen?ne():"settings"==s.screen?te(s.state):"difficulty"==s.screen?Zt():[]},this.getRow=function(t){return s.getRows()[t]},this.moveUp=function(t,e){var n=s.getRows();return console.debug(n,t,e),n.length<2?{x:t,y:e}:0==e?{x:t,y:n.length-1}:{x:t,y:e-1}},this.moveDown=function(t,e){var n=s.getRows();return console.debug(n,t,e),n.length<2?{x:t,y:e}:e==n.length-1?{x:t,y:0}:{x:t,y:e+1}},this.moveLeft=function(t,e){var n=s.getRow(e);if(console.debug(n,t,e),0==t)throw new Error("cant go left");return{x:t-1,y:e}},this.moveRight=function(t,e){var n=s.getRow(e);return console.debug(n,t,e),t==n.buttons.length-1?{x:0,y:e}:{x:t+1,y:e}},this.action=function(){},this.escape=e,this.screen=n,this.state=i},ge=function(t){Object(r.a)(n,t);var e=Object(u.a)(n);function n(t,i){var s;return Object(l.a)(this,n),(s=e.call(this,"start","\ud83c\udfb2",n.getTitle(t))).blink=!0,s.onClick=i,s}return n}(re);ge.getTitle=function(t){return t.key==d.CUSTOM.key?"Start Custom":t.key==d.VERSUS.key?"Start Versus":"Quick Start"};var pe=function(){var t=f.a.useState(0),e=Object(a.a)(t,2),n=e[0],c=e[1],o=f.a.useState(!1),r=Object(a.a)(o,2),u={gameMode:"singleplayer",inputMode:"mouse",paused:r[0],setPaused:r[1],initialized:!1},l=f.a.useState(u),h=Object(a.a)(l,2),g=h[0],p=h[1],b=f.a.useState(d.QUICK),j=Object(a.a)(b,2),v=j[0],m=j[1],O=function(t){v.key!==t.key?(m(t),t.autoConfig||M("rating")):(m(d.QUICK),M(""))},x=f.a.useState(""),w=Object(a.a)(x,2),C=w[0],M=w[1],S=f.a.useState({ratingSettings:Object(s.a)({},Vt.all[1].settings),difficultySettings:1,ratingPreset:1,quickDeal:ae(),entropySettings:{baseEntropy:ae()?1:2,interactionEntropy:ae()?1:2},menu:{x:0,y:0},screen:{x:0,y:0},focus:"menu"}),N=Object(a.a)(S,2),P=N[0],D=N[1],T=function(){p(u)},H=(new Ft).shuffle(),U=function(){H.shuffle();var t=Object(s.a)(Object(s.a)(Object(s.a)(Object(s.a)(Object(s.a)({},g),qt[P.difficultySettings].settings),P.ratingSettings),P.entropySettings),{},{quickDeal:P.quickDeal,gameMode:v.boardMode,initialized:!0});p(t),c(Date.now())};if(g.initialized){var R=null;return"singleplayer"==v.boardMode&&(R=Object(i.jsx)("div",{className:"game-layout-container singleplayer",children:Object(i.jsx)(Lt,{player:"1",settings:g,restart:T,deck:H})})),"splitscreen"==v.boardMode&&(R=Object(i.jsxs)("div",{className:"game-layout-container splitscreen",children:[Object(i.jsx)(Lt,{player:"1",settings:Object(s.a)(Object(s.a)({},g),{},{inputMode:"gamepad"}),restart:T,deck:H.copy()}),Object(i.jsx)(Lt,{player:"2",settings:Object(s.a)(Object(s.a)({},g),{},{inputMode:"keyboard"}),restart:T,deck:H.copy()})]})),Object(i.jsx)(E,{started:n,children:R})}var A=function(){C&&D(Object(s.a)(Object(s.a)({},P),{},{focus:"screen"}))},I=function(){D(Object(s.a)(Object(s.a)({},P),{},{focus:"menu"}))},L=function(){return"menu"==P.focus?V():new fe(I,C,P)},F=function(t){"menu"==P.focus&&D(Object(s.a)(Object(s.a)({},P),{},{menu:t})),"screen"==P.focus&&D(Object(s.a)(Object(s.a)({},P),{},{screen:t,currentButton:new fe(I,C,P).getRows()[P.screen.y].buttons[P.screen.x]}))},q=function(){return"menu"==P.focus?P.menu:P.screen},B=function(){var t=L().moveUp(q().x,q().y);F(t)},z=function(){var t=L().moveDown(q().x,q().y);F(t)},G=function(){try{var t=L().moveLeft(q().x,q().y);F(t)}catch(e){L().escape()}},K=function(){try{var t=L().moveRight(q().x,q().y);F(t)}catch(e){L().escape(),console.error(e)}},W=function(){L().action(q().x,q().y)},V=function(){return new he(A,[new ge(v,U),new le("custom","\u2699\ufe0f","Custom Game",d.CUSTOM,v.key,O,[new de("rating","\ud83c\udfb2","Rating",C,M),new de("difficulty","\ud83d\udcaa","Difficulty",C,M),new de("settings","\ud83d\udd27","Settings",C,M)]),new le("versus","\ud83c\udfc6","Versus",d.VERSUS,v.key,O,[new de("rating","\ud83c\udfb2","Rating",C,M),new de("difficulty","\ud83d\udcaa","Difficulty",C,M),new de("settings","\ud83d\udd27","Settings",C,M),new de("controls","\ud83c\udfae","Controls",C,M)])]).withMap()},Y=function(t){return Object(i.jsx)(i.Fragment,{children:t.buttons.map((function(t){return Object(i.jsx)(Kt,{x:t.x,y:t.y,active:t.active,onClick:t.onClick,icon:t.icon,title:t.title,toggled:t.toggled,blink:t.blink},t.x+"-"+t.y)}))})};return Object(i.jsxs)(zt,{value:{state:P,setState:D},children:[Object(i.jsxs)(ce,{children:[Object(i.jsx)(Wt,{label:"Solitaire"}),Object(i.jsx)(Y,{buttons:V().getClickable()})]}),Object(i.jsx)(se,{screen:C,mainMenu:v}),Object(i.jsx)(y,{onUp:B,onDown:z,onRight:K,onLeft:G,onAction:W}),Object(i.jsx)(k,{onUp:B,onDown:z,onRight:K,onLeft:G,onAction:W})]})},be=n(16);n.n(be).a.render(Object(i.jsx)(f.a.StrictMode,{children:Object(i.jsx)(pe,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.0a0c1937.chunk.js.map