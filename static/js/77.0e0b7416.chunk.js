"use strict";(self.webpackChunksolitaire_react=self.webpackChunksolitaire_react||[]).push([[77],{9946:function(t,n,e){e.r(n),e.d(n,{default:function(){return hn}});var s=e(8683),i=e(3718),a=e(3144),r=e(5671),o=e(9340),c=e(8347),u=(e(2542),e(577)),l=e(885),d=e(2982),f=(0,a.Z)((function t(){var n=this;(0,r.Z)(this,t),this.startBlink=function(t,e){t(e).blinkFor<10&&(t(e).blinkFor=10,e.game.registerBlink(!0),t(e).unblink=function(e){return n.stopBlink(t,e)})},this.stopBlink=function(t,n){t(n).blinkFor=0,n.game.registerBlink(!1)}})),g=(0,a.Z)((function t(){var n=this;(0,r.Z)(this,t),this.blink=function(t,n){return(new f).startBlink((function(t){return t.tableau.stacks[n]}),t)},this.dispatchPutDown=function(t,e,s,i){if(s.tableau.wouldAcceptHand(i)){var a=s.hand.source;s.tableau.putDownHand(i)&&s.game.registerMove("tableau-"+i,a,s.tableau.getTop(i))}else n.blink(s,i)},this.dispatchPickup=function(t,e,s,i){t?s.hand.pickUp(s.tableau.popWithFollowing(t,i),t.source,e)&&s.game.registerPickup():t||n.blink(s,i)}})),h=function(t){(0,o.Z)(e,t);var n=(0,c.Z)(e);function e(){var t;(0,r.Z)(this,e);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return(t=n.call.apply(n,[this].concat(i))).dispatchPickup=function(n,e,s,i){n&&t.tryUncover(n,i,s)},t.tryUncover=function(t,n,e){return!e.hand.isHoldingCard()&&t.isHidden&&e.tableau.uncover(n,t)&&e.game.registerUncover(e.tableau.getTop(n))},t}return(0,a.Z)(e)}(g),p=(0,a.Z)((function t(){var n=this;(0,r.Z)(this,t),this.dealt=void 0,this.dealingAt=void 0,this.isDealt=void 0,this.dealOne=function(t,n){return function(e){return t!==e.dealer.dealt?null:(e.dealer.deal(e.stock,e.tableau),e.dealer.isDealt||n(e.dealer.dealt),e)}},this.dealAll=function(){return function(t){if(n.dealt!==t.dealer.dealt)return null;for(;!t.dealer.isDealt;)t.dealer.deal(t.stock,t.tableau);return t}},this.deal=function(t,e){for(var s=n.dealingAt;s<e.stacks.length;s++){var i=e.stacks[s].stack;if(i.length<=e.stacks.length-s-1){var a=t.popOne();return void(a&&(a.source=e.stacks[s].source,i.length===e.stacks.length-1-s&&(a.isHidden=!1),e.deal(a,s),n.dealt++,n.dealingAt++,n.dealingAt===e.stacks.length&&(n.dealingAt=0),n.isDealt=!1))}var r=0===n.dealingAt;return n.dealingAt=0,void(n.isDealt=r)}n.isDealt=!0},this.dealt=0,this.dealingAt=0,this.isDealt=!1})),v=(0,a.Z)((function t(n){var e=this;(0,r.Z)(this,t),this.clickHandler=void 0,this.getHandler=function(t){return t&&t.isHoldingCard()?e.dispatchPutDown:e.dispatchPickup},this.dispatchPutDown=function(t,n,s){return function(i){i.hand.isHoldingCard()&&e.clickHandler.dispatchPutDown(t,n,i,s)}},this.dispatchPickup=function(t,n,s){return function(i){i.hand.isHoldingCard()||e.clickHandler.dispatchPickup(t,n,i,s)}},this.clickHandler=n})),k=e(3680),m=(0,a.Z)((function t(n){var e=this;(0,r.Z)(this,t),this.settings=void 0,this.card=void 0,this.stack=void 0,this.keyboard=void 0,this.validSettings=function(){return"mouse"!==e.settings.launchSettings.inputMode},this.isKeyBoard=function(t){e.keyboard=t},this.setCard=function(t){e.card=t,e.stack=""},this.unsetCard=function(t){e.card&&t&&k.Z.equals(e.card,t)&&(e.card=null)},this.unsetStack=function(t){e.stack&&t&&e.stack===t&&(e.stack="")},this.setStack=function(t){e.card=null,e.stack=t},this.hasCard=function(t){return e.keyboard&&e.validSettings()&&!!e.card&&!!t&&k.Z.equals(e.card,t)},this.hasStack=function(t){return e.keyboard&&e.validSettings()&&e.stack&&t&&e.stack===t},this.settings=n,this.card=null,this.stack="",this.keyboard=!1})),y=e(7326),x=(0,a.Z)((function t(n){var e=this;(0,r.Z)(this,t),this.source=void 0,this.suggestion=!1,this.stack=[],this.getTop=function(){return e.stack&&e.stack.length&&e.stack[e.stack.length-1]||null},this.getClickable=function(){return e.stack.filter((function(t){return t.canClick()}))},this.blinkFor=0,this.onClick=function(t){return function(t){}},this.clickEmpty=function(t){return function(t){}},this.unblink=function(){},this.accepts=void 0,this.source=n})),Z=function(t){(0,o.Z)(e,t);var n=(0,c.Z)(e);function e(t,s){var i;return(0,r.Z)(this,e),(i=n.call(this,t)).hand=void 0,i.getHandContent=function(){return i.hand.source===i.source?i.hand.stack:[]},i.getClickable=function(){return[].concat((0,d.Z)(i.stack.filter((function(t){return t.canClick()}))),(0,d.Z)(i.getHandContent().filter((function(t){return t.canClick()}))))},i.hand=s,i}return(0,a.Z)(e)}(x),b=e(9093),C=function(t){(0,o.Z)(e,t);var n=(0,c.Z)(e);function e(t,i,a){var o;return(0,r.Z)(this,e),(o=n.call(this,t,i)).acceptedCards=[],o.usedCards=[],o.icon="",o.color="",o.getCurrentAccepted=function(){return o.acceptedCards[o.acceptedCards.length-1]},o.accepts=function(t){if(!t)return!1;var n=o.getCurrentAccepted();return o.icon===t.type.icon&&n===t.face},o.setOnClick=function(t,n){o.clickEmpty=function(n){return t(null,n)};var e=o.source===n.source?[].concat((0,d.Z)(o.stack),(0,d.Z)(n.stack)):o.stack;e.forEach((function(n,i){n.onClick=function(e){return t((0,s.Z)({},n),e)},n.canClick=function(){return i===e.length-1}})),o.hand.setOnClick((0,y.Z)(o))},o.acceptedCards=(0,d.Z)((0,b.qW)()),o.usedCards=[],o.icon=a.icon,o.color=a.color,o}return(0,a.Z)(e)}(Z),w=(0,a.Z)((function t(n,e,s){(0,r.Z)(this,t),this.stacks=void 0,this.settings=void 0,this.hand=void 0,this.stacks=s,this.settings=n,this.hand=e})),S=e(7909),j=function(t){(0,o.Z)(e,t);var n=(0,c.Z)(e);function e(t,s){var i;return(0,r.Z)(this,e),(i=n.call(this,t,s,(0,d.Z)(Object.keys(S.Z).map((function(t){return S.Z[t]})).map((function(t,n){return new C("foundation-"+n,s,t)}))))).setOnClick=function(t){i.stacks.forEach((function(n,e){n.setOnClick((function(n,s){return t(n,s,e)}),i.hand)}))},i.getCurrentAccepted=function(t){return i.stacks[t].getCurrentAccepted()},i.wouldAcceptHand=function(t){return!i.hand.hasMoreThanOneCard()&&i.accepts(t,i.hand.currentCard())},i.putDownHand=function(t){return i.add(t,i.hand.putDown())},i.accepts=function(t,n){return i.stacks[t].accepts(n)},i.add=function(t,n){var e=n[0];return e.causeEntropy(Math.min(i.settings.interactionEntropy,3)),e.source=i.stacks[t].source,i.stacks[t].stack.push(e),i.stacks[t].usedCards.push(i.stacks[t].acceptedCards.pop())},i.remove=function(t,n){return i.stacks[t].acceptedCards.push(i.stacks[t].usedCards.pop()),n&&n.equals(i.getTop(t))&&i.stacks[t].stack.pop()||null},i.getPreviousUsed=function(t){return(0,d.Z)(i.stacks[t].usedCards).pop()},i.countCards=function(){return i.stacks.map((function(t){return t.stack.length})).reduce((function(t,n){return t+n}),0)},i.getTop=function(t){return i.stacks[t].stack[i.stacks[t].stack.length-1]},i.setEntropy=function(t){return i.stacks.forEach((function(n){return n.stack.forEach((function(n){return n.causeEntropy(Math.min(3,t))}))})),(0,y.Z)(i)},i}return(0,a.Z)(e)}(w);j.copy=function(t,n){var e=new j(t.settings,n);return e.stacks=t.stacks.map((function(t){var e=new C(t.source,n,t);return e.stack=k.Z.copyAll(t.stack),e.acceptedCards=(0,d.Z)(t.acceptedCards),e.usedCards=(0,d.Z)(t.usedCards),e.icon=t.icon,e.color=t.color,e})),e};var E=(0,a.Z)((function t(){var n=this;(0,r.Z)(this,t),this.blink=function(t,n){return(new f).startBlink((function(t){return t.foundation.stacks[n]}),t)},this.dispatchPutDown=function(t,e,s,i){if(s.foundation.wouldAcceptHand(i)){var a=s.hand.source;s.foundation.putDownHand(i)&&s.game.registerMove("foundation-"+i,a,s.foundation.getTop(i))}else n.blink(s,i)},this.dispatchPickup=function(t,e,s,i){var a=s.foundation.getTop(i);a&&s.foundation.getPreviousUsed(i)===a.face?s.hand.pickUp([s.foundation.remove(i,a)],a.source,e)&&s.game.registerPickup():n.blink(s,i)}})),M=function(){function t(n){var e=this;(0,r.Z)(this,t),this.settings=void 0,this.points=void 0,this.multiplicator=void 0,this.ratings=void 0,this.applyRating=function(t,n){console.debug("RATING:",n),e.ratings.push({points:t,text:n})},this.registerMove=function(t,n,s){e.registerHint(e.settings.disableHint());var i={source:n,target:t};e.points+=e.rateMove(i,s)},this.registerRecycle=function(){if(e.registerHint(e.settings.disableHint()),"single"===e.settings.launchSettings.drawMode&&"infinite"===e.settings.launchSettings.recyclingMode&&e.points>0){var t=0;e.points<100?(t=-1*e.points,e.points=0):(e.points-=100,t=-100),e.applyRating(t,"subtract ".concat(t," (max 100 points) for RECYCLE"))}},this.registerUncover=function(t){e.registerHint(e.settings.disableHint()),t&&t.setSuccess(5),e.points+=5,e.applyRating(5,"add 5 points for UNCOVER")},this.penalize=function(t){if(e.settings.launchSettings.undoPenalty){var n=Math.pow(2,t.multiplicator);e.applyRating(-1*n,"applying penalty of ".concat(n," points for UNDO")),e.points=Math.min(e.points,t.points)-n,e.multiplicator=t.multiplicator+1}},this.registerHint=function(t){t&&e.settings.launchSettings.hintPenalty&&(e.points-=10,e.applyRating(-10,"applying penalty of 10 points for HINT"))},this.getTimePenalty=function(t,n){var e=(n-t)/1e3;return-2*Math.trunc(e/5)},this.getBonusPoints=function(t,n){var e=(n-t)/1e3;return e<30?0:Math.round(2e4/e*35)},this.getTotal=function(t,n){return e.points+e.getBonusPoints(t,n)-e.getTimePenalty(t,n)},this.settings=n,this.points=0,this.multiplicator=1,this.ratings=[]}return(0,a.Z)(t,[{key:"registerBlink",value:function(t){t&&this.settings.launchSettings.missPenalty&&(this.points-=10,this.applyRating(-10,"subtract 10 points for invalid action"))}},{key:"rateMove",value:function(t,n){var e=function(t){return"tableau"===t.substr(0,7)},s=function(t){return"foundation"===t.substr(0,10)};if(e(t.source)){if(s(t.target))return this.applyRating(10,"add 10 points for MOVE tableau -> foundation"),n&&n.setSuccess(10),10}else if("waste"===t.source){if(s(t.target))return this.applyRating(10,"add 10 points for MOVE waste -> foundation"),n&&n.setSuccess(10),10;if(e(t.target))return this.applyRating(5,"add 5 points for MOVE waste -> tableau"),n&&n.setSuccess(5),5}else if(s(t.source)&&e(t.target))return this.applyRating(-15,"subtract 15 points for MOVE foundation -> tableau"),-15;return 0}}]),t}();M.copy=function(t){var n=new M(t.settings);return n.points=t.points,n.multiplicator=t.multiplicator,n.ratings=(0,d.Z)(t.ratings),n};var T=function(){function t(){var n=this;(0,r.Z)(this,t),this.previousStates=void 0,this.memorable=void 0,this.modified=void 0,this.registerMove=function(t,e){n.memorable=!0,n.modified=!0,e===t&&(n.memorable=!1)},this.pushPreviousState=function(t){var e=n.previousStates[n.previousStates.length-1];e&&n.modelEquals(t,e)||n.previousStates.push(t)},this.registerPickup=function(){n.modified=!0,n.memorable=!1},this.popPreviousState=function(t,e){for(var s=n.previousStates.length-1===t,i=function(){return s&&n.previousStates&&n.previousStates.pop()},a=i();a&&(!a.game.timemachine.memorable||n.modelEquals(a,e))&&n.previousStates.length;)a=i();return a},this.registerRecycle=function(){n.memorable=!0,n.modified=!0},this.registerUncover=function(){return n.memorable=!0,n.modified=!0,!0},this.stackEquals=function(t,n){return t.stack.every((function(t,e){return k.Z.equals(t,n.stack[e])&&t.isHidden===n.stack[e].isHidden}))},this.stacksEqual=function(t,e){return t.stacks.every((function(t,s){return n.stackEquals(t,e.stacks[s])}))},this.modelEquals=function(t,e){return n.stackEquals(t.stock,e.stock)&&n.stackEquals(t.waste,e.waste)&&n.stacksEqual(t.tableau,e.tableau)&&n.stacksEqual(t.foundation,e.foundation)},this.previousStates=[],this.memorable=!0,this.modified=!1}return(0,a.Z)(t,[{key:"registerBlink",value:function(t){t&&(this.modified=!0,this.memorable=!1)}}]),t}();T.copy=function(t){var n=new T;return n.previousStates=(0,d.Z)(t.previousStates),n.memorable=t.memorable,n.modified=t.modified,n};var N=function(){function t(n){var e=this;(0,r.Z)(this,t),this.settings=void 0,this.rating=void 0,this.timemachine=void 0,this.registerMove=function(t,n,s){return e.rating.registerMove(t,n,s),e.timemachine.registerMove(t,n),!0},this.registerPickup=function(){return e.timemachine.registerPickup(),!0},this.registerRecycle=function(){return e.rating.registerRecycle(),e.timemachine.registerRecycle(),!0},this.registerUncover=function(t){return e.rating.registerUncover(t),e.timemachine.registerUncover(),!0},this.settings=n,this.rating=new M(n),this.timemachine=new T}return(0,a.Z)(t,[{key:"registerBlink",value:function(t){return this.rating.registerBlink(t),this.timemachine.registerBlink(t),!0}}]),t}();N.copy=function(t){var n=new N(t.settings);return n.timemachine=T.copy(t.timemachine),n.rating=M.copy(t.rating),n};var P=(0,a.Z)((function t(){var n=this;(0,r.Z)(this,t),this.stack=void 0,this.source=void 0,this.position=void 0,this.filter=function(t){return t.filter((function(t){return t}))},this.pickUp=function(t,e,s){return t&&t[0]&&(n.stack=n.filter(t).map((function(t){return t.suggestion=!1,t})),n.source=e,n.position=s),t},this.putDown=function(){return n.source="",n.stack.splice(0,n.stack.length)},this.setOnClick=function(t){if(n.source&&n.source===t.source){var e=t.clickEmpty;t.stack.length&&(e=t.stack[t.stack.length-1].onClick),n.stack.forEach((function(t){t.onClick=e,t.canClick=function(){return!0}}))}},this.isHoldingCard=function(){return!!n.stack.length},this.isHoldingKing=function(){var t;return n.isHoldingCard()&&n.currentCard()&&"K"===(null===(t=n.currentCard())||void 0===t?void 0:t.face)},this.currentCard=function(){return n.isHoldingCard()&&n.stack[0]||null},this.hasMoreThanOneCard=function(){return n.stack.length>1},this.isFromCurrentSource=function(t){return n.source&&t.source===n.source||null},this.isFromWaste=function(){return n.source&&"waste"===n.source||!1},this.isFromFoundation=function(t){return n.source&&n.source==="foundation-".concat(t)},this.isFromTableau=function(t){return n.source&&n.source==="tableau-".concat(t)},this.isFromAnyTableau=function(){return n.source&&"tableau-"===n.source.substring(0,8)},this.getTableauIndex=function(){return n.source&&parseInt(n.source.substring(8))||0},this.stack=[],this.source="",this.position=null}));P.copy=function(t){var n=new P;return n.stack=k.Z.copyAll(t.stack),n.source=t.source,n.position=t.position,n};var H=(0,a.Z)((function t(n){var e=this;(0,r.Z)(this,t),this.model=void 0,this.currentIndex=void 0,this.rows=void 0,this.getZindex=function(t,n){for(var e=t.getClickable(),s=0;s<e.length;s++)if(k.Z.equals(n,e[s]))return s;return 0},this.update=function(t,n){for(var s=0;s<e.rows.length;s++)for(var i=e.rows[s],a=0;a<i.length;a++){var r=i[a];if(r&&r.source===t){var o=e.getZindex(r,n);return e.currentIndex={x:a,y:s,z:o},void e.finishNav()}}},this.valid=function(t){return t.x===e.currentIndex.x&&t.y===e.currentIndex.y&&t.z===e.currentIndex.z},this.moveLeft=function(t){return e.move(t,(function(){e.currentIndex.x--,-1===e.currentIndex.x&&(e.currentIndex.x=6)}))},this.moveRight=function(t){return e.move(t,(function(){e.currentIndex.x++,7===e.currentIndex.x&&(e.currentIndex.x=0)}))},this.move=function(t,n){if(e.valid(t)){n();var s=e.current();s?(e.currentIndex.z=s.getClickable().length-1,e.finishNav()):e.move(e.currentIndex,n)}},this.moveUp=function(t){var n;if(e.valid(t)){var s=null===(n=e.current())||void 0===n?void 0:n.getClickable();s&&s.length&&e.currentIndex.z>0?(e.currentIndex.z--,e.finishNav()):e.toggleRow(!0)}},this.moveDown=function(t){var n;if(e.valid(t)){var s=null===(n=e.current())||void 0===n?void 0:n.getClickable();s&&s.length&&e.currentIndex.z<s.length-1?(e.currentIndex.z++,e.finishNav()):e.toggleRow(!1)}},this.toggleRow=function(t){0===e.currentIndex.y?e.currentIndex.y=1:e.currentIndex.y=0;var n=e.current(),s=n?n.getClickable().length-1:0;e.currentIndex.z=t?s:0,n?e.finishNav():e.moveLeft(e.currentIndex)},this.finishNav=function(){var t,n,s=null===(t=e.current())||void 0===t?void 0:t.getClickable();s&&s[e.currentIndex.z]?e.model.focus.setCard(s[e.currentIndex.z]):e.model.focus.setStack((null===(n=e.current())||void 0===n?void 0:n.source)||"");return!0},this.current=function(){return e.rows[e.currentIndex.y][e.currentIndex.x]},this.pressCurrent=function(t){var n,s=null===(n=e.current())||void 0===n?void 0:n.getClickable();return e.model.focus.card&&e.model.focus.card.canClick()&&s&&s[e.currentIndex.z]&&s[e.currentIndex.z].face===e.model.focus.card.face&&s[e.currentIndex.z].type.icon===e.model.focus.card.type.icon?function(n){e.model.focus.card&&e.model.focus.card.equals(t.card)&&e.model.focus.card.onClick({isKeyboard:!0})(n)}:e.model.focus.stack&&e.model.focus.stack===t.stack?function(t){var n;null===(n=e.current())||void 0===n||n.clickEmpty({isKeyboard:!0})(t)}:function(t){t.navigator.finishNav(),t.game.timemachine.modified=!0}},this.model=n,this.currentIndex={x:0,y:0,z:0},this.rows=[[this.model.stock,this.model.waste,void 0].concat((0,d.Z)(this.model.foundation.stacks)),(0,d.Z)(this.model.tableau.stacks)]})),A=e(801),D=(0,a.Z)((function t(n){var e=this;(0,r.Z)(this,t),this.launchSettings=void 0,this.baseEntropy=void 0,this.interactionEntropy=void 0,this.suggestionModes=void 0,this.suggestionMode=void 0,this.setSuggestionMode=function(t){e.suggestionMode.key!==t&&(e.suggestionMode=A.Z.get(t))},this.enableHint=function(){e.suggestionMode=A.Z.getHintMode()},this.disableHint=function(){return!(!e.suggestionMode.isTemporary||!e.suggestionMode.next)&&(e.suggestionMode=A.Z.get(e.suggestionMode.next),!0)},this.launchSettings=n,this.baseEntropy=n.baseEntropy,this.interactionEntropy=n.interactionEntropy,this.suggestionModes=A.Z.allSuggestionModes(),this.suggestionMode=A.Z.get(n.suggestionMode)}));D.copy=function(t){var n=new D(t.launchSettings);return n.suggestionMode=t.suggestionMode,n.baseEntropy=t.baseEntropy,n.interactionEntropy=t.interactionEntropy,n};var I=function(t){(0,o.Z)(e,t);var n=(0,c.Z)(e);function e(t,i){var a;return(0,r.Z)(this,e),(a=n.call(this,"stock")).settings=void 0,a.recyclings=void 0,a.passes=void 0,a.setOnClick=function(t){a.clickEmpty=function(n){return t(null,n,null)},a.stack.forEach((function(n,e){n.onClick=function(e){return t((0,s.Z)({},n),e,null)},n.canClick=function(){return e===a.stack.length-1}}))},a.accepts=function(){return!1},a.popOne=function(){return a.stack.pop()},a.recycle=function(t){return!!t.length&&(a.stack=t.reverse().map(a.setCardProperties),a.stack[a.stack.length-1].canClick=function(){return!0},a.recyclings++,!0)},a.setCardProperties=function(t){return t.causeEntropy(Math.min(a.settings.interactionEntropy,1)),t.isHidden=!0,t.source=a.source,t},a.isOnTop=function(t){return t&&t.equals(a.getTop())},a.popTop=function(){var t=[];if("single"===a.settings.launchSettings.drawMode){var n=a.stack.pop();n&&(t=[n])}return"triple"===a.settings.launchSettings.drawMode&&(t=a.stack.splice(a.stack.length-3)),0===a.stack.length&&a.passes--,t},a.setEntropy=function(t){return a.stack.forEach((function(n){return n.causeEntropy(Math.min(t,1))})),(0,y.Z)(a)},a.settings=i,a.stack=t.map(a.setCardProperties),a.recyclings=0,a.passes=-1,"1-pass"===a.settings.launchSettings.recyclingMode&&(a.passes=1),"3-pass"===a.settings.launchSettings.recyclingMode&&(a.passes=3),a}return(0,a.Z)(e,[{key:"canRecycle",value:function(){return"infinite"===this.settings.launchSettings.recyclingMode||"3-pass"===this.settings.launchSettings.recyclingMode&&this.recyclings<2}}]),e}(x);I.copy=function(t){var n=new I([],t.settings);return n.stack=k.Z.copyAll(t.stack),n.passes=t.passes,n.recyclings=t.recyclings,n};var R=(0,a.Z)((function t(n){var e=this;(0,r.Z)(this,t),this.navigator=void 0,this.blink=function(t){return(new f).startBlink((function(t){return t.stock}),t)},this.dispatchPutDown=function(t,n,s){return e.blink(s,0)},this.dispatchPickup=function(t,n,s){return null!=t?e.moveToWaste(t,s):e.recycleWaste(s)},this.moveToWaste=function(t,n){return n.stock.isOnTop(t)&&n.waste.addAll(n.stock.popTop())&&n.game.registerMove("waste","stock",n.waste.getTop())},this.recycleWaste=function(t){if(!t.stock.getTop())return!!t.waste.getTop()&&t.stock.canRecycle()&&t.stock.recycle(t.waste.recycle())&&t.game.registerRecycle()&&e.navigator.finishNav()||e.blink(t,0)},this.navigator=n})),O=(0,a.Z)((function t(){var n=this;(0,r.Z)(this,t),this.blink=function(t){return(new f).startBlink((function(t){return t.waste}),t)},this.dispatchPutDown=function(t,e,s){return s.waste.wouldAcceptHand()&&s.waste.putDownHand()&&s.game.registerMove("waste","waste",s.waste.getTop())||n.blink(s,0)},this.dispatchPickup=function(t,e,s){return t&&s.hand.pickUp([s.waste.popTop(t)],"waste",e)&&s.game.registerPickup()||n.blink(s,0)}})),L=(0,a.Z)((function t(){var n=this;(0,r.Z)(this,t),this.tableau=void 0,this.waste=void 0,this.evaluateOptions=function(t){n.disableAllSuggestions(t),t.settings.suggestionMode.key===A.Z.NONE||n.getUncoverOptions(t)||n.getPutdownSuggestions(t)||t.hand.isHoldingCard()||n.getPickupOptions(t)&&t.settings.suggestionMode.key!==A.Z.FULL||!t.stock.getTop()&&!t.stock.canRecycle()||t.settings.suggestionMode.key===A.Z.SCORED||(t.stock.suggestion=!0)},this.getPutdownSuggestions=function(t,n){if(!t.hand.isHoldingCard()||t.settings.suggestionMode.key===A.Z.NONE)return 0;var e=[];if(t.waste.wouldAcceptHand()&&(t.settings.suggestionMode.key===A.Z.FULL||!t.hand.isFromWaste())){var s={target:"waste",source:t.hand.source};(t.settings.suggestionMode.key!==A.Z.SCORED||t.game.rating.rateMove(s,null)>0)&&(e.push(s),t.waste.suggestion=!0)}return t.foundation.stacks.forEach((function(n,s){if(t.foundation.wouldAcceptHand(s)&&(t.settings.suggestionMode.key===A.Z.FULL||!t.hand.isFromFoundation(s))){var i={target:n.source,source:t.hand.source};(t.settings.suggestionMode.key!==A.Z.SCORED||t.game.rating.rateMove(i,null)>0)&&(e.push(i),n.suggestion=!0)}})),t.tableau.stacks.forEach((function(s,i){if(t.tableau.wouldAcceptHand(i)&&(t.settings.suggestionMode.key===A.Z.FULL||!t.hand.isFromTableau(i))){var a=t.hand.isHoldingKing()&&0===s.stack.length&&t.hand.isFromAnyTableau()&&0===t.tableau.stacks[t.hand.getTableauIndex()].stack.length,r=s.stack.length>0&&t.hand.isFromAnyTableau()&&t.tableau.stacks[t.hand.getTableauIndex()].stack.length>0&&s.stack[s.stack.length-1].face===t.tableau.stacks[t.hand.getTableauIndex()].stack[t.tableau.stacks[t.hand.getTableauIndex()].stack.length-1].face&&!t.tableau.getTop(t.hand.getTableauIndex()).isHidden,o=!a&&!r;if(!n||t.settings.suggestionMode.key===A.Z.FULL||o){var c={target:s.source,source:t.hand.source};(t.settings.suggestionMode.key!==A.Z.SCORED||t.game.rating.rateMove(c,null)>0)&&(e.push(c),s.suggestion=!0)}}})),e.length},this.getPickupOptions=function(t){var e=!1,s=z.copy(t);return n.waste.dispatchPickup(s.waste.getTop(),null,s),s.game.timemachine.modified&&n.getPutdownSuggestions(s,!0)>(t.settings.suggestionMode.key===A.Z.FULL?1:0)&&(t.waste.suggestion=!0,e=!0),t.tableau.stacks.forEach((function(s,i){return s.stack.map((function(t,n){return{cardIndex:n,card:t}})).filter((function(t){return!t.card.isHidden})).forEach((function(a){var r=a.card,o=a.cardIndex,c=z.copy(t);n.tableau.dispatchPickup(r,null,c,i),c.game.timemachine.modified&&n.getPutdownSuggestions(c,!0)>(t.settings.suggestionMode.key===A.Z.FULL?1:0)&&(s.stack[o].suggestion=!0,e=!0)}))})),e},this.getUncoverOptions=function(t){if(!t.hand.isHoldingCard()){var n=t.tableau.stacks.map((function(t,n){return n})).filter((function(n){return t.tableau.getTop(n)&&t.tableau.getTop(n).isHidden}));return n.forEach((function(n){t.tableau.getTop(n).suggestion=!0})),n.length}return 0},this.disableAllSuggestions=function(t){var n=function t(n){n.suggestion=!1,n.stack&&n.stack.forEach(t),n.stacks&&n.stacks.forEach(t)};n(t.waste),n(t.stock),n(t.tableau),n(t.foundation)},this.tableau=new g,this.waste=new O})),U=function(t){(0,o.Z)(e,t);var n=(0,c.Z)(e);function e(){var t;(0,r.Z)(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(t=n.call.apply(n,[this].concat(a))).id=0,t.accepts=function(n){var e=t.getTop();if(!e)return n&&"K"===n.face||!1;if(t.source===(null===n||void 0===n?void 0:n.source))return!0;if(e.isHidden)return!1;var s=(0,d.Z)((0,b.bf)());return(n?s.indexOf(n.face):0)+1===s.indexOf(e.face)&&(null===n||void 0===n?void 0:n.type.color)!==e.type.color&&"A"!==e.face},t.getTop=function(n){return t.stack[t.stack.length-1-(n||0)]},t.canUncover=function(n){return t.getTop().isHidden&&n&&n.equals(t.getTop())},t.setOnClick=function(n,e){t.clickEmpty=function(t){return n(null,t)};var i=t.source===t.hand.source?[].concat((0,d.Z)(t.stack),(0,d.Z)(t.hand.stack)):t.stack;i.forEach((function(a,r){var o=a.isHidden&&r===i.length-1?e:n;a.onClick=function(t){return o((0,s.Z)({},a),t)},a.canClick=function(){return!a.isHidden||t.canUncover(a)&&!t.hand.currentCard()||!1}})),t.hand.setOnClick((0,y.Z)(t))},t}return(0,a.Z)(e)}(Z);U.copy=function(t){var n=new U(t.source,t.hand);return n.id=t.id,n.stack=k.Z.copyAll(t.stack),n};var F=function(t){(0,o.Z)(e,t);var n=(0,c.Z)(e);function e(t,s){var i;return(0,r.Z)(this,e),(i=n.call(this,t,s,[0,1,2,3,4,5,6].map((function(t){var n=new U("tableau-"+t,s);return n.id=t,n})))).setOnClick=function(t,n){i.stacks.forEach((function(e,s){e.setOnClick((function(n,e){return t(n,e,s)}),(function(t,e){return n(t,e,s)}))}))},i.getStack=function(t){return i.stacks[t]},i.wouldAcceptHand=function(t){return i.canPutDown(i.getTop(t),i.hand,t)},i.putDownHand=function(t){return i.add(t,i.hand.source,i.hand.putDown())},i.canPutDown=function(t,n,e){return t&&t.isHidden&&n.isFromCurrentSource(t)||i.accepts(e,n.currentCard())||!t&&n.isFromTableau(e)},i.accepts=function(t,n){return!!n&&i.stacks[t].accepts(n)},i.getCard=function(t,n){for(var e=0;e<i.stacks[t].stack.length;e++)if(n&&n.equals(i.stacks[t].stack[e])&&n.isHidden===i.stacks[t].stack[e].isHidden)return i.stacks[t].stack[e];return!1},i.popWithFollowing=function(t,n){for(var e=0;e<i.stacks[n].stack.length;e++)if(t&&t.equals(i.stacks[n].stack[e])){var s=i.stacks[n].stack.splice(e,i.stacks[n].stack.length);return i.stackEntropy(n),s}return[]},i.deal=function(t,n){i.stacks[n].stack.push(t)},i.canUncover=function(t,n){return i.stacks[t].canUncover(n)},i.uncover=function(t,n){var e=i.getTop(t);return!!i.canUncover(t,n)&&(e.isHidden=!1,i.stackEntropy(t),!0)},i.stackEntropy=function(t){for(var n=i.settings.interactionEntropy,e=1,s=i.getTop(t);n&&0!==n&&s;)s.causeEntropy(n),n--,s=i.getTop(t,e),e++},i.add=function(t,n,e){return i.stacks[t].stack=i.stacks[t].stack.concat(e.map((function(n){return i.setCardProperties(n,t)}))),i.stackEntropy(t),e},i.setCardProperties=function(t,n){return t.source=i.stacks[n].source,t},i.getTop=function(t,n){return i.stacks[t].getTop(n)},i.setEntropy=function(t){return i.stacks.forEach((function(n){return n.stack.forEach((function(n){return n.causeEntropy(Math.min(t,4))}))})),(0,y.Z)(i)},i}return(0,a.Z)(e)}(w);F.copy=function(t,n){var e=new F(t.settings,n);return e.stacks=t.stacks.map(U.copy),e};var B=function(t){(0,o.Z)(e,t);var n=(0,c.Z)(e);function e(t,i){var a;return(0,r.Z)(this,e),(a=n.call(this,"waste",i)).settings=void 0,a.setOnClick=function(t){a.clickEmpty=function(n){return t(null,n,null)};var n=a.source===a.hand.source?[].concat((0,d.Z)(a.stack),(0,d.Z)(a.hand.stack)):a.stack;n.forEach((function(e,i){e.onClick=function(n){return t((0,s.Z)({},e),n,null)},e.canClick=function(){return i===n.length-1}})),a.hand.setOnClick((0,y.Z)(a))},a.putDownHand=function(){return a.addAll(a.hand.putDown())},a.add=function(t){return t&&a.stack.push(a.setCardProperties(t))},a.addAll=function(t){return t&&t.length&&t.map(a.add)},a.setCardProperties=function(t){return t.source=a.source,t.isHidden=!1,t.causeEntropy(Math.min(a.settings.interactionEntropy,1)),t},a.wouldAcceptHand=function(){return a.hand.isFromWaste()&&a.canAdd(a.hand.currentCard())},a.accepts=function(t){return a.canAdd(t)||!1},a.canAdd=function(t){return t&&(!a.getTop()||!t.equals(a.getTop()))},a.popTop=function(t){return t&&t.equals(a.getTop())&&a.stack.pop()||null},a.recycle=function(){return a.stack.splice(0,a.stack.length)},a.setEntropy=function(t){return a.stack.forEach((function(n){return n.causeEntropy(Math.min(t,1))})),(0,y.Z)(a)},a.settings=t,a}return(0,a.Z)(e)}(Z);B.copy=function(t,n){var e=new B(t.settings,n);return e.stack=k.Z.copyAll(t.stack),e};var z=(0,a.Z)((function t(n){var e=this;(0,r.Z)(this,t),this.stock=void 0,this.waste=void 0,this.foundation=void 0,this.tableau=void 0,this.hand=void 0,this.game=void 0,this.settings=void 0,this.focus=void 0,this.suggestor=void 0,this.dealer=void 0,this.navigator=void 0,this.token=void 0,this.setToken=function(t){e.token=t},this.withSuggestions=function(){return e.suggestor.evaluateOptions(e),e},this._hasSuggestion=function(t){return t.suggestion||t.stack&&t.stack.some(e._hasSuggestion)||t.stacks&&t.stacks.some(e._hasSuggestion)},this.hasNonStockSuggestions=function(){return e._hasSuggestion(e.waste)||e._hasSuggestion(e.tableau)||e._hasSuggestion(e.foundation)},this.hasSuggestions=function(){return e._hasSuggestion(e.waste)||e._hasSuggestion(e.stock)||e._hasSuggestion(e.tableau)||e._hasSuggestion(e.foundation)},this.canAutoSolve=function(){return 0===e.waste.stack.length&&0===e.stock.stack.length&&e.tableau.stacks.every((function(t){return t.stack.every((function(t){return!t.isHidden}))}))},this.setEntropy=function(t){e.settings.baseEntropy=t,e.stock.setEntropy(t),e.waste.setEntropy(t),e.foundation.setEntropy(t),e.tableau.setEntropy(t)},this.clearSuccess=function(t){var n=function(t,n){n.stack.forEach((function(n){n.equals(t)&&(n.success=0)}))};n(t,e.stock),n(t,e.waste),e.foundation.stacks.forEach((function(e){return n(t,e)})),e.tableau.stacks.forEach((function(e){return n(t,e)}))},this.withHandlers=function(){var t=function(t){return new v(t).getHandler(e.hand)};return e.stock.setOnClick(t(new R(e.navigator))),e.waste.setOnClick(t(new O)),e.foundation.setOnClick(t(new E)),e.tableau.setOnClick(t(new g),t(new h)),e},this.stock=n.stock,this.waste=n.waste,this.foundation=n.foundation,this.tableau=n.tableau,this.hand=n.hand,this.game=n.game,this.settings=n.settings,this.focus=n.focus,this.suggestor=new L,this.dealer=new p,this.navigator=new H(this),this.token=n.token}));z.getInitialState=function(t,n){var e=new D(t),s=new P,i={stock:new I((0,d.Z)(n.cards),e),waste:new B(e,s),foundation:new j(e,s),tableau:new F(e,s),hand:s,game:new N(e),settings:e,focus:new m(e),token:0};return new z(i)},z.copy=function(t){var n=P.copy(t.hand);return new z({stock:I.copy(t.stock),waste:B.copy(t.waste,n),foundation:j.copy(t.foundation,n),tableau:F.copy(t.tableau,n),hand:n,game:N.copy(t.game),settings:D.copy(t.settings),focus:t.focus,token:t.token})};var q=e(2791),G={state:null,replaceContext:function(){},updateContext:function(){},updateGameContext:function(){},restart:function(){}},K=q.createContext(G),_=K.Provider,V=function(){var t=q.useContext(K);if(!t.state)throw new Error("no state present");return(0,s.Z)((0,s.Z)({},t),{},{state:t.state})},W=e(184),Y=function(t){var n=q.useState(!1),e=(0,l.Z)(n,2),s=e[0],i=e[1],a=V(),r=a.state,o=a.updateGameContext;return q.useEffect((function(){t.canAutosolve&&(o((function(t){return t.settings.suggestionMode=A.Z.get(A.Z.NONE)})),i(!0))}),[t.canAutosolve,o]),s&&r.settings.suggestionMode.key===A.Z.NONE?(0,W.jsx)(Q,{}):null},X=function(){var t=V().state;return(0,W.jsx)(Y,{canAutosolve:t.canAutoSolve()})},Q=function(){var t=V(),n=t.state,e=t.updateGameContext;return q.useEffect((function(){var t=setTimeout((function(){var t=z.copy(n).withHandlers();if(t.hand.currentCard()){if(t.settings.suggestionMode=A.Z.get(A.Z.SCORED),t.suggestor.evaluateOptions(t),t._hasSuggestion(t.foundation)){var s=t.foundation.stacks.filter((function(n){return t._hasSuggestion(n)}));if(s.length){var i=s[0];e(i.clickEmpty({isKeyboard:!1}))}}}else if(t.settings.suggestionMode=A.Z.get(A.Z.SCORED),t.suggestor.evaluateOptions(t),t._hasSuggestion(t.tableau)){var a=t.tableau.stacks.filter((function(n){return t._hasSuggestion(n)}));if(a.length){var r=a[0].stack.filter((function(t){return t.suggestion}));if(r.length){var o=r[0];e(o.onClick({isKeyboard:!1}))}}}}),150);return function(){return clearTimeout(t)}})),null},J={started:0,isEnded:!1,end:0,winner:-1,loser:-1},$=q.createContext({gameState:J,win:function(){},start:function(){},giveUp:function(){}}),tt=function(){return q.useContext($)},nt=function(t){var n=q.useState(J),e=(0,l.Z)(n,2),i=e[0],a=e[1],r={gameState:i,win:function(t){return a((0,s.Z)((0,s.Z)({},i),{},{end:Date.now(),isEnded:!0,winner:t}))},start:function(){return a((0,s.Z)((0,s.Z)({},i),{},{started:Date.now()}))},giveUp:function(t){a((0,s.Z)((0,s.Z)({},i),{},{end:Date.now(),isEnded:!0,loser:t}))}};return(0,W.jsx)($.Provider,{value:r,children:t.children})},et=function(){var t=V(),n=t.state,e=t.updateGameContext;return q.useEffect((function(){n.hand.currentCard()||n.tableau.stacks.forEach((function(t){t.getTop()&&t.getTop().isHidden&&t.getTop().canClick()&&e(t.getTop().onClick({isKeyboard:!0}))}))}),[n.token]),null},st=function(){var t=V().state,n=tt().gameState;return t.settings.launchSettings.autoUncover&&n.started?(0,W.jsx)(et,{}):null},it=e(3890),at=e(517),rt=e(8391),ot=q.createContext({player:0}),ct=function(){return q.useContext(ot)},ut=ot.Provider,lt=function(t){var n=V().state,e=ct().player,s="gamepad"===n.settings.launchSettings.inputMode,i=n.settings.launchSettings.boardMode===it.Z.SINGLEPLAYER,a=function(t){t.focus.isKeyBoard(!0),i&&(t.settings.launchSettings.inputMode="gamepad")};return i||s?(0,W.jsx)(at.Z,{layout:rt.Z,gamepadIndex:n.settings.launchSettings.players[e].inputLayout,onLeft:function(){return t.onLeft(a)},onRight:function(){return t.onRight(a)},onUp:function(){return t.onUp(a)},onDown:function(){return t.onDown(a)},onAction:function(){return t.onAction(a)},onCancel:function(){return t.onCancel(a)},onHint:function(){return t.onHint(a)},onUndo:function(){return t.onUndo()},onPause:function(){return t.onPause(a)},onMenu:function(){return t.onMenu(a)}}):null},dt=e(1453),ft=e(9847),gt=function(t){var n=V().state,e=ct().player,s="keyboard"===n.settings.launchSettings.inputMode,i=n.settings.launchSettings.boardMode===it.Z.SINGLEPLAYER,a=i?dt.dR:(0,dt.Vc)(n.settings.launchSettings.players[e].inputLayout),r=function(t){t.focus.isKeyBoard(!0),i&&(t.settings.launchSettings.inputMode="keyboard")};return s||i?(0,W.jsx)(ft.Z,{layout:a,onLeft:function(){return t.onLeft(r)},onRight:function(){return t.onRight(r)},onUp:function(){return t.onUp(r)},onDown:function(){return t.onDown(r)},onAction:function(){return t.onAction(r)},onCancel:function(){return t.onCancel(r)},onHint:function(){return t.onHint(r)},onUndo:function(){return t.onUndo()},onPause:function(){return t.onPause(r)},onMenu:function(){return t.onMenu(r)}}):null},ht={end:0,paused:!1,pauses:[],pauseStartedAt:0,allowed:5,pausedBy:-1,showMenu:!1,showCards:!0},pt={state:ht,togglePause:function(){},toggleMenu:function(){},getElapsed:function(){return""}},vt=q.createContext(pt),kt=function(t){var n=tt().gameState,e=q.useState((0,s.Z)({},ht)),i=(0,l.Z)(e,2),a=i[0],r=i[1],o={state:(0,s.Z)((0,s.Z)({},a),{},{started:n.started}),togglePause:function(t,n){a.showMenu?r((0,s.Z)((0,s.Z)({},a),{},{pausedBy:n,pauses:[].concat((0,d.Z)(a.pauses),[Date.now()-a.pauseStartedAt]),pauseStartedAt:0,paused:!1,showMenu:!1,showCards:!0})):a.pauses.length<a.allowed?r((0,s.Z)((0,s.Z)({},a),{},{pausedBy:n,pauseStartedAt:Date.now(),paused:!0,showMenu:!0,showCards:!1})):r((0,s.Z)((0,s.Z)({},a),{},{pausedBy:n,pauseStartedAt:0,paused:!1,showMenu:!0,showCards:!1}))},toggleMenu:function(t){r((0,s.Z)((0,s.Z)({},a),{},{showMenu:t,showCards:!0}))},getElapsed:function(){var t=function(t){return 1===(t+"").length?"0"+t:t},e=function(){var t=a.pauses.reduce((function(t,n){return t+n}),0);return(a.end||a.pauseStartedAt||Date.now())-n.started-t}(),s=Math.floor(e/1e3/60/60);e-=1e3*s*60*60;var i=Math.floor(e/1e3/60);e-=1e3*i*60;var r=Math.floor(e/1e3);return e-=1e3*r,s?s+":"+t(i)+":"+t(r):t(i)+":"+t(r)}};return(0,W.jsx)(vt.Provider,{value:o,children:t.children})},mt=function(){return q.useContext(vt)},yt=function(){var t=V(),n=t.state,e=t.updateContext,i=t.updateGameContext,a=t.replaceContext,r=mt(),o=ct().player,c={x:n.navigator.currentIndex.x,y:n.navigator.currentIndex.y,z:n.navigator.currentIndex.z},u={card:n.focus.card,stack:n.focus.stack},l=!!r.state.paused,d={onLeft:function(t){return e((function(n){t(n),n.navigator.moveLeft(c)}))},onRight:function(t){return e((function(n){t(n),n.navigator.moveRight(c)}))},onUp:function(t){return e((function(n){t(n),n.navigator.moveUp(c)}))},onDown:function(t){return e((function(n){t(n),n.navigator.moveDown(c)}))},onAction:function(t){return i((function(e){var s;t(e);var i=null===n||void 0===n||null===(s=n.navigator)||void 0===s?void 0:s.pressCurrent(u);i&&i(e),e.navigator.finishNav()}))},onCancel:function(t){return e((function(n){t(n),n.hand.stack.length&&n.hand.stack[0].onClick({isKeyboard:!0})(n)}))},onPause:function(t){e((function(n){t(n)})),r.togglePause(l,o)},onHint:function(t){e((function(n){t(n),function(t){return t.settings.suggestionMode.supportsHints||t.settings.suggestionMode.isTemporary}(n)&&!function(t){return t.settings.suggestionMode.isTemporary}(n)&&n.settings.enableHint()}))},onUndo:function(){a((function(t){var e=t.game.timemachine.popPreviousState(n.game.timemachine.previousStates.length-1,n);return e?(e.game.rating.penalize(t.game.rating),e):null}))},onMenu:function(t){e((function(n){t(n)})),r.togglePause(l,o)}};return r.state.showMenu?null:(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(gt,(0,s.Z)({},d)),(0,W.jsx)(lt,(0,s.Z)({},d))]})},xt=function(){var t=V(),n=t.state,e=t.replaceContext,s=tt(),i=s.gameState,a=s.start;return q.useEffect((function(){if(!i.started){var t=[];if(!n.settings.launchSettings.quickDeal){return function s(i){return t.push(setTimeout((function(){n.dealer.isDealt?a():e(n.dealer.dealOne(i,s))}),35))}(n.dealer.dealt),function(){return t.forEach((function(t){return clearTimeout(t)}))}}n.dealer.isDealt||(a(),e(n.dealer.dealAll()))}}),[]),null},Zt=e(8201),bt=function(t){var n=q.useState(),e=(0,l.Z)(n,2),a=e[0],r=e[1],o=q.useContext(i.w),c=o.width,u=o.height;q.useEffect((function(){var n=t.reff.getBoundingClientRect();r({left:-1*n.left,top:-1*n.top})}),[t.reff,c,u]);var d=(0,Zt.uL)(),f=d.display,g=d.item,h=d.style;return f&&a&&g?(0,W.jsx)("div",{style:(0,s.Z)((0,s.Z)({},h),{},{position:"relative",width:"100%",left:a.left,top:a.top,zIndex:2e3,opacity:1}),children:g.render}):null},Ct=e(6874),wt=e(2108),St=e(2083),jt=e(4925),Et=function(){var t=V().state,n=q.useState({refused:!1,since:0}),e=(0,l.Z)(n,2),s=e[0],i=e[1],a=function(t){i({refused:!(s.since>=3)&&t,since:s.since>=3?0:s.since+1})};q.useEffect((function(){t.hand.currentCard()||s.refused&&a(!0)}),[t.token]);var r=mt(),o=V().restart;return q.useEffect((function(){return r.state.showMenu||r.toggleMenu(!0),function(){return r.toggleMenu(!1)}}),[s.refused]),s.refused?null:(0,W.jsx)(jt.K,{children:(0,W.jsx)("div",{className:"gamemenu menu dialog",children:(0,W.jsx)("div",{className:"startscreen-jail",children:(0,W.jsxs)("div",{className:"innermenu",children:[(0,W.jsx)(wt.Z,{label:"\u270b"}),(0,W.jsx)("div",{className:"announcement",children:"The game might be over"}),(0,W.jsxs)(St.Z,{keyboardLayout:dt.dR,children:[(0,W.jsx)(Ct.Z,{icon:"\u25b6\ufe0f",title:"Keep trying",onClick:function(){a(!0)}}),(0,W.jsx)(Ct.Z,{icon:"\ud83c\udff3\ufe0f",title:"Give up",onClick:function(){return o()}})]})]})})})})},Mt=function(){var t=V().state,n=tt().gameState,e=q.useState({any:!1,stock:!1,nonStock:!1}),s=(0,l.Z)(e,2),i=s[0],a=s[1];q.useEffect((function(){if(n.started){var e=z.copy(t);e.settings.suggestionMode=A.Z.get(A.Z.FULL),e.suggestor.evaluateOptions(e),a({any:e.hasSuggestions(),stock:e._hasSuggestion(e.stock),nonStock:e.hasNonStockSuggestions()})}}),[t.token]);var r=q.useState([]),o=(0,l.Z)(r,2),c=o[0],u=o[1],f=q.useState(!1),g=(0,l.Z)(f,2),h=g[0],p=g[1];return q.useEffect((function(){if(!t.hand.currentCard()&&n.started)if(i.nonStock)u([]),p(!1);else if(i.stock&&!i.nonStock){var e=t.stock.getTop();e&&u([].concat((0,d.Z)(c),[e])),t.stock.stack.length+t.waste.stack.length<=c.length&&p(!0)}else i.any||p(!0)}),[i]),h?(0,W.jsx)(Et,{}):null},Tt=e(6584),Nt=function(t){var n=q.createRef();return q.useEffect((function(){if(n&&n.current&&t.intensity){var e=15*t.intensity,s=window.innerWidth/10.8/100,i={ticks:50,origin:{x:.5,y:.33},particleCount:40,startVelocity:20*s,decay:.8,spread:360,scalar:s},a=Tt.Z.create(n.current,{resize:!0}),r=function(t,n){a(Object.assign({},i,n,{particleCount:Math.floor(e*t)}))};r(.25,{startVelocity:55*s}),r(.2,{decay:1.2}),r(.35,{decay:.91,scalar:s-.2}),r(.1,{startVelocity:25*s,decay:.92,scalar:s+.2}),r(.1,{}),r(.1,{startVelocity:45*s})}}),[n,t.intensity]),(0,W.jsx)("canvas",{ref:n})},Pt=function(t){var n=V(),e=n.state,s=n.updateContext;return q.useEffect((function(){if(t.model.success){var n=setTimeout((function(){return s((function(n){return n.clearSuccess(t.model)}))}));return function(){return clearTimeout(n)}}}),[null===e||void 0===e?void 0:e.token,t.model,s,t.model.success]),(0,W.jsx)(Nt,{intensity:t.model.success})},Ht=e(1832),At=function(t){var n=[0,1,2,3,4,5,6].map((function(t){return" stack "+(t+1)})),e="",s=t.split("-");return e+=s[0],s.length>1&&(e+=n[parseInt(s[1])]),e},Dt=e(6541),It=function t(n){var e=function(){return(0,W.jsx)(t,(0,s.Z)({},(0,s.Z)((0,s.Z)({},n),{},{models:n.models.slice(n.index,n.models.length),offsetLeft:function(){return 0},isSelected:function(){return!1},index:0,isDrag:f})))};e.displayName="ReRender";var i=V(),a=i.state,r=i.updateGameContext,o=mt(),c=q.useRef(null),u=q.useState(!!n.isDrag),d=(0,l.Z)(u,2),f=d[0],g=d[1],h=n.models[n.index],p=(0,q.useCallback)((function(){return!!h&&a.focus.hasCard(h)}),[h,a.focus]),v=(0,q.useCallback)((function(){return n.isDrag||f}),[n.isDrag,f]),k=(0,Dt.c)({type:"card",item:function(t){return g(!0),!h.onClick||n.isSelected&&n.isSelected(n.index)||r((function(t){h.onClick({isKeyboard:!1})(t)})),{type:"card",model:h,render:e()}},collect:function(t){return{opacity:(t.isDragging(),1)}},canDrag:function(){return h.canClick()&&!h.isHidden&&(null===a.hand.currentCard()||h.equals(a.hand.currentCard()))},end:function(t,n){g(!1),n.didDrop()||setTimeout((function(){return r((function(t){h.onClick({isKeyboard:!1})(t)}))}),1)}}),m=(0,l.Z)(k,3),y=m[0].opacity,x=m[1],Z=m[2];q.useEffect((function(){Z((0,Ht.rX)(),{captureDraggingState:!0})}),[Z]);var b=(0,q.useCallback)((function(){return h.canClick()?x:c}),[c,h,x]);q.useEffect((function(){p()&&a.settings.launchSettings.boardMode===it.Z.SINGLEPLAYER&&c&&c.current&&c.current.focus()}),[p]);var C=function(t,n,e,s){var i=(0,q.useCallback)((function(){if(!t)return"card card-base";var i=n.isSuggested&&n.isSuggested(n.index)||t.suggestion,a="card card-base suit-".concat(t.type.icon);return a+=n.isSelected&&n.isSelected(n.index)||s()||i?"":" card-stack-".concat(t.source),a+=!e()&&n.isSelected&&n.isSelected(n.index)&&!e()?" card-selected":"",a+=n.blink?" blink":"",a+=t.canClick()?" clickable":"",(a+=i&&!s()?" card-suggested":"")+(s()?" card-focused":"")}),[e,s,t,n]),a=q.useState(i()),r=(0,l.Z)(a,2),o=r[0],c=r[1];return q.useEffect((function(){c(i())}),[i]),o}(h,n,v,p),w=function(t,n,e,i){var a=(0,q.useCallback)((function(){if(!t)return{};var a=(0,s.Z)({opacity:e()?0:i,zIndex:(n.zIndex?n.zIndex:20*(n.offsetTop&&n.offsetTop(n.index,n.models)>0?1:0))+1,top:n.offsetTop?n.offsetTop(n.index,n.models)/15+"em":0},t.entropyStyle);return n.offsetLeft&&(a.left=2*n.offsetLeft(n.index)+"em"),t.onClick||(a.pointerEvents="none"),a}),[t,n,e,i]),r=q.useState(a()),o=(0,l.Z)(r,2),c=o[0],u=o[1];return q.useEffect((function(){u(a)}),[a]),c}(h,n,v,y),S=function(t){var n=(0,q.useCallback)((function(){return t&&t.onClick?{}:{pointerEvents:"none"}}),[t]),e=q.useState(n()),s=(0,l.Z)(e,2),i=s[0],a=s[1];return q.useEffect((function(){a(n())}),[n]),i}(h),j=function(t){var n=q.useState(""),e=(0,l.Z)(n,2),s=e[0],i=e[1];return q.useEffect((function(){if(t){var n=At(t.source);n+=": ",n+=t.isHidden?"hidden card":t.type.icon+t.face,i(n)}}),[t]),s}(h);return n.models.length?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{style:S,className:"stack-base",children:(0,W.jsxs)("button",{onFocus:function(){},onBlur:function(){},style:w,ref:b(),className:C,onClick:function(t){var n,e,s,i,o,c;t.preventDefault();for(var u=0===t.clientX&&0===t.clientY,l=t.target;l&&!l.className.includes("card-base")&&l.offsetParent;)l=l.offsetParent;var d=l.getBoundingClientRect(),f={isKeyBoard:u,click:{x:t.clientX-((null===(n=l)||void 0===n||null===(e=n.ownerDocument)||void 0===e||null===(s=e.defaultView)||void 0===s?void 0:s.pageXOffset)||0),y:t.clientY-((null===(i=l)||void 0===i||null===(o=i.ownerDocument)||void 0===o||null===(c=o.defaultView)||void 0===c?void 0:c.pageYOffset)||0)},element:{x:d.x,y:d.y}},g=a.settings.launchSettings.boardMode===it.Z.SINGLEPLAYER;h.onClick&&!f.isKeyBoard&&r((function(t){h.onClick(f)(t),g&&(t.settings.launchSettings.inputMode="mouse")}))},disabled:!h.canClick()||!o.state.showCards,tabIndex:h.canClick()?0:-1,"aria-label":j,title:j,children:[(0,W.jsx)(Pt,{model:h}),(0,W.jsx)("div",{className:"card-content",children:h.isHidden||!o.state.showCards?(0,W.jsx)("div",{className:"card-back",children:"\xa0"}):(0,W.jsxs)("div",{className:"card-grid-container",children:[(0,W.jsx)("div",{children:(0,W.jsx)("div",{className:"align-center",children:h.type.icon})}),(0,W.jsx)("div",{children:(0,W.jsx)("div",{className:"align-left",children:h.face})}),(0,W.jsx)("div",{children:"\xa0"}),(0,W.jsx)("div",{children:(0,W.jsx)("div",{className:"align-center",children:h.type.icon})}),(0,W.jsx)("div",{className:"mainface",children:(0,W.jsxs)("div",{className:"align-center",children:[h.face," "]})}),(0,W.jsx)("div",{children:(0,W.jsx)("div",{className:"align-center",children:h.type.icon})}),(0,W.jsx)("div",{children:"\xa0"}),(0,W.jsx)("div",{children:(0,W.jsx)("div",{className:"align-right",children:h.face})}),(0,W.jsx)("div",{children:(0,W.jsx)("div",{className:"align-center",children:h.type.icon})})]})})]})}),n.models.length-1>n.index&&(0,W.jsx)(t,(0,s.Z)((0,s.Z)({},n),{},{isDrag:v(),index:n.index+1}))]}):null},Rt=function(t){var n="card-base socket",e=q.useRef(null),s=V(),i=s.state,a=s.updateGameContext;q.useEffect((function(){if(i.focus.hasStack(t.model.source)&&i.settings.launchSettings.boardMode===it.Z.SINGLEPLAYER){var n=e&&e.current?e.current:null;n&&n.focus()}})),t.model.stack.length?n+=" socket-full":t.model.blinkFor?n+=" socket-blink":i.focus.hasStack(t.model.source)?n+=" socket-focused":n+=" socket-empty",t.model.suggestion&&!t.model.stack.length&&(n+=" socket-suggested");var r=At(t.model.source);return r+=": empty socket",(0,W.jsx)("button",{onFocus:function(){},onBlur:function(){},ref:e,className:n,onClick:function(n){n.preventDefault();var e=0===n.clientX&&0===n.clientY;e||a(t.model.clickEmpty({isKeyBoard:e}))},disabled:!!t.model.stack.length,tabIndex:t.model.stack.length?-1:0,"aria-label":r,title:r,children:t.children})},Ot=function(t){var n=V(),e=n.updateContext,s=n.state,i=t(s);q.useEffect((function(){var n=null;return s&&t(s).blinkFor&&(n=setTimeout((function(){return e((function(n){t(n).unblink(n)}))}),200)),function(){n&&clearTimeout(n)}}),[s,i.blinkFor,e,t])},Lt=e(1053),Ut=function(t,n){var e=V().updateGameContext;return(0,Lt.L)({accept:"card",canDrop:function(e){return n&&n(e.model)||t.accepts(e.model)},drop:function(){e(t.clickEmpty({isKeyBoard:!1}))}})[1]},Ft=function(){var t=V().state;return(0,W.jsx)(W.Fragment,{children:t.foundation.stacks.map((function(t,n){return(0,W.jsx)(Bt,{model:t,index:n},n)}))})},Bt=function(t){Ot((function(n){return n.foundation.stacks[t.index]}));var n=V().state,e=t.model,s=Ut(t.model),i=n.hand.source===e.source?[].concat((0,d.Z)(e.stack),(0,d.Z)(n.hand.stack)):(0,d.Z)(e.stack);return(0,W.jsxs)("div",{className:"board-field",ref:s,children:[(0,W.jsx)(Rt,{model:e,children:(0,W.jsx)("div",{className:"align-center foundation-base suit-"+e.icon,children:e.icon})}),(0,W.jsx)(It,{index:0,models:i,blink:e.blinkFor,isSuggested:function(t){return e.suggestion&&e.stack.length-1===t},isSelected:function(t){return t>e.stack.length-1}},0)]},t.index)},zt=function(){var t=mt(),n=t.state,e=t.getElapsed,s=tt().gameState,i=q.useState(""),a=(0,l.Z)(i,2),r=a[0],o=a[1];return q.useEffect((function(){var t=setInterval((function(){s.started&&!n.paused&&o(e())}),1e3);return function(){return clearInterval(t)}}),[s.started,n.paused,e]),s.started&&r?(0,W.jsxs)("div",{className:"header-clock",children:[(0,W.jsx)("div",{className:"icon-container",children:"\ud83d\udd52"}),r]}):null},qt=function(){var t=V().state;return(0,W.jsx)("div",{className:"heart-container",children:function(){if("infinite"===t.settings.launchSettings.recyclingMode)return"\ud83d\udda4";if("1-pass"===t.settings.launchSettings.recyclingMode)return t.stock.passes>0?"\u2764\ufe0f":"\ud83d\udc94";if("3-pass"===t.settings.launchSettings.recyclingMode){var n=function(t,n){return Array.from(new Array(t).keys()).map((function(){return n})).join("")};return n(t.stock.passes,"\u2764\ufe0f")+n(3-t.stock.passes,"\ud83d\udc94")}return null}()})},Gt=function(){var t=V(),n=t.state,e=t.updateContext,s=function(t){return t.settings.suggestionMode.supportsHints||t.settings.suggestionMode.isTemporary},i=function(t){return t.settings.suggestionMode.isTemporary};return s(n)?(0,W.jsx)("div",{children:(0,W.jsx)("button",{title:"Hint",onClick:function(){return e((function(t){s(t)&&!i(t)&&t.settings.enableHint()}))},disabled:i(n),children:(0,W.jsx)("span",{className:"icon",children:"\ud83d\udca1"})})}):null},Kt=function(){var t=V().state;return(0,W.jsxs)("div",{children:[(0,W.jsx)("button",{title:"Points",onClick:function(){u.Am.info((0,W.jsx)("ul",{children:t.game.rating.ratings.reverse().map((function(t,n){return(0,W.jsxs)("li",{children:[t.points," - ",t.text]},n)}))}),{autoClose:!1})},children:(0,W.jsx)("span",{className:"icon",children:"\ud83c\udfc6"})}),null===t||void 0===t?void 0:t.game.rating.points]})},_t=function(){var t=mt(),n=ct().player;return t.state.showMenu?null:(0,W.jsx)("div",{children:(0,W.jsx)("button",{title:"Settings",onClick:function(){return t.togglePause(!t.state.paused,n)},children:(0,W.jsx)("span",{className:"icon",children:"\u2630"})})})},Vt=function(){var t=V(),n=t.state,e=t.replaceContext;return n.game.timemachine.previousStates.length?(0,W.jsx)("div",{children:(0,W.jsx)("button",{disabled:!n.game.timemachine.previousStates.length,title:"Undo (Penalty:"+Math.pow(2,n.game.rating.multiplicator)+")",onClick:function(){return e((function(t){var e=t.game.timemachine.popPreviousState(n.game.timemachine.previousStates.length-1,n);return e?(e.game.rating.penalize(t.game.rating),e):null}))},children:(0,W.jsx)("span",{className:"icon",children:"\u23ea"})})}):null},Wt=function(t){return(0,W.jsxs)("div",{className:"header "+t.mode,children:[(0,W.jsxs)("div",{className:"header-title",children:[(0,W.jsx)(qt,{}),(0,W.jsx)(Kt,{})]}),(0,W.jsx)(zt,{}),(0,W.jsxs)("div",{className:"header-buttons header-right",children:[(0,W.jsx)(Gt,{}),(0,W.jsx)(Vt,{}),(0,W.jsx)(_t,{})]})]})},Yt=(e(9e3),e(3985)),Xt=function(){var t=V(),n=t.state,e=t.updateContext,i=t.replaceContext,a=t.restart,r=mt(),o=ct().player,c=(0,jt.Z)(),u=c.navigation,l=c.setNavigation,d=function(t,n){return l((0,s.Z)((0,s.Z)({},u),{},{focus:"menu",screeen:"",mainMenu:t,menu:(0,s.Z)({},n)}))};if(!r.state.showMenu)return null;var f=r.state.allowed-r.state.pauses.length-1,g="You can pause the game ".concat(f," more times.");1===f&&(g="You can pause the game ".concat(f," more time.")),0===f&&(g="This is the last remaining pause. If you continue, no more pause will be possible."),f<0&&(g="The game is not paused.");var h=n.settings.launchSettings.boardMode===it.Z.SINGLEPLAYER?dt.dR:(0,dt.Vc)(n.settings.launchSettings.players[o].inputLayout);return r.state.pausedBy!==o?(0,W.jsx)("div",{className:"gamemenu menu",children:(0,W.jsx)("div",{className:"startscreen-jail",children:(0,W.jsxs)("div",{className:"innermenu",children:[(0,W.jsx)(wt.Z,{label:"\ud83d\ude34"}),r.state.pausedBy,(0,W.jsx)("div",{className:"announcement",children:g})]})})}):(0,W.jsx)("div",{className:"gamemenu menu",children:(0,W.jsx)("div",{className:"startscreen-jail",children:(0,W.jsxs)("div",{className:"innermenu",children:[(0,W.jsx)(wt.Z,{label:"\ud83d\ude34"}),(0,W.jsx)("div",{className:"announcement",children:g}),(0,W.jsxs)(St.Z,{keyboardLayout:h,children:[(0,W.jsx)(Ct.Z,{icon:"\u25b6\ufe0f",title:"Resume",onClick:function(){r.togglePause(!1,-1)}}),(0,W.jsx)(Ct.Z,{icon:n.settings.suggestionMode.icon,title:"Suggestions: ".concat(n.settings.suggestionMode.label),onClick:function(){var t;t=A.Z.next(n.settings.suggestionMode).key,e((function(n){return n.settings.setSuggestionMode(t)}))}}),(0,W.jsxs)(Ct.Z,{icon:"\ud83c\udf2a\ufe0f",title:"Entropy",onClick:function(t){return function(t,n){u.mainMenu!==t?d(t,n):d("",n)}("entropy",t)},toggled:"entropy"===u.mainMenu,children:[(0,W.jsx)(Ct.Z,{icon:"\ud83c\udf2a\ufe0f",title:"Base Entropy: ".concat(Yt.Z[n.settings.baseEntropy]),onClick:function(){var t;t=n.settings.baseEntropy<Yt.Z.length-1?n.settings.baseEntropy+1:0,e((function(n){return n.setEntropy(t)}))}}),(0,W.jsx)(Ct.Z,{icon:"\ud83c\udf2c\ufe0f",title:"Action Entropy: ".concat(Yt.Z[n.settings.interactionEntropy]),onClick:function(){var t;t=n.settings.interactionEntropy<Yt.Z.length-1?n.settings.interactionEntropy+1:0,e((function(n){return n.settings.interactionEntropy=t}))}})]}),(0,W.jsx)(Ct.Z,{icon:"\u267b\ufe0f",title:"Restart Game",onClick:function(){return r.togglePause(!0,-1),void i((function(t){return t.game.timemachine.previousStates?t.game.timemachine.previousStates[0]:null}))},skip:!n.game.timemachine.previousStates.length}),(0,W.jsx)(Ct.Z,{icon:"\ud83d\uddd1\ufe0f",title:"Quit Game",onClick:function(){return a()}})]})]})})})},Qt=function(){return(0,W.jsx)(jt.K,{children:(0,W.jsx)(Xt,{})})},Jt=function(t){var n=q.useRef();return q.useEffect((function(){n.current=t})),n.current},$t=function(t){var n,e=V(),s=t.length,i=t.started,a=t.paused,r=Jt({length:s,paused:a,started:i});return q.useEffect((function(){var t=null;return e.state.settings.launchSettings.speed&&i&&!a&&r&&((null===r||void 0===r?void 0:r.length)!==s||(null===r||void 0===r?void 0:r.started)!==i||(null===r||void 0===r?void 0:r.paused)!==a)&&(t=setTimeout((function(){e.updateContext((function(t){s===t.stock.stack.length&&t.stock.passes>0&&(t.stock.stack.length||t.waste.stack.length)&&(t.hand.isFromWaste()&&t.waste.putDownHand(),t.stock.stack.length?t.waste.addAll(t.stock.popTop()):t.stock.canRecycle()&&t.stock.recycle(t.waste.recycle()))}))}),1e4)),function(){t&&clearTimeout(t)}}),[e,s,a,r,i]),e&&e.state?(0,W.jsxs)("div",{className:"board-field stock",children:[(0,W.jsx)(Rt,{model:e.state.stock}),(0,W.jsx)(It,{index:0,models:e.state.stock.stack,offsetTop:function(t){return t/2*-1},zIndex:0,blink:null===e||void 0===e||null===(n=e.state)||void 0===n?void 0:n.stock.blinkFor,isSuggested:function(t){var n;return(null===e||void 0===e||null===(n=e.state)||void 0===n?void 0:n.stock.suggestion)&&t===e.state.stock.stack.length-1}},0)]}):null},tn=function(){var t=V().state;Ot((function(t){return t.stock}));var n=mt(),e=tt().gameState,s=n.state.paused;return(0,W.jsx)($t,{length:t.stock.stack.length,paused:s,started:e.started})},nn=function(){var t=V().state;return(0,W.jsx)(W.Fragment,{children:t.tableau.stacks.map((function(n,e){return(0,W.jsx)(en,{index:e,model:n,parent:t.tableau},e)}))})},en=function(t){Ot((function(n){return n.tableau.stacks[t.index]}));var n=V().state,e=Ut(t.model),s=n.hand.source===t.model.source?[].concat((0,d.Z)(t.model.stack),(0,d.Z)(n.hand.stack)):(0,d.Z)(t.model.stack);return(0,W.jsxs)("div",{className:"board-field",ref:e,children:[(0,W.jsx)(Rt,{model:t.model}),(0,W.jsx)(It,{index:0,models:s,blink:t.model.blinkFor,isSuggested:function(n){return t.model.suggestion&&t.model.stack.length-1===n},offsetTop:function(t,n){return function(t,n){for(var e=0;e<=t;e++)if(n[e]&&!n[e].isHidden)return 12*e+24*(t-e);return 12*t}(t,n)},isSelected:function(n){return n>t.model.stack.length-1}},0)]})},sn=function(){var t=V().state;Ot((function(t){return t.waste}));var n=Ut(t.waste,(function(){return t.hand.isFromWaste()})),e=(null===t||void 0===t?void 0:t.hand.source)===t.waste.source?[].concat((0,d.Z)(t.waste.stack),(0,d.Z)(t.hand.stack)):(0,d.Z)(t.waste.stack);return(0,W.jsxs)("div",{className:"board-field",ref:n,children:[(0,W.jsx)(Rt,{model:t.waste}),(0,W.jsx)(It,{index:0,models:e,offsetTop:function(t){return t/2*-1},offsetLeft:function(n){return function(n){if("single"===t.settings.launchSettings.drawMode)return 0;var e=t.hand.isHoldingCard()&&t.hand.isFromWaste()?t.waste.stack.length+1:t.waste.stack.length,s=2;return 2===e&&(s=1),1===e&&(s=0),(n-e-2)%3+s}(n)},blink:t.waste.blinkFor,isSuggested:function(n){return t.waste.suggestion&&n===t.waste.stack.length-1},isSelected:function(n){return n>t.waste.stack.length-1}},0)]})},an=function(){var t=V().state,n=tt().win,e=ct().player;return q.useEffect((function(){t.hand.currentCard()||52!==t.foundation.countCards()||n(e)}),[t.token,t.foundation,t.hand,e,n]),null},rn=function(){var t=V().state,n=tt().gameState;return!n.isEnded&&!!t.settings.launchSettings.autoUncover&&!!n.started&&(0,W.jsx)(an,{})||null},on=function(t){var n=q.useRef(null);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(Qt,{}),(0,W.jsx)(Wt,{mode:t.mode}),(0,W.jsx)(u.Ix,{style:{zIndex:8888},position:"top-center",closeOnClick:!1,newestOnTop:!0,limit:1,pauseOnFocusLoss:!1,draggable:!1,transition:u.Mi}),(0,W.jsx)("div",{className:"board-jail "+t.mode,children:(0,W.jsxs)("div",{className:"board-grid-container "+t.mode,children:[(0,W.jsx)(tn,{}),(0,W.jsx)(sn,{}),(0,W.jsx)("div",{className:"board-field spacer",ref:n,children:n.current&&(0,W.jsx)(bt,{reff:n.current})}),(0,W.jsx)(Ft,{}),(0,W.jsx)(nn,{})]})}),(0,W.jsx)(xt,{}),(0,W.jsx)(yt,{}),(0,W.jsx)(X,{}),(0,W.jsx)(rn,{}),(0,W.jsx)(Mt,{}),(0,W.jsx)(st,{})]})},cn=function(){var t=V(),n=t.state,e=t.restart,s=mt();return n.game.isEnded?(0,W.jsxs)("div",{className:"ui neutral endscreen",children:[(0,W.jsx)("div",{className:"title",children:"\ud83e\udd73"}),(0,W.jsxs)("div",{className:"content",children:[(0,W.jsxs)("div",{children:["Time: ",s.getElapsed()]}),(0,W.jsxs)("div",{children:["Points: ",n.game.rating.points]}),(0,W.jsxs)("div",{children:["Time Penalty: ",n.game.rating.getTimePenalty(n.game.started,n.game.end||Date.now())]}),(0,W.jsxs)("div",{children:["Bonus Points: ",n.game.rating.getBonusPoints(n.game.started,n.game.end||Date.now())]}),(0,W.jsxs)("div",{children:["Total Points: ",n.game.rating.getTotal(n.game.started,n.game.end||Date.now())]}),(0,W.jsx)("div",{children:(0,W.jsxs)("button",{onClick:e,children:["\ud83d\uddd1\ufe0f",(0,W.jsx)("div",{children:"New Game"})]})})]})]}):null},un=function(t){(0,o.Z)(e,t);var n=(0,c.Z)(e);function e(t){var s;return(0,r.Z)(this,e),(s=n.call(this,t)).replaceContext=function(t){return s.setState(t)},s.updateContext=function(t){return s.replaceContext((function(n){return t(n),n}))},s.updateGameContext=function(t){return s.replaceContext((function(n){n.game.timemachine.modified=!1;var e=z.copy(n);return e.game.timemachine.previousStates.length?e.game.timemachine.previousStates=[e.game.timemachine.previousStates[e.game.timemachine.previousStates.length-1]]:e.game.timemachine.previousStates=[],t(n),n.game.timemachine.modified?(n.game.timemachine.pushPreviousState(e),n.setToken(Math.random()),n):null}))},s.render=function(){var t={state:s.state.withHandlers().withSuggestions(),replaceContext:s.replaceContext,updateContext:s.updateContext,updateGameContext:s.updateGameContext,restart:s.props.restart};return(0,W.jsxs)(_,{value:t,children:[(0,W.jsx)(ut,{value:{player:s.props.player},children:(0,W.jsx)(on,{mode:s.props.settings.boardMode})}),(0,W.jsx)(cn,{})]})},s.state=z.getInitialState(t.settings,t.deck),s}return(0,a.Z)(e)}(q.Component),ln=e(6993),dn=e(1887),fn=function(t){var n=t.launchState,e=t.deck,s=t.restart;return(0,W.jsx)(i.Z,{ratio:dn.Z._4to3,children:(0,W.jsx)("div",{className:"layout-grid-container singleplayer",children:(0,W.jsx)(un,{player:0,settings:n,restart:s,deck:e})})})},gn=function(t){var n=t.launchState,e=t.deck,i=t.restart;return(0,W.jsxs)("div",{className:"game-layout-container splitscreen",children:[(0,W.jsx)("div",{className:"layout-grid-container "+n.boardMode,children:(0,W.jsx)(un,{player:0,settings:(0,s.Z)((0,s.Z)({},n),{},{inputMode:n.players[0].inputMethod}),restart:i,deck:e.copy()})}),(0,W.jsx)("div",{className:"layout-grid-container "+n.boardMode,children:(0,W.jsx)(un,{player:1,settings:(0,s.Z)((0,s.Z)({},n),{},{inputMode:n.players[1].inputMethod}),restart:i,deck:e.copy()})})]})},hn=function(t){return(0,W.jsx)(nt,{children:(0,W.jsx)(kt,{children:(0,W.jsxs)(ln.Z,{delay:500,fallback:(0,W.jsx)("h3",{children:"Loading..."}),children:[t.launchState.boardMode===it.Z.SINGLEPLAYER&&(0,W.jsx)(fn,(0,s.Z)({},t)),t.launchState.boardMode===it.Z.VERSUS&&(0,W.jsx)(gn,(0,s.Z)({},t))]})})})}}}]);
//# sourceMappingURL=77.0e0b7416.chunk.js.map