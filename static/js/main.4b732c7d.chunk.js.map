{"version":3,"sources":["View/Clock.js","View/Footer.js","styles.js","View/Card.js","View/Hand2.js","View/TouchAwareComponent.js","View/Foundation.js","View/Hand.js","Service/Actions.js","Service/BaseService.js","Service/Foundation.js","Model/Deck/CardTools.js","Service/Stock.js","Model/Deck/CardRange.js","Service/TableauStack.js","Service/Waste.js","Service/Facade.js","View/Stock.js","View/TableauStack.js","View/Waste.js","Model/Deck/Deck.js","Model/Deck/Suits.js","Model/Game/Hand.js","Model/Game/Stock.js","Model/Game/Waste.js","Model/Game/Foundation.js","Model/Game/FoundationStack.js","Model/Game/Tableau.js","Model/Game/TableauGenerator.js","Model/getInitialState.js","Model/Game/FoundationGenerator.js","View/Solitaire.js","Model/Deck/DeckGenerator.js","reportWebVitals.js","index.js"],"names":["Clock","props","state","timeElapsed","setInterval","setState","msec","end","Date","now","started","hh","Math","floor","mm","ss","this","Component","Footer","points","isEnded","href","cardBaseStyle","borderStyle","borderWidth","borderColor","width","height","float","borderRadius","position","backgroundColor","iconBaseStyle","display","fontSize","iconBaseStyles","tl","left","top","tr","right","bl","bottom","br","faceStyle","textAlign","targetStackStyle","cardStyle","faceStyleRed","color","styles","table","zIndex","stackbox","Card","boxShadow","isSelected","offset","offsetTop","iconLabelStyles","content","isHidden","className","style","margin","bordeRradius","type","icon","face","st","blink","getCardStyle","onClick","e","Hand2","localStyle","stack","map","card","index","source","c","TouchAwareComponent","isTouch","is_touch_device","prefixes","split","window","DocumentTouch","document","query","join","matchMedia","matches","console","error","Foundation","localFaceStyle","model","localCardStyle","blinkFor","hand","isHoldingCard","length","Hand","myRef","React","createRef","node","current","addEventListener","x","clientX","y","clientY","ref","Actions","moves","currentMove","target","push","_rateMove","debug","move","sourceIsTableau","substr","targetIsTableau","Service","stateholder","_blink","selector","_toggleBlink","setTimeout","actions","_setState","a","b","cb","click","tryPutDown","pickup","s","foundation","stacks","getTop","getPreviousUsed","remove","pickUp","hasMoreThanOneCard","accepts","currentCard","contains","add","registerMove","putDown","_tryDetectEnd","f","parseInt","reduce","CardTools","otherCard","filter","value","arr","cardNotEquals","i","filterNotEqual","Stock","moveToWaste","recycleWaste","stock","cardEquals","waste","pop","recycle","registerRecycle","CardRange","TableauStack","clickCard","clickEmpty","validateTableauStackMove","range","indexOf","following","tableau","findFollowing","filterOut","containsCurrentCard","tryUncover","canUncover","uncover","registerUncover","isFromCurrentSource","isHoldingKing","Waste","Facade","clickTableauStack","clickFoundation","clickStock","clickWaste","localBase","getOffset","stackIndex","ret","getLast","Deck","cards","_shuffleArray","taken","slice","array","j","random","Suits","heart","diamond","club","spade","reverse","element","canAdd","getTopCard","currentFoundation","acceptedCards","currentAccepted","getCurrentAccepted","usedCards","FoundationStack","Tableau","Array","isArray","concat","TableauGenerator","getStacks","deck","pointer","oldpointer","ids","id","_getStack","forEach","_generateStack","_getRndInteger","min","max","template","getInitialState","Object","keys","key","suit","Solitaire","reset","toString","generateDeck","shuffle","service","variant","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.4b732c7d.chunk.js","sourcesContent":["import { Component } from 'react';\r\n\r\nexport default class Clock extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            timeElapsed: null,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        setInterval(() => {\r\n            this.setState((state) => {\r\n                //@todo padleft or string format : 00:01\r\n                var msec = (this.props.end || Date.now()) - this.props.started;\r\n                var hh = Math.floor(msec / 1000 / 60 / 60);\r\n                msec -= hh * 1000 * 60 * 60;\r\n                var mm = Math.floor(msec / 1000 / 60);\r\n                msec -= mm * 1000 * 60;\r\n                var ss = Math.floor(msec / 1000);\r\n                msec -= ss * 1000;\r\n                state.timeElapsed = hh ? (hh+':'+mm+':'+ss) : (mm+':'+ss);\r\n                return { ...state };\r\n            })\r\n        }, 1000);\r\n    }\r\n\r\n    render() {\r\n        return (<span>Time Elapsed: {this.state.timeElapsed}</span>);\r\n    }\r\n}","import Clock from './Clock';\r\n\r\nexport default function Footer(props) {\r\n    return (\r\n        <div>\r\n            Points: {props.points}\r\n            <br />\r\n            <Clock started={props.started} end={props.end} />\r\n            <br />\r\n            Is Ended: { props.isEnded ? \"Y\" : \"N\"}\r\n            <br/>\r\n            Report Issues <a href=\"https://github.com/ckonig/solitaire/issues\">here</a>.\r\n        </div>\r\n    );\r\n}","export const cardBaseStyle = {\r\n    borderStyle: 'solid',\r\n    borderWidth: '1px',\r\n    borderColor: 'black',\r\n    width: '9.45vw',\r\n    height: '13.2vw',\r\n    float: 'left',\r\n    //margin: '0.1vw',\r\n    borderRadius: '0.5vw',\r\n    position: 'relative',\r\n    backgroundColor: 'white',\r\n};\r\n\r\nexport const faceBaseStyle = {\r\n    textAlign: 'center',\r\n    position: 'absolute',\r\n    left:'0vw',\r\n    top: '2vw',\r\n    width: '9.45vw',\r\n    fontSize: '6vw',\r\n    fontWeight: 'bold',\r\n}\r\n\r\nexport const iconBaseStyle = {\r\n    position: 'absolute',\r\n    display: 'inline-block',\r\n    fontSize: '2vw',\r\n}\r\n\r\nexport const iconBaseStyles = {\r\n    tl: {\r\n        ...iconBaseStyle,\r\n        left:  '0.5vw',\r\n        top: '0vw',\r\n    },\r\n    tr: {\r\n        ...iconBaseStyle,\r\n        right:  '0.5vw',\r\n        top: '0vw',\r\n    },\r\n    bl: {\r\n        ...iconBaseStyle,\r\n        left:  '0.5vw',\r\n        bottom: '0vw',\r\n    },\r\n    br: {\r\n        ...iconBaseStyle,\r\n        right:  '0.5vw',\r\n        bottom: '0vw',\r\n    }\r\n};\r\n\r\nvar faceStyle = {\r\n    textAlign: 'center',\r\n    position: 'absolute',\r\n    top: '6.5vw',\r\n    width: '6.45vw',\r\n};\r\nexport const targetStackStyle = {\r\n    cardStyle: {\r\n        borderStyle: 'dashed',\r\n        borderColor: 'gray',\r\n        width: '9.45vw',\r\n        height: '13.2vw',\r\n        float: 'left',\r\n       // margin: '0.1vw',\r\n        borderRadius: '0.3vw',\r\n        position: 'relative',\r\n    },\r\n\r\n    faceStyle: {\r\n        ...faceStyle\r\n    },\r\n    faceStyleRed: {\r\n        ...faceStyle,\r\n        color: 'red'\r\n    },\r\n\r\n}\r\n\r\nexport const styles = {\r\n    solitaire: {\r\n        table: {\r\n            backgroundColor: 'darkgreen',\r\n            zIndex: -1,\r\n        },\r\n        stackbox: {\r\n            width: '9.45vw',\r\n            height: '13.2vw',\r\n            float: 'left'\r\n        },\r\n    }\r\n}","import React, { Component } from \"react\";\r\nimport { cardBaseStyle, faceBaseStyle, iconBaseStyles } from \"../styles\";\r\n\r\nexport default class Card extends Component {\r\n  //@todo sanitize styles\r\n  render() {\r\n    var cardStyle = {\r\n      ...cardBaseStyle,\r\n      boxShadow: '2px 2px 2px 2px black',\r\n    };\r\n\r\n    if (this.props.isSelected) {\r\n      cardStyle['backgroundColor'] = 'lightgray';\r\n      cardStyle['borderColor'] = 'yellow';\r\n    }\r\n\r\n    var className = '';\r\n\r\n\r\n    if (this.props.offset) {\r\n      cardStyle['top'] = this.props.offset;\r\n      cardStyle['left'] = this.props.offset;\r\n    }\r\n\r\n    if (this.props.offsetTop) {\r\n      cardStyle['top'] = (this.props.offsetTop / 10) + \"vw\";\r\n    }\r\n\r\n    var iconLabelStyles = {\r\n      tl: { ...iconBaseStyles.tl },\r\n      br: { ...iconBaseStyles.br },\r\n    };\r\n\r\n    iconLabelStyles['tl']['left'] = '2vw';\r\n    iconLabelStyles['br']['right'] = '2vw';\r\n\r\n    const getCardStyle = (color) => {\r\n      var st = { ...cardStyle };\r\n      st['color'] = color;\r\n      st.zIndex = this.props.offsetTop + 2;\r\n      if (this.props.zIndex) {\r\n        st.zIndex = this.props.zIndex;\r\n      }\r\n      if (this.props.blink) {\r\n        st['borderColor'] = 'red';\r\n        st.boxShadow = '2px 2px 2px 2px red';\r\n      }\r\n      return st;\r\n    }\r\n    var content = <div></div>;\r\n    if (!this.props.isHidden) {\r\n      content = <div className=\"card-grid-container\" style={{ height: '100%', width: '100%' }}>\r\n        <div className=\"tlicon\"><div className=\"mcontent\"> {this.props.type.icon}</div></div>\r\n        <div className=\"tlface\"><div className=\"lcontent\"> {this.props.face}</div></div>\r\n        <div className=\"tspacer\"></div>\r\n        <div className=\"tricon\"><div className=\"mcontent\"> {this.props.type.icon}</div></div>\r\n        <div className=\"mainface\" > <div className=\"mcontent\">{this.props.face}</div></div>\r\n        <div className=\"blicon\"><div className=\"mcontent\"> {this.props.type.icon}</div></div>\r\n        <div className=\"bspacer\"></div>\r\n        <div className=\"brface\"> <div className=\"rcontent\">{this.props.face}</div></div>\r\n        <div className=\"bricon\"> <div className=\"mcontent\">{this.props.type.icon}</div></div>\r\n      </div>;\r\n    } else {\r\n      content = <div className=\"karo\" style={{\r\n        margin: '5%',\r\n        bordeRradius: '5px',\r\n        height: '92%',\r\n        borderColor: 'black',\r\n        borderStyle: 'solid',\r\n        borderWidth: '1px',\r\n      }}>&nbsp;</div>;\r\n    }\r\n\r\n    //@todo accept `Card` model and pass it to click handler // source as 2nd parameter? how to store in model?\r\n    //source is not property of card, but of CardPlacement ? -> stack of placements, placement contains source and card\r\n    return (\r\n      <div style={getCardStyle(this.props.type.color)} className={className} onClick={(e) => this.props.onClick({...this.props})}>\r\n        { content}\r\n      </div>\r\n    );\r\n  }\r\n};\r\n","import React, { Component } from 'react';\r\n\r\nimport Card from './Card';\r\n\r\nexport default class Hand2 extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        var outer = {\r\n            position: 'absolute',\r\n            left: '0px',\r\n            top: '0px',\r\n            width: '0px',\r\n            height: '0px',\r\n        }\r\n\r\n        var localStyle = {\r\n            position: 'absolute',\r\n            left: '0px',\r\n            top: '0px',\r\n        };\r\n\r\n        return (\r\n            <div style={outer}>\r\n\r\n                {this.props.stack && this.props.stack.map((card, index) => (\r\n                    <div style={localStyle}>\r\n                        <Card\r\n                            offsetTop={this.props.offset + (index * 20)}\r\n                            zIndex={1000 + (index * 20)}\r\n                            type={card.type}\r\n                            face={card.face}\r\n                            isSelected={true}\r\n                            source={card.source}\r\n                            onClick={(c) => this.props.onClick(c)}\r\n                        />\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        );\r\n    }\r\n}","import { Component } from \"react\";\r\n\r\nexport default class TouchAwareComponent extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.isTouch = this.is_touch_device();\r\n    }\r\n\r\n    is_touch_device() {\r\n        try {\r\n            let prefixes = ' -webkit- -moz- -o- -ms- '.split(' ');\r\n\r\n            let mq = function (query) {\r\n                return window.matchMedia(query).matches;\r\n            };\r\n\r\n            if (('ontouchstart' in window) || (typeof window.DocumentTouch !== \"undefined\" && document instanceof window.DocumentTouch)) {\r\n                return true;\r\n            }\r\n\r\n            return mq(['(', prefixes.join('touch-enabled),('), 'heartz', ')'].join(''));\r\n        } catch (e) {\r\n            console.error('(Touch detect failed)', e);\r\n            return false;\r\n        }\r\n    }\r\n}","import Card from './Card';\r\nimport Hand2 from './Hand2';\r\nimport TouchAwareComponent from './TouchAwareComponent';\r\nimport { targetStackStyle } from '../styles';\r\n\r\nexport default class Foundation extends TouchAwareComponent {\r\n    render() {\r\n        var styles = {\r\n            ...targetStackStyle\r\n        };\r\n\r\n        var localStyle = {\r\n            position: 'absolute',\r\n            left: '0px',\r\n            top: '0px',\r\n        };\r\n\r\n        var localFaceStyle = {\r\n            fontSize: '6vw',\r\n        };\r\n        localFaceStyle.color = this.props.model.color;\r\n\r\n        var localOuterStyle = {\r\n            position: 'relative',\r\n        };\r\n\r\n        var localCardStyle = { ...styles.cardStyle };\r\n\r\n        if (this.props.model.blinkFor > 0) {\r\n            localCardStyle.borderColor = 'red';\r\n        }\r\n\r\n        var shouldShowHand = () => {\r\n            return this.isTouch && this.props.hand.isHoldingCard() && this.props.hand.source == 'foundation-' + this.props.index;\r\n        }\r\n\r\n        var getOffset = () => 0;\r\n\r\n        return (\r\n            <div style={localOuterStyle}>\r\n                <div style={localCardStyle} onClick={() => this.props.onClick()}>\r\n                    <div className=\"mcontent\" style={localFaceStyle}>\r\n                        {this.props.model.icon}\r\n                    </div>\r\n                </div>\r\n                {this.props.model.stack.map(card => (\r\n                    <div style={localStyle}>\r\n                        <Card\r\n                            blink={this.props.model.blinkFor}\r\n                            type={card.type}\r\n                            source={card.source}\r\n                            face={card.face}\r\n                            onClick={(c) => this.props.onClick(c)} />\r\n                    </div>))}\r\n                {shouldShowHand() && (<Hand2\r\n                    offset={getOffset(this.props.model.stack.length)}\r\n                    stack={this.props.hand.stack}\r\n                    onClick={(c) => this.props.onClick(this.props.model.stack[this.props.model.stack.length - 1])} />)}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\n\r\nimport Card from './Card';\r\nimport TouchAwareComponent from './TouchAwareComponent';\r\n\r\nexport default class Hand extends TouchAwareComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.myRef = React.createRef();\r\n    }\r\n\r\n    componentDidMount() {\r\n        const node = this.myRef.current;\r\n        if (!this.is_touch_device()) {\r\n            document.addEventListener('mousemove', (e) => {\r\n                var x = e.clientX,\r\n                    y = e.clientY;\r\n                node.style.top = (y) + 'px';\r\n                node.style.left = (x) + 'px';\r\n                node.style.position = 'relative'\r\n            });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        var outer = {\r\n            position: 'absolute',\r\n            left: '0px',\r\n            top: '0px',\r\n            width: '0px',\r\n            height: '0px',\r\n        }\r\n\r\n        var localStyle = {\r\n            position: 'absolute',\r\n            left: '0px',\r\n            top: '0px',\r\n        };\r\n\r\n        if (this.isTouch) {\r\n            return (<span></span>);\r\n        }\r\n\r\n        return (\r\n            <div style={outer}>\r\n                <div ref={this.myRef}>\r\n\r\n                    {this.props.stack && this.props.stack.map((card, index) => (\r\n                        <div style={localStyle}>\r\n                            <Card\r\n                                offsetTop={index * 20}\r\n                                zIndex={1000 + (index * 20)}\r\n                                type={card.type}\r\n                                face={card.face}\r\n                                isSelected={true}\r\n                            />\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","/**\t\r\n * End Detection and Move Rating\r\n * Also, preparation for UNDO functionality?\r\n */\r\n\r\n//@todo make model\r\n\r\nexport default class Actions {\r\n\r\n    constructor() {\r\n        this.moves = [];\r\n        this.currentMove = null;\r\n    }\r\n\r\n    registerMove(target, state, card) {\r\n        var currentMove = {\r\n            source: card.source,\r\n            card: card,\r\n            target: target\r\n        }\r\n\r\n        state.moves.push({ ...currentMove });\r\n        state.points += this._rateMove(currentMove);\r\n        return true;\r\n    }\r\n\r\n    registerRecycle(state) {\r\n        state.moves.push({ source: 'waste', target: 'stock', card: null });\r\n        state.points -= 100;\r\n        console.debug('RATING: subtract 100 points for RECYCLE')\r\n    }\r\n\r\n    registerUncover(card, state) {\r\n        state.moves.push({ source: null, target: null, card: card });\r\n        state.points += 5;\r\n        console.debug('RATING: add 5 points for UNCOVER')\r\n    }\r\n\r\n    _rateMove(move) {\r\n        var sourceIsTableau = move.source.substr(0, 7) == 'tableau';\r\n        var targetIsTableau = move.target.substr(0, 7) == 'tableau';\r\n        if (sourceIsTableau) {\r\n            if (move.target == 'foundation') {\r\n                console.debug('RATING: add 10 points for MOVE tableau -> foundation')\r\n                return 10;\r\n            }\r\n        } else if (move.source == 'waste') {\r\n            if (move.target == 'foundation') {\r\n                console.debug('RATING: add 10 points for MOVE waste -> foundation')\r\n                return 10;\r\n            }\r\n            if (targetIsTableau) {\r\n                console.debug('RATING: add 5 points for MOVE waste -> tableau')\r\n                return 5;\r\n            }\r\n        } else if (move.source == 'foundation') {\r\n            if (targetIsTableau) {\r\n                console.debug('RATING: subtract 15 points for MOVE foundation -> tableau')\r\n                return -15;\r\n            }\r\n        }\r\n\r\n        return 0;\r\n    }\r\n} ","import Actions from \"./Actions\";\r\n\r\nexport default class Service {\r\n    constructor(stateholder) {\r\n        this.actions = new Actions();\r\n        this._setState = (a, b) => stateholder.setState((state) => {\r\n            a(state);\r\n            return { ...state };\r\n        }, b);\r\n        this.hand = () => stateholder.state.hand;\r\n        this.state = () => stateholder.state;\r\n    }\r\n\r\n    _blink = (selector) => this._toggleBlink(selector, 10, () => setTimeout(() => this._toggleBlink(selector, 0), 100))\r\n\r\n    _toggleBlink(selector, blinkFor, cb) {\r\n        this._setState((state) => {\r\n            selector(state).blinkFor = blinkFor;\r\n        }, cb);\r\n    }\r\n}","import Service from \"./BaseService\";\r\n\r\nexport default class Foundation extends Service {\r\n\r\n    click = (index) => this.hand().isHoldingCard()\r\n        ? this.tryPutDown(index)\r\n        : this.pickup(index)\r\n\r\n    pickup(index) {\r\n        var card = this.state().foundation.getTop(index)\r\n        if (card) {\r\n            this._setState((state) => {\r\n                if (state.foundation.getPreviousUsed(index) == card.face) {\r\n                    state.foundation.remove(index, card)\r\n                    state.hand.pickUp([card], card.source);\r\n                }\r\n            });\r\n        } else {\r\n            this.blink(index);\r\n        }\r\n    }\r\n\r\n    tryPutDown(index) {\r\n        if (!this.hand().hasMoreThanOneCard() && this.state().foundation.accepts(index, this.hand().currentCard())) {\r\n            this._setState((state) => {\r\n                if (state.hand.isHoldingCard() && !state.foundation.contains(index, state.hand.currentCard())) {\r\n                    state.foundation.add(index, state.hand.currentCard())\r\n                    this.actions.registerMove('foundation', state, state.hand.currentCard())\r\n                    state.hand.putDown();\r\n                    this._tryDetectEnd(state)\r\n                }\r\n            });\r\n        } else {\r\n            this.blink(index);\r\n        }\r\n    }\r\n\r\n    _tryDetectEnd(state) {\r\n        var nrofCards = state.foundation.stacks.map(f => parseInt(f.stack.length)).reduce((a, b) => a + b, 0);\r\n        if (nrofCards == 52) {\r\n            state.isEnded = true;\r\n            state.end = Date.now();\r\n        }\r\n    }\r\n\r\n    blink = (index) => this._blink(s => s.foundation.stacks[index])\r\n}","class CardTool {\r\n\r\n    cardEquals(card, otherCard) {\r\n        return (!card && !otherCard) || card && otherCard && otherCard.face == card.face && otherCard.type.icon == card.type.icon;\r\n    }\r\n\r\n    cardNotEquals(card, otherCard) {\r\n        return otherCard.face !== card.face || otherCard.type.icon !== card.type.icon;\r\n    }\r\n\r\n    filterNotEqual(stack, card) {\r\n        return stack.filter((value, index, arr) => {\r\n            return CardTools.cardNotEquals(value, card);\r\n        });\r\n    }\r\n\r\n    filterOut(stacks, card) {\r\n        for (var i = 0; i < stacks.length; i++) {\r\n            stacks[i].stack = CardTools.filterNotEqual(stacks[i].stack, card);\r\n        }\r\n\r\n        return stacks;\r\n    }\r\n}\r\nconst CardTools = new CardTool();\r\nexport default CardTools ","import CardTools from \"../Model/Deck/CardTools\";\r\nimport Service from \"./BaseService\";\r\n\r\nexport default class Stock extends Service {\r\n    click = (card) => {\r\n        if (this.hand().isHoldingCard()) {\r\n            this.blink();\r\n        } else if (card) {\r\n            this.moveToWaste(card);\r\n        } else {\r\n            this.recycleWaste();\r\n        }\r\n    }\r\n\r\n    moveToWaste(card) {\r\n        this._setState((state) => {\r\n            if (CardTools.cardEquals(card, state.stock.getTop())) {\r\n                state.waste.stack.push(state.stock.stack.pop());\r\n                this.actions.registerMove('stock', state, {...card, source: 'waste'});\r\n            }\r\n        })\r\n    }\r\n\r\n    recycleWaste() {\r\n        this._setState((state) => {\r\n            state.stock.recycle(state.waste.recycle())\r\n                && this.actions.registerRecycle(state)\r\n        });\r\n    }\r\n\r\n    blink = () => this._blink(s => s.stock)\r\n}","export const CardRange = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];\r\n\r\nexport const getTargetOrder = () => {\r\n   return ['A', ...CardRange.slice(0, CardRange.length - 1)].reverse();\r\n}\r\n","import { CardRange } from '../Model/Deck/CardRange';\r\nimport Service from './BaseService';\r\n\r\nexport default class TableauStack extends Service {\r\n\r\n    click = (card, index, source) => card\r\n        ? this.clickCard(card, index)\r\n        : this.clickEmpty(source, index)\r\n\r\n    clickCard(card, index) {\r\n        if (this.hand().isHoldingCard()) {\r\n            if (!this.tryUncover(card, index) && this.hand().isFromCurrentSource(card) && card.isHidden) {\r\n                this.tryPutDown(index)\r\n            } else if (this.validateTableauStackMove(this.hand().currentCard(), card)) {\r\n                this.tryPutDown(index)\r\n            } else {\r\n                this.blink(index);\r\n            }\r\n        } else if (!this.tryUncover(card, index)) {\r\n            this.pickup(card)\r\n        }\r\n    }\r\n\r\n    clickEmpty(source, index) {\r\n        if (this.hand().isHoldingKing() || this.hand().source == source) {\r\n            this.tryPutDown(index)\r\n        } \r\n    }\r\n\r\n    validateTableauStackMove = (current, top) => {\r\n        // @todo this is different from acceptedCards in foundation although they are very similar -> fix inconsistency\r\n        var range = [...CardRange];\r\n        var currentIndex = range.indexOf(current.face);\r\n        var topIndex = range.indexOf(top.face);\r\n        return (currentIndex + 1) == topIndex && (current.type.color != top.type.color);\r\n    }\r\n\r\n    pickup = (card) => {\r\n        this._setState((state) => {\r\n            if (!state.hand.isHoldingCard() && !card.isHidden) {\r\n                var following = state.tableau.findFollowing(card)\r\n                state.hand.pickUp([card, ...following], card.source);\r\n                state.tableau.filterOut([card, ...following]);\r\n            }\r\n        });\r\n    }\r\n\r\n    tryPutDown = (index) => {\r\n        this._setState((state) => {\r\n            if (state.hand.isHoldingCard() && !state.hand.containsCurrentCard(state.tableau.stacks[index].stack)) {\r\n                state.tableau.filterOut([state.hand.currentCard()])\r\n                this.actions.registerMove('tableau-' + index, state, state.hand.currentCard())\r\n                state.tableau.add(index, state.hand.putDown());\r\n            }\r\n        });\r\n    }\r\n\r\n    tryUncover = (card, index) => {\r\n        if (!this.hand().isHoldingCard() && card.isHidden && card.canUncover) {\r\n            this._setState((state) => {\r\n                state.tableau.uncover(index, card) && this.actions.registerUncover(card, state);\r\n            });\r\n            return true;\r\n        }\r\n        return false\r\n    }\r\n\r\n    blink = (index) => this._blink(s => s.tableau.stacks[index])\r\n\r\n}\r\n","import Service from \"./BaseService\";\r\n\r\nexport default class Waste extends Service {\r\n\r\n    click = (card) => {\r\n        if (this.hand().isHoldingCard()) {\r\n            this.tryPutDown(card);\r\n        } else if (card) {\r\n            this.pickup(card)\r\n        } else {\r\n            this.blink();\r\n        }\r\n    }\r\n\r\n    pickup(card) {\r\n        this._setState((state) => {\r\n            if (!state.hand.isHoldingCard()) {\r\n                state.hand.pickUp([card], card.source);\r\n                state.waste.filterOut(card);\r\n            }\r\n        })\r\n    }\r\n\r\n    tryPutDown() {\r\n        if (this.state().hand.source == 'waste') {\r\n            this._setState((state) => {\r\n                state.waste.tryPutDown(state.hand.currentCard())\r\n                    && this.actions.registerMove('waste', state, state.hand.currentCard())\r\n                    && state.hand.putDown()\r\n            });\r\n        } else {\r\n            this.blink();\r\n        }\r\n    }\r\n\r\n    blink = () => this._blink(s => s.waste)\r\n}   ","import Foundation from './Foundation';\r\nimport Stock from './Stock';\r\nimport TableauStack from './TableauStack';\r\nimport Waste from './Waste';\r\n\r\nexport default class Facade {\r\n    constructor(stateholder) {\r\n        this.clickTableauStack = new TableauStack(stateholder).click\r\n        this.clickFoundation = new Foundation(stateholder).click\r\n        this.clickStock = new Stock(stateholder).click\r\n        this.clickWaste = new Waste(stateholder).click\r\n    }\r\n}","import Card from './Card';\r\nimport { targetStackStyle } from '../styles';\r\n\r\nexport default function Stock(props) {\r\n    var localStyle = {\r\n        position: 'absolute',\r\n        left: '0px',\r\n        top: '0px',\r\n    };\r\n\r\n    var localOuterStyle = {\r\n        position: 'relative',\r\n    };\r\n\r\n    var localBase = {...targetStackStyle.cardStyle}\r\n    if (props.blinkFor > 0) {\r\n        localBase.borderColor = 'red';\r\n    }\r\n\r\n    return (\r\n        <div style={localOuterStyle}>\r\n            <div style={localBase} onClick={() => props.onClick()}>&nbsp;</div>\r\n            {props.model.stack.map((card, index) => (\r\n                <div style={localStyle}>\r\n                    <Card type={card.type}\r\n                        face={card.face}\r\n                        blink={props.model.blinkFor}\r\n                        source=\"main\"\r\n                        //offsetTop={index}\r\n                        isHidden={card.isHidden}\r\n                        canUncover={index == props.model.stack.length - 1}\r\n                        onClick={props.onClick}\r\n                    />\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n}\r\n","import Card from './Card';\r\nimport Hand2 from './Hand2';\r\nimport TouchAwareComponent from './TouchAwareComponent';\r\nimport { targetStackStyle } from '../styles';\r\n\r\nexport default class TableauStack extends TouchAwareComponent {\r\n    render() {\r\n        var styles = {\r\n            ...targetStackStyle\r\n        };\r\n\r\n        var localStyle = {\r\n            position: 'absolute',\r\n            left: '0px',\r\n            top: '0px',\r\n        };\r\n\r\n        var localOuterStyle = {\r\n            position: 'relative',\r\n            height: '30vw',\r\n\r\n        };\r\n\r\n        var localCardStyle = { ...styles.cardStyle };\r\n\r\n        if (this.props.model.blinkFor > 0) {\r\n            localCardStyle.borderColor = 'red';\r\n        }\r\n\r\n        var offset = 0;\r\n\r\n        var getOffset = (index) => {\r\n            var i = 0;\r\n            while (i <= index) {\r\n                if (this.props.model.stack[i] && !this.props.model.stack[i].isHidden) {\r\n                    offset = i * 12 + (index - i) * 24\r\n                    return offset;\r\n                }\r\n                i++;\r\n            }\r\n            offset = index * 12;\r\n            return offset;\r\n        }\r\n\r\n        var shouldShowHand = () => {\r\n            return this.isTouch && this.props.hand.isHoldingCard() && this.props.hand.source == 'tableau-' + this.props.stackIndex;\r\n        }\r\n\r\n        var getLast = () => {\r\n            var ret = this.props.model.stack[this.props.model.stack.length - 1]\r\n            ret && (ret.isHidden = ret.isHidden);\r\n            return ret;\r\n        }\r\n\r\n        return (\r\n            <div style={localOuterStyle}>\r\n                <div style={localCardStyle} onClick={() => this.props.onClick(null, \"tableau-\" + this.props.stackIndex)}>&nbsp;</div>\r\n                {this.props.model.stack.map((card, index) => (\r\n                    <div style={localStyle}>\r\n                        <Card\r\n                            type={card.type}\r\n                            face={card.face}\r\n                            blink={this.props.model.blinkFor}\r\n                            offsetTop={getOffset(index)}\r\n                            source={card.source}\r\n                            isHidden={card.isHidden}\r\n                            canUncover={index == this.props.model.stack.length - 1}\r\n                            onClick={(c) => this.props.onClick(c, \"tableau-\" + this.props.stackIndex)}\r\n                        />\r\n                    </div>\r\n                ))}\r\n                {shouldShowHand() && (<Hand2\r\n                    offset={getOffset(this.props.model.stack.length)}\r\n                    stack={this.props.hand.stack}\r\n                    onClick={(c) => this.props.onClick(getLast(), \"tableau-\" + this.props.stackIndex)} />)}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import Card from './Card';\r\nimport Hand2 from './Hand2';\r\nimport TouchAwareComponent from './TouchAwareComponent';\r\nimport { targetStackStyle } from '../styles';\r\n\r\nexport default class Waste extends TouchAwareComponent {\r\n\r\n    render() {\r\n        var shouldShowHand = () => {\r\n            return this.isTouch && this.props.hand.isHoldingCard() && this.props.hand.source == 'waste';\r\n        }\r\n\r\n        var getOffset = () => 0;\r\n\r\n        //@todo cleanup css\r\n        var localStyle = {\r\n            position: 'absolute',\r\n            left: '0px',\r\n            top: '0px',\r\n        };\r\n        var localOuterStyle = {\r\n            position: 'relative',\r\n        };\r\n        var localBase = { ...targetStackStyle.cardStyle }\r\n        if (this.props.model.blinkFor > 0) {\r\n            localBase.borderColor = 'red';\r\n        }\r\n\r\n        return (\r\n            <div style={localOuterStyle}>\r\n                <div style={localBase} onClick={() => this.props.onClick()}>&nbsp;</div>\r\n                {this.props.model.stack.map((card, index) => (\r\n                    <div style={localStyle}>\r\n                        <Card type={card.type}\r\n                            face={card.face}\r\n                            blink={this.props.model.blinkFor}\r\n                            source=\"waste\"\r\n                            onClick={(c) => this.props.onClick(c)}\r\n                        />\r\n                    </div>\r\n\r\n                ))}\r\n                {shouldShowHand() && (<Hand2 offset={getOffset(this.props.model.stack.length)}\r\n                    stack={this.props.hand.stack} onClick={(c) => this.props.onClick(c, \"waste\")} />)}\r\n            </div>\r\n        );\r\n    }\r\n}","export default class Deck {\r\n    constructor(cards) {\r\n        this.cards = cards;\r\n    }\r\n\r\n    shuffle() {\r\n        this._shuffleArray(this.cards);\r\n        return this;\r\n    }\r\n\r\n    take(i) {\r\n        if (i) {\r\n            var taken = this.cards.slice(0, i);\r\n            this.cards = this.cards.slice(i);\r\n            return taken;\r\n        } else {\r\n            var taken = [...this.cards];\r\n            this.cards = [];\r\n            return taken;\r\n        }\r\n    }\r\n\r\n    // credits: https://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array\r\n    _shuffleArray(array) {\r\n        for (let i = array.length - 1; i > 0; i--) {\r\n            const j = Math.floor(Math.random() * (i + 1));\r\n            [array[i], array[j]] = [array[j], array[i]];\r\n        }\r\n    }\r\n}","const Suits = {\r\n    heart: {\r\n        icon: '',\r\n        color: 'red',\r\n    },\r\n    diamond: {\r\n        icon: '',\r\n        color: 'red',\r\n    },\r\n    club: {\r\n        icon: '',\r\n        color: 'black',\r\n    },\r\n    spade: {\r\n        icon: '',\r\n        color: 'black',\r\n    },\r\n};\r\n\r\nexport default Suits;","export default class Hand {\r\n\r\n    constructor() {\r\n        this.stack = [];\r\n        this.source = null;\r\n    }\r\n\r\n    pickUp(stack, source) {\r\n        this.stack = stack;\r\n        this.source = source;\r\n    }\r\n\r\n    putDown() {\r\n        var cards = [...this.stack]\r\n        this.stack = [];\r\n        this.source = null;\r\n        return cards;\r\n    }\r\n\r\n    isHoldingCard() {\r\n        return !!this.stack.length;\r\n    }\r\n\r\n    isHoldingKing() {\r\n        return this.currentCard() && this.currentCard().face == 'K'\r\n    }\r\n\r\n    isCurrentCard(card) {\r\n        return card && this.currentCard() == card;\r\n    }\r\n\r\n    currentCard() {\r\n        return this.isHoldingCard() && this.stack[0];\r\n    }\r\n\r\n    hasMoreThanOneCard() {\r\n        return this.stack.length > 1;\r\n    }\r\n\r\n    containsCurrentCard(stack) {\r\n        return stack && stack.indexOf(this.currentCard()) !== -1\r\n    }\r\n\r\n    isFromCurrentSource(card) {\r\n        return this.source && card.source == this.source;\r\n    }\r\n}","export default class Stock {\r\n    constructor(stack) {\r\n        this.stack = [...stack];\r\n    }\r\n\r\n    recycle(waste) {\r\n        if (waste.length) {\r\n            this.stack = [...waste].reverse().map(element => {\r\n                return { ...element, isHidden: true }\r\n            });\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    getTop() {\r\n        return this.stack[this.stack.length-1];\r\n    }\r\n}","import CardTools from \"../Deck/CardTools\";\r\n\r\nexport default class Waste {\r\n    constructor() {\r\n        this.stack = [];\r\n    }\r\n\r\n    tryPutDown(card) {\r\n        return this.canAdd(card) && (this.add(card) || true);\r\n    }\r\n\r\n    add(card) {\r\n        this.stack.push(card);\r\n    }\r\n\r\n    canAdd(card) {\r\n        var top = this.getTopCard();\r\n        return card  && (!top || CardTools.cardNotEquals(card, top));\r\n    }\r\n\r\n    getTopCard() {\r\n        return this.stack[this.stack.length - 1];\r\n    }\r\n\r\n    filterOut(card) {\r\n        this.stack = CardTools.filterNotEqual(this.stack, card);\r\n    }\r\n\r\n    recycle() {\r\n        var ret = [...this.stack];\r\n        this.stack = [];\r\n        return ret;\r\n    }\r\n}","import CardTools from \"../Deck/CardTools\";\r\n\r\nexport default class Foundation {\r\n    constructor(stacks) {\r\n        this.stacks = stacks;\r\n    }\r\n\r\n    filterOut(card) {\r\n        this.stacks = CardTools.filterOut(this.stacks, card);\r\n    }\r\n\r\n    getCurrentAccepted(index) {\r\n        var currentFoundation = this.stacks[index].acceptedCards;\r\n        return currentFoundation[currentFoundation.length - 1];\r\n    }\r\n\r\n    accepts(index, card) {\r\n        var currentAccepted = this.getCurrentAccepted(index);\r\n        return this.stacks[index].icon == card.type.icon && currentAccepted == card.face\r\n    }\r\n\r\n    contains(index, card) {\r\n        return this.stacks[index].stack.indexOf(card) !== -1\r\n    }\r\n\r\n    add(index, card) {\r\n        card.source = 'foundation-' + index\r\n        this.stacks[index].stack.push(card);\r\n        this.stacks[index].usedCards.push(this.stacks[index].acceptedCards.pop());\r\n    }\r\n\r\n    remove(index, card) {\r\n        this.filterOut(card)\r\n        this.stacks[index].acceptedCards.push(this.stacks[index].usedCards.pop());\r\n    }\r\n\r\n    getTop(index) {\r\n        return this.stacks[index].stack[this.stacks[index].stack.length - 1]\r\n    }\r\n\r\n    getPreviousUsed(index) {\r\n        return [...this.stacks[index].usedCards].pop();\r\n    }\r\n}","import { getTargetOrder } from \"../Deck/CardRange\";\r\n\r\nexport default class FoundationStack {\r\n    constructor(icon, color) {\r\n        this.stack = [];\r\n        this.acceptedCards = [...getTargetOrder()];\r\n        this.usedCards = [];\r\n        this.icon = icon;\r\n        this.color = color;\r\n    }\r\n\r\n}","import CardTools from \"../Deck/CardTools\";\r\n\r\nexport default class Tableau {\r\n    constructor(stacks) {\r\n        this.stacks = stacks;\r\n    }\r\n\r\n    getStack(index) {\r\n        return this.stacks[index];\r\n    }\r\n\r\n    findFollowing(card) {\r\n        for (var i = 0; i < this.stacks.length; i++) {\r\n            for (var j = 0; j < this.stacks[i].stack.length; j++) {\r\n                //@todo use cardtools\r\n                if (card && this.stacks[i].stack[j].face == card.face && this.stacks[i].stack[j].type.icon == card.type.icon) {\r\n                    return this.stacks[i].stack.slice(j + 1, this.stacks[i].stack.length)\r\n                }\r\n            }\r\n        }\r\n        return [];\r\n    }\r\n\r\n    filterOut = (cards) => {\r\n        return cards.map(card => CardTools.filterOut(this.stacks, card))\r\n    }\r\n\r\n    uncover(index, card) {\r\n        for (var i = 0; i < this.stacks[index].stack.length; i++) {\r\n            if (CardTools.cardEquals(this.stacks[index].stack[i], card) && this.stacks[index].stack[i].isHidden) {\r\n                this.stacks[index].stack[i].isHidden = false;\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    add(index, card) {\r\n        if (Array.isArray(card)) {\r\n            card = card.map(c => { c.source = 'tableau-' + index; return c; });\r\n            this.stacks[index].stack = this.stacks[index].stack.concat(card);\r\n        } else {\r\n            card.source = 'tableau-' + index\r\n            this.stacks[index].stack.push(card);\r\n        }\r\n    }\r\n}","import Tableau from \"./Tableau\";\r\n\r\nclass TableauGenerator {\r\n\r\n    getStacks = (deck) => {\r\n        this.deck = deck;\r\n        this.pointer = 0;\r\n        this.oldpointer = this.pointer;\r\n        var ids = [0, 1, 2, 3, 4, 5, 6];\r\n        this.stacks = ids.map(id => this._getStack(id));\r\n        ids.reverse().forEach(id => {\r\n            this._generateStack(id);\r\n        })\r\n        return this.stacks;\r\n    }\r\n\r\n    _generateStack = (id) => {\r\n        this.pointer += 6 - id + 1;\r\n        this.stacks[id].stack = this.deck.slice(this.oldpointer, this.pointer).map(c => {\r\n            c.isHidden = true;\r\n            c.source = 'tableau-' + id;\r\n            return c;\r\n        }).reverse();\r\n        if (this.stacks[id].stack[this.stacks[id].stack.length - 1]) {\r\n            this.stacks[id].stack[this.stacks[id].stack.length - 1].isHidden = false;\r\n        }\r\n        this.oldpointer = this.pointer;\r\n    }\r\n\r\n    _getRndInteger = (min, max) => {\r\n        return Math.floor(Math.random() * (max - min)) + min;\r\n    }\r\n\r\n    _getStack = (id) => {\r\n        var template = { stack: [], id };\r\n        //@todo add functionality\r\n        return { ...template };\r\n    }\r\n}\r\n\r\nexport default function generateTableau(cards) {\r\n    return new Tableau(new TableauGenerator().getStacks(cards));\r\n}","import Hand from './Game/Hand';\r\nimport Stock from './Game/Stock';\r\nimport Waste from './Game/Waste';\r\nimport generateFoundations from './Game/FoundationGenerator';\r\nimport generateTableau from './Game/TableauGenerator';\r\n\r\nconst getInitialState = (deck) => {\r\n    return {\r\n        stock: new Stock(deck.cards.slice(28)),\r\n        waste: new Waste(),\r\n        foundation: generateFoundations(),\r\n        tableau: generateTableau(deck.cards.slice(0,28)),\r\n\r\n        hand: new Hand(),\r\n\r\n        //todo move to status or game/party/action substate\r\n        currentMove: null,\r\n        moves: [],\r\n        points: 0,\r\n        started: Date.now(),\r\n    };\r\n}\r\n\r\nexport default getInitialState","import Foundation from './Foundation';\r\nimport FoundationStack from './FoundationStack';\r\nimport Suits from '../Deck/Suits';\r\n\r\nexport default function generateFoundations() {\r\n    return new Foundation(Object.keys(Suits)\r\n        .map(key => Suits[key])\r\n        .map(suit => new FoundationStack(suit.icon, suit.color)));\r\n}","import '../App.css';\r\n\r\nimport { Component } from 'react';\r\nimport Footer from './Footer';\r\nimport Foundation from './Foundation';\r\nimport Hand from './Hand';\r\nimport Service from '../Service/Facade';\r\nimport Stock from './Stock';\r\nimport TableauStack from './TableauStack';\r\nimport Waste from './Waste';\r\nimport generateDeck from '../Model/Deck/DeckGenerator';\r\nimport getInitialState from '../Model/getInitialState';\r\nimport { styles } from '../styles';\r\n\r\nclass Solitaire extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.deck = generateDeck();\r\n    this.deck.shuffle();\r\n    this.state = getInitialState(this.deck);\r\n    this.service = new Service(this);\r\n  }\r\n\r\n  reset = () => this.setState(() => ({ ...getInitialState(this.deck) }))\r\n\r\n  render() {\r\n    const style = styles.solitaire;\r\n    return (\r\n      <div style={style.table} >\r\n        <Hand stack={this.state.hand.stack} />\r\n        <div className=\"grid-container\">\r\n\r\n          <div className=\"stock\">\r\n            <Stock\r\n              onClick={this.service.clickStock}\r\n              model={this.state.stock} />\r\n          </div>\r\n          <div className=\"waste\">\r\n            <Waste\r\n              onClick={this.service.clickWaste}\r\n              hand={this.state.hand}\r\n              model={this.state.waste} />\r\n          </div>\r\n          <div className=\"spacer\">&nbsp;</div>\r\n          {this.state.foundation.stacks.map((foundation, index) => (\r\n            <div className={\"f\" + index}>\r\n\r\n              <Foundation\r\n                model={foundation}\r\n                index={index}\r\n                hand={this.state.hand}\r\n                onClick={(c) => this.service.clickFoundation(index, c)}\r\n              />\r\n\r\n            </div>\r\n          ))}\r\n          {this.state.tableau.stacks.map((stack, index) => (\r\n            <div className={\"t\" + index}>\r\n\r\n              <TableauStack\r\n                stackIndex={index}\r\n                model={stack}\r\n                hand={this.state.hand}\r\n                onClick={(card, source) => this.service.clickTableauStack(card, index, source)}\r\n              />\r\n            </div>\r\n          ))}\r\n\r\n          <div className=\"footer\">\r\n            <Footer end={this.state.end}\r\n              started={this.state.started}\r\n              points={this.state.points}\r\n              isEnded={this.state.isEnded} />\r\n            <button variant=\"secondary\" onClick={this.reset}>reset</button>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nexport default Solitaire;","import { CardRange } from './CardRange';\r\nimport Deck from './Deck';\r\nimport Suits from './Suits';\r\n\r\nexport default function generateDeck() {\r\n    var deck = [];\r\n    var keys = Object.keys(Suits);\r\n    for (var i = 0; i < CardRange.length; i++) {\r\n        for (var j = 0; j < keys.length; j++) {\r\n            var suit = Suits[keys[j]];\r\n            var key = CardRange[i] + \"\" + suit.icon;\r\n            deck.push({\r\n                face: CardRange[i],\r\n                type: suit,\r\n                key: key,\r\n                isHidden: true,\r\n                toString: () => key,\r\n                //@todo add functionality\r\n            });\r\n        }\r\n    }\r\n    return new Deck(deck);\r\n}","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import './index.css';\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Solitaire from './View/Solitaire';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Solitaire />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}