{"version":3,"sources":["../../src/index.ts","../node_modules/dnd-multi-backend/dist/esm/createTransition.js","../node_modules/dnd-multi-backend/dist/esm/Transitions.js","../node_modules/dnd-multi-backend/dist/esm/PreviewList.js","../node_modules/dnd-multi-backend/dist/esm/MultiBackend.js","../node_modules/dnd-multi-backend/dist/esm/index.js","../node_modules/react-dnd/dist/esm/hooks/internal/useIsomorphicLayoutEffect.js","../node_modules/react-dnd/dist/esm/hooks/useDragLayer.js","../node_modules/react-dnd-preview/dist/esm/usePreview.js","../node_modules/react-dnd-preview/dist/esm/Context.js","../node_modules/react-dnd-preview/dist/esm/Preview.js","../node_modules/react-dnd-preview/dist/esm/index.js","../node_modules/webpack/buildin/global.js","../node_modules/react-dnd/dist/esm/hooks/useDragDropManager.js","../node_modules/react-dnd/dist/esm/hooks/internal/useCollector.js","../node_modules/react-dnd/dist/esm/utils/isRef.js","../node_modules/react-dnd/dist/esm/common/registration.js","../node_modules/react-dnd/dist/esm/hooks/internal/useMonitorOutput.js","../node_modules/react-dnd-html5-backend/dist/esm/getEmptyImage.js","../node_modules/redux/es/redux.js","../node_modules/dnd-core/dist/esm/actions/dragDrop/types.js","../node_modules/dnd-core/dist/esm/utils/equality.js","../node_modules/dnd-core/dist/esm/reducers/dragOffset.js","../node_modules/dnd-core/dist/esm/actions/registry.js","../node_modules/dnd-core/dist/esm/utils/js_utils.js","../node_modules/dnd-core/dist/esm/reducers/dragOperation.js","../node_modules/dnd-core/dist/esm/reducers/refCount.js","../node_modules/dnd-core/dist/esm/utils/dirtiness.js","../node_modules/dnd-core/dist/esm/reducers/dirtyHandlerIds.js","../node_modules/dnd-core/dist/esm/reducers/stateId.js","../node_modules/dnd-core/dist/esm/reducers/index.js","../node_modules/dnd-core/dist/esm/actions/dragDrop/local/setClientOffset.js","../node_modules/dnd-core/dist/esm/actions/dragDrop/beginDrag.js","../node_modules/dnd-core/dist/esm/actions/dragDrop/publishDragSource.js","../node_modules/dnd-core/dist/esm/utils/matchesType.js","../node_modules/dnd-core/dist/esm/actions/dragDrop/hover.js","../node_modules/dnd-core/dist/esm/actions/dragDrop/drop.js","../node_modules/dnd-core/dist/esm/actions/dragDrop/endDrag.js","../node_modules/dnd-core/dist/esm/utils/coords.js","../node_modules/dnd-core/dist/esm/DragDropMonitorImpl.js","../node_modules/dnd-core/dist/esm/interfaces.js","../node_modules/dnd-core/dist/esm/utils/getNextUniqueId.js","../node_modules/dnd-core/dist/esm/contracts.js","../node_modules/@react-dnd/asap/dist/esm/browser/asap.js","../node_modules/dnd-core/dist/esm/HandlerRegistryImpl.js","../node_modules/dnd-core/dist/esm/DragDropManagerImpl.js","../node_modules/dnd-core/dist/esm/actions/dragDrop/index.js","../node_modules/dnd-core/dist/esm/factories.js","../node_modules/react-dnd/dist/esm/common/DndContext.js","../node_modules/react-dnd-html5-backend/dist/esm/utils/js_utils.js","../node_modules/react-dnd-html5-backend/dist/esm/EnterLeaveCounter.js","../node_modules/react-dnd-html5-backend/dist/esm/BrowserDetector.js","../node_modules/react-dnd-html5-backend/dist/esm/MonotonicInterpolant.js","../node_modules/react-dnd-html5-backend/dist/esm/OffsetUtils.js","../node_modules/react-dnd-html5-backend/dist/esm/NativeTypes.js","../node_modules/react-dnd-html5-backend/dist/esm/NativeDragSources/nativeTypesConfig.js","../node_modules/react-dnd-html5-backend/dist/esm/NativeDragSources/getDataFromDataTransfer.js","../node_modules/react-dnd-html5-backend/dist/esm/NativeDragSources/NativeDragSource.js","../node_modules/react-dnd-html5-backend/dist/esm/NativeDragSources/index.js","../node_modules/react-dnd-html5-backend/dist/esm/OptionsReader.js","../node_modules/react-dnd-html5-backend/dist/esm/HTML5BackendImpl.js","../node_modules/react-dnd-html5-backend/dist/esm/index.js","../node_modules/react-dnd/dist/esm/utils/cloneWithRef.js","../node_modules/react-dnd/dist/esm/common/wrapConnectorHooks.js","../node_modules/symbol-observable/es/index.js","../node_modules/webpack/buildin/harmony-module.js","../node_modules/symbol-observable/es/ponyfill.js","../node_modules/@react-dnd/asap/dist/esm/browser/raw.js","../node_modules/react-dnd-touch-backend/dist/esm/interfaces.js","../node_modules/react-dnd-touch-backend/dist/esm/utils/predicates.js","../node_modules/react-dnd-touch-backend/dist/esm/utils/offsets.js","../node_modules/react-dnd-touch-backend/dist/esm/utils/supportsPassive.js","../node_modules/react-dnd-touch-backend/dist/esm/OptionsReader.js","../node_modules/react-dnd-touch-backend/dist/esm/TouchBackendImpl.js","../node_modules/react-dnd-touch-backend/dist/esm/utils/math.js","../node_modules/react-dnd-multi-backend/dist/esm/HTML5toTouch.js","../node_modules/react-dnd-touch-backend/dist/esm/index.js","../node_modules/react-dnd-multi-backend/dist/esm/components/DndProvider.js","../node_modules/react-dnd-multi-backend/dist/esm/common.js","../node_modules/react-dnd-multi-backend/dist/esm/components/Preview.js","../node_modules/react-dnd/dist/esm/common/DndProvider.js","../node_modules/react-dnd/dist/esm/common/DragSourceMonitorImpl.js","../node_modules/react-dnd/dist/esm/common/SourceConnector.js","../node_modules/react-dnd/dist/esm/hooks/internal/drag.js","../node_modules/react-dnd/dist/esm/hooks/useDrag.js","../node_modules/react-dnd/dist/esm/common/TargetConnector.js","../node_modules/react-dnd/dist/esm/common/DropTargetMonitorImpl.js","../node_modules/react-dnd/dist/esm/hooks/internal/drop.js","../node_modules/react-dnd/dist/esm/hooks/useDrop.js"],"names":["invariant","condition","format","args","error","argIndex","event","check","_isMBTransition","TouchTransition","createTransition","touches","MouseTransition","type","indexOf","_createForOfIteratorHelper","o","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","i","F","s","length","done","value","e","_e","f","TypeError","it","err","normalCompletion","didErr","step","next","_e2","return","arr","len","arr2","PreviewList","_this","this","instance","Constructor","_classCallCheck","register","preview","previews","push","unregister","index","splice","backendChanged","backend","_step","_iterator","_toConsumableArray","_arrayWithoutHoles","iter","_iterableToArray","_nonIterableSpread","_default","manager","context","sourceOptions","setup","window","isSetUp","Error","addEventListeners","backends","current","teardown","removeEventListeners","connectDragSource","_len","arguments","_key","connectBackend","connectDragPreview","_len2","_key2","connectDropTarget","_len3","_key3","previewEnabled","target","forEach","transition","addEventListener","backendSwitcher","removeEventListener","oldBackend","some","keys","nodes","id","node","handler","callBackend","func","newBackend","skipDispatchOnTransition","newEvent","document","createEvent","initEvent","bubbles","cancelable","dispatchEvent","_this$backends$_this$","apply","nodeId","concat","_this$nodes$nodeId","r","options","assign","Boolean","MultiBackend","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","_slicedToArray","_arrayWithHoles","_arr","_n","_d","undefined","_s","_i","_iterableToArrayLimit","_nonIterableRest","getStyle","currentOffset","transform","x","y","pointerEvents","position","top","left","WebkitTransform","usePreview","collectedProps","collect","monitor","useDragDropManager","getMonitor","_useCollector2","useCollector","collected","updateCollected","subscribeToOffsetChange","subscribeToStateChange","useDragLayer","getSourceClientOffset","isDragging","itemType","getItemType","item","getItem","display","style","Context","React","createContext","_objectWithoutProperties","source","excluded","key","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","Preview","props","child","_usePreview","data","children","generator","createElement","Provider","propTypes","PropTypes","oneOfType","g","Function","module","exports","dragDropManager","useContext","DndContext","shallowEqual","objA","objB","compare","compareContext","compareResult","keysA","keysB","bHasOwnProperty","idx","valueA","valueB","onUpdate","_useState2","useState","setCollected","useCallback","nextValue","_typeof","obj","isRef","hasOwnProperty","registerTarget","registry","getRegistry","targetId","addTarget","removeTarget","registerSource","sourceId","addSource","removeSource","useMonitorOutput","onCollect","handlerId","getHandlerId","handlerIds","emptyImage","getEmptyImage","Image","src","randomString","Math","random","substring","split","join","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","isPlainObject","proto","getPrototypeOf","createStore","reducer","preloadedState","enhancer","_ref2","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","getState","subscribe","listener","isSubscribed","dispatch","action","listeners","replaceReducer","nextReducer","observable","_ref","outerSubscribe","observer","observeState","unsubscribe","$$observable","INIT_COORDS","BEGIN_DRAG","PUBLISH_DRAG_SOURCE","HOVER","DROP","END_DRAG","strictEquality","a","b","areCoordsEqual","offsetA","offsetB","areArraysEqual","isEqual","ownKeys","object","enumerableOnly","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","_objectSpread","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","configurable","writable","initialState","initialSourceClientOffset","initialClientOffset","clientOffset","reduce","state","payload","sourceClientOffset","ADD_SOURCE","ADD_TARGET","REMOVE_SOURCE","REMOVE_TARGET","get","path","defaultValue","c","without","items","isObject","input","xor","itemsA","itemsB","map","Map","insertItem","set","has","result","count","targetIds","dropResult","didDrop","isSourcePublic","NONE","ALL","areDirty","dirtyIds","t","_action$payload","_action$payload$targe","_action$payload$prevT","prevTargetIds","didChange","prevInnermostTargetId","innermostTargetId","dirtyHandlerIds","dragOffset","refCount","dragOperation","stateId","__IS_NONE__","__IS_ALL__","setClientOffset","ResetCoordinatesAction","createBeginDrag","sourceIds","publishSource","_options$publishSourc","verifyInvariants","getDraggableSource","verifyGetSourceClientOffsetIsFunction","getSource","beginDrag","verifyItemIsObject","pinSource","getSourceType","canDragSource","createPublishDragSource","matchesType","targetType","draggedItemType","createHover","targetIdsArg","verifyTargetIdsIsArray","checkInvariants","removeNonMatchingTargetIds","hoverAllTargets","lastIndexOf","getTarget","getTargetType","hover","createDrop","getDroppableTargets","determineDropResult","drop","verifyDropResultType","getDropResult","getTargetIds","canDropOnTarget","reverse","createEndDrag","verifyIsDragging","getSourceId","endDrag","unpinSource","subtract","_defineProperties","descriptor","HandlerRole","DragDropMonitorImpl","store","protoProps","staticProps","prevStateId","handleChange","currentStateId","_this2","previousState","nextState","canDrag","canDrop","shallow","_getSourceClientOffset","_getDifferenceFromInitialOffset","nextUniqueId","validateType","allowArray","freeTasks","pendingErrors","requestErrorThrow","rawAsap","makeRequestCallFromTimer","shift","asap","task","rawTask","pop","RawTask","onerror","getNextHandlerId","role","SOURCE","TARGET","parseRoleFromHandlerId","mapContainsValue","searchValue","entries","isDone","_entries$next","HandlerRegistryImpl","types","dragSources","dropTargets","pinnedSourceId","pinnedSource","validateSourceContract","addHandler","_addSource","validateTargetContract","_addTarget","includePinned","isSourceId","isPinned","isTargetId","_removeSource","delete","_removeTarget","makeStoreInstance","debugMode","reduxDevTools","__REDUX_DEVTOOLS_EXTENSION__","instanceId","DragDropManagerImpl","handleRefCountChange","shouldSetUp","actions","publishDragSource","createDragDropActions","boundActions","actionCreator","createDragDropManager","backendFactory","globalContext","backendOptions","receiveBackend","createDndContext","memoize","fn","EnterLeaveCounter","isNodeInDocument","entered","enteringNode","previousLength","Set","add","union","contains","leavingNode","isFirefox","navigator","userAgent","isSafari","safari","MonotonicInterpolant","xs","ys","indexes","sort","dx","dy","dys","dxs","ms","c1s","_i2","m2","mNext","dxNext","common","m","c2s","c3s","_i3","c1","invDx","_common","mid","low","high","xHere","floor","diff","max","diffSq","getNodeClientOffset","el","nodeType","parentElement","_el$getBoundingClient","getBoundingClientRect","getEventClientOffset","clientX","clientY","getDragPreviewOffset","sourceNode","dragPreview","anchorPoint","offsetPoint","isImage","_document$documentEle","nodeName","documentElement","isImageNode","dragPreviewNodeOffsetFromClient","offsetFromDragPreview","sourceWidth","offsetWidth","sourceHeight","offsetHeight","anchorX","anchorY","_getDragPreviewSize","dragPreviewWidth","width","dragPreviewHeight","height","devicePixelRatio","getDragPreviewSize","offsetX","offsetY","isManualOffsetY","interpolate","calculateYOffset","_nativeTypesConfig","FILE","URL","TEXT","getDataFromDataTransfer","dataTransfer","typesToTry","resultSoFar","typeToTry","getData","nativeTypesConfig","NativeTypes","exposeProperties","files","matchesTypes","urls","text","NativeDragSource","config","initializeExposedProperties","property","console","warn","newProperties","handle","matchNativeItemType","dataTransferTypes","nativeItemType","OptionsReader","HTML5BackendImpl","sourcePreviewNodes","sourcePreviewNodeOptions","sourceNodes","sourceNodeOptions","dragStartSourceIds","dropTargetIds","dragEnterTargetIds","currentNativeSource","currentNativeHandle","currentDragSourceNode","altKeyPressed","mouseMoveTimeoutTimer","asyncEndDragFrameId","dragOverTargetIds","endDragNativeItem","isDraggingNativeItem","body","endDragIfSourceWasRemovedFromDOM","clearCurrentDragSourceNode","handleTopDragStartCapture","handleTopDragStart","defaultPrevented","nativeType","setDragImage","_this$getCurrentSourc","getCurrentSourcePreviewNodeOptions","dragPreviewOffset","setData","setCurrentDragSourceNode","captureDraggingState","setTimeout","beginDragNativeItem","hasAttribute","preventDefault","handleTopDragEndCapture","handleTopDragEnterCapture","enterLeaveCounter","enter","handleTopDragEnter","altKey","dropEffect","getCurrentDropEffect","handleTopDragOverCapture","handleTopDragOver","handleTopDragLeaveCapture","leave","handleTopDropCapture","_this$currentNativeSo","loadDataTransfer","reset","handleTopDrop","handleSelectStart","dragDrop","tagName","isContentEditable","getActions","_this$dragStartSource","_this$dragOverTargetI","size","__isReactDndBackendSetUp","cancelAnimationFrame","_this3","handleDragStart","setAttribute","_this4","handleDragEnter","handleDragOver","handleDrop","getCurrentSourceNodeOptions","createNativeDragSource","_this5","clearTimeout","unshift","HTML5Backend","setRef","ref","cloneWithRef","element","newRef","previousRef","cloneElement","throwIfCompositeComponentElement","displayName","wrapConnectorHooks","hooks","wrappedHooks","hook","endsWith","wrappedHook","elementOrNode","isValidElement","wrapHookToRecognizeElement","root","self","global","ponyfill","originalModule","webpackPolyfill","create","l","symbolObservablePonyfill","queue","requestFlush","flush","currentIndex","scan","newLength","scope","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","callback","timeoutHandle","handleTimer","intervalHandle","setInterval","clearInterval","toggle","createTextNode","observe","characterData","makeRequestCallFromMutationObserver","ListenerType","MouseButtons","MouseButton","eventShouldStartDrag","button","isTouchEvent","targetTouches","lastTargetTouchFallback","getEventClientTouchOffset","supportsPassive","supported","_eventNames","incoming","enableTouchEvents","enableMouseEvents","enableKeyboardEvents","ignoreContextMenu","enableHoverOutsideTarget","touchSlop","scrollAngleRanges","delayTouchStart","delay","delayMouseStart","eventNames","mouse","start","move","end","contextmenu","touch","keyboard","keydown","TouchBackendImpl","handleTopMoveStartCapture","moveStartSourceIds","handleMoveStart","handleTopMoveStart","_mouseClientOffset","waitingForDelay","handleTopMoveStartDelay","timeout","bind","handleTopMoveCapture","handleMove","_evt","handleTopMove","x1","y1","x2","y2","_isScrolling","angleRanges","angle","atan2","PI","inAngleRanges","sqrt","pow","abs","installSourceNodeRemovalObserver","dragOverTargetNodes","targetNodes","elementsAtPoint","getDropTargetElementsAtPoint","elementsFromPoint","elementsAtPointExtended","currentNode","orderedDragOverTargetIds","_getDropTargetId","ids","targetNode","handleTopMoveEndCapture","buttons","eventShouldEndDrag","uninstallSourceNodeRemovalObserver","handleCancelOnEscape","listenerTypes","getTopMoveStartHandler","subject","capture","passive","listenerType","evt","coords","droppedOn","elementFromPoint","childMatch","draggedSourceNode","draggedSourceNodeRemovalObserver","resurrectSourceNode","childList","removeAttribute","appendChild","disconnect","_extends","PreviewPortalContext","DndProvider","previewPortal","useRef","ReactDndProvider","any","bool","useObservePreviews","enabled","setEnabled","dndContext","getBackend","cbackend","portal","DnDPreview","ReactDOM","createPortal","PreviewContext","memo","_getDndContextValue2","getGlobalContext","ctx","instanceSymbol","createSingletonDndContext","isGlobalInstance","getDndContextValue","for","isCallingCanDrag","isCallingIsDragging","DragSourceMonitorImpl","internalMonitor","isDraggingSource","isOverTarget","getInitialClientOffset","getInitialSourceClientOffset","getClientOffset","getDifferenceFromInitialOffset","SourceConnector","dragSource","clearDragSource","dragSourceOptions","dragSourceRef","dragSourceNode","reconnectDragSource","clearDragPreview","dragPreviewOptions","dragPreviewRef","dragPreviewNode","reconnectDragPreview","dragSourceOptionsInternal","dragPreviewOptionsInternal","lastConnectedHandlerId","lastConnectedDragSource","lastConnectedDragSourceOptions","lastConnectedDragPreview","lastConnectedDragPreviewOptions","newHandlerId","reconnect","didHandlerIdChange","didConnectedDragSourceChange","didDragSourceOptionsChange","disconnectDragSource","dragSourceUnsubscribe","didConnectedDragPreviewChange","didDragPreviewOptionsChange","disconnectDragPreview","dragPreviewUnsubscribe","useDrag","spec","specRef","_useDragSourceMonitor2","useMemo","useDragSourceMonitor","connector","_spec$current","begin","beginResult","globalMonitor","_registerSource2","receiveHandlerId","useDragHandler","previewOptions","TargetConnector","dropTarget","clearDropTarget","dropTargetOptions","dropTargetRef","dropTargetNode","dropTargetOptionsInternal","lastConnectedDropTarget","lastConnectedDropTargetOptions","didDropTargetChange","didOptionsChange","disconnectDropTarget","unsubscribeDropTarget","isCallingCanDrop","DropTargetMonitorImpl","useDrop","accept","_useDropTargetMonitor2","useDropTargetMonitor","_registerTarget2","useDropHandler"],"mappings":"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","file":"static/js/3.6dd59242.chunk.js","sourcesContent":["export function shallowEqual<T>(\n  objA: T,\n  objB: T,\n  compare?: (a: T, b: T, key?: string) => boolean | void,\n  compareContext?: any\n) {\n  var compareResult = compare\n    ? compare.call(compareContext, objA, objB)\n    : void 0;\n  if (compareResult !== void 0) {\n    return !!compareResult;\n  }\n\n  if (objA === objB) {\n    return true;\n  }\n\n  if (typeof objA !== 'object' || !objA || typeof objB !== 'object' || !objB) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  var bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB);\n\n  // Test for A's keys different from B.\n  for (var idx = 0; idx < keysA.length; idx++) {\n    var key = keysA[idx];\n\n    if (!bHasOwnProperty(key)) {\n      return false;\n    }\n\n    var valueA = (objA as any)[key];\n    var valueB = (objB as any)[key];\n\n    compareResult = compare\n      ? compare.call(compareContext, valueA, valueB, key)\n      : void 0;\n\n    if (\n      compareResult === false ||\n      (compareResult === void 0 && valueA !== valueB)\n    ) {\n      return false;\n    }\n  }\n\n  return true;\n}\n","export default (function (event, check) {\n  return {\n    _isMBTransition: true,\n    event: event,\n    check: check\n  };\n});","import createTransition from './createTransition';\nexport var TouchTransition = createTransition('touchstart', function (event) {\n  return event.touches != null; // eslint-disable-line no-eq-null, eqeqeq\n});\nexport var HTML5DragTransition = createTransition('dragstart', function (event) {\n  if (event.type) {\n    return event.type.indexOf('drag') !== -1 || event.type.indexOf('drop') !== -1;\n  }\n\n  return false;\n});\nexport var MouseTransition = createTransition('mousedown', function (event) {\n  if (event.type) {\n    return event.type.indexOf('touch') === -1 && event.type.indexOf('mouse') !== -1;\n  }\n\n  return false;\n});","function _createForOfIteratorHelper(o) { if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar PreviewList = function PreviewList() {\n  var _this = this;\n\n  _classCallCheck(this, PreviewList);\n\n  this.register = function (preview) {\n    _this.previews.push(preview);\n  };\n\n  this.unregister = function (preview) {\n    var index;\n\n    while ((index = _this.previews.indexOf(preview)) !== -1) {\n      _this.previews.splice(index, 1);\n    }\n  };\n\n  this.backendChanged = function (backend) {\n    var _iterator = _createForOfIteratorHelper(_this.previews),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var preview = _step.value;\n        preview.backendChanged(backend);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  };\n\n  this.previews = [];\n};\n\nexport { PreviewList };","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport { PreviewList } from './PreviewList';\n\nvar _default = function _default(manager, context, sourceOptions) {\n  var _this = this;\n\n  _classCallCheck(this, _default);\n\n  this.setup = function () {\n    if (typeof window === 'undefined') {\n      return;\n    }\n\n    if (_this.constructor.isSetUp) {\n      throw new Error('Cannot have two MultiBackends at the same time.');\n    }\n\n    _this.constructor.isSetUp = true;\n\n    _this.addEventListeners(window);\n\n    _this.backends[_this.current].instance.setup();\n  };\n\n  this.teardown = function () {\n    if (typeof window === 'undefined') {\n      return;\n    }\n\n    _this.constructor.isSetUp = false;\n\n    _this.removeEventListeners(window);\n\n    _this.backends[_this.current].instance.teardown();\n  };\n\n  this.connectDragSource = function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _this.connectBackend('connectDragSource', args);\n  };\n\n  this.connectDragPreview = function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return _this.connectBackend('connectDragPreview', args);\n  };\n\n  this.connectDropTarget = function () {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    return _this.connectBackend('connectDropTarget', args);\n  };\n\n  this.previewEnabled = function () {\n    return _this.backends[_this.current].preview;\n  };\n\n  this.addEventListeners = function (target) {\n    _this.backends.forEach(function (backend) {\n      if (backend.transition) {\n        target.addEventListener(backend.transition.event, _this.backendSwitcher, true);\n      }\n    });\n  };\n\n  this.removeEventListeners = function (target) {\n    _this.backends.forEach(function (backend) {\n      if (backend.transition) {\n        target.removeEventListener(backend.transition.event, _this.backendSwitcher, true);\n      }\n    });\n  };\n\n  this.backendSwitcher = function (event) {\n    var oldBackend = _this.current;\n    var i = 0;\n\n    _this.backends.some(function (backend) {\n      if (i !== _this.current && backend.transition && backend.transition.check(event)) {\n        _this.current = i;\n        return true;\n      }\n\n      i += 1;\n      return false;\n    });\n\n    if (_this.current !== oldBackend) {\n      _this.backends[oldBackend].instance.teardown();\n\n      Object.keys(_this.nodes).forEach(function (id) {\n        var node = _this.nodes[id];\n        node.handler();\n        node.handler = _this.callBackend(node.func, node.args);\n      });\n\n      _this.previews.backendChanged(_this);\n\n      var newBackend = _this.backends[_this.current];\n      newBackend.instance.setup();\n\n      if (newBackend.skipDispatchOnTransition) {\n        return;\n      }\n\n      var newEvent = null;\n\n      try {\n        newEvent = new event.constructor(event.type, event);\n      } catch (_e) {\n        newEvent = document.createEvent('Event');\n        newEvent.initEvent(event.type, event.bubbles, event.cancelable);\n      }\n\n      event.target.dispatchEvent(newEvent);\n    }\n  };\n\n  this.callBackend = function (func, args) {\n    var _this$backends$_this$;\n\n    return (_this$backends$_this$ = _this.backends[_this.current].instance)[func].apply(_this$backends$_this$, _toConsumableArray(args));\n  };\n\n  this.connectBackend = function (func, args) {\n    var nodeId = \"\".concat(func, \"_\").concat(args[0]);\n\n    var handler = _this.callBackend(func, args);\n\n    _this.nodes[nodeId] = {\n      func: func,\n      args: args,\n      handler: handler\n    };\n    return function () {\n      var _this$nodes$nodeId;\n\n      var r = (_this$nodes$nodeId = _this.nodes[nodeId]).handler.apply(_this$nodes$nodeId, arguments);\n\n      delete _this.nodes[nodeId];\n      return r;\n    };\n  };\n\n  var options = Object.assign({\n    backends: []\n  }, sourceOptions || {});\n\n  if (options.backends.length < 1) {\n    throw new Error(\"You must specify at least one Backend, if you are coming from 2.x.x (or don't understand this error)\\n        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-2xx\");\n  }\n\n  this.current = 0;\n  this.previews = new PreviewList();\n  this.backends = [];\n  options.backends.forEach(function (backend) {\n    if (!backend.backend) {\n      throw new Error(\"You must specify a 'backend' property in your Backend entry: \".concat(backend));\n    }\n\n    var transition = backend.transition;\n\n    if (transition && !transition._isMBTransition) {\n      throw new Error(\"You must specify a valid 'transition' property (either undefined or the return of 'createTransition') in your Backend entry: \".concat(backend));\n    }\n\n    _this.backends.push({\n      instance: backend.backend(manager, context, backend.options),\n      preview: backend.preview || false,\n      transition: transition,\n      skipDispatchOnTransition: Boolean(backend.skipDispatchOnTransition)\n    });\n  });\n  this.nodes = {};\n} // DnD Backend API\n;\n\nexport { _default as default };","export { HTML5DragTransition, TouchTransition, MouseTransition } from './Transitions';\nexport { default as createTransition } from './createTransition';\nexport { PreviewList } from './PreviewList';\nimport MultiBackend from './MultiBackend';\nexport { MultiBackend };\nexport default (function (manager, context, options) {\n  return new MultiBackend(manager, context, options);\n});","import { useLayoutEffect, useEffect } from 'react'; // suppress the useLayoutEffect warning on server side.\n\nexport var useIsomorphicLayoutEffect = typeof window !== 'undefined' ? useLayoutEffect : useEffect;","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { useEffect } from 'react';\nimport { useDragDropManager } from './useDragDropManager';\nimport { useCollector } from './internal/useCollector';\n/**\n * useDragLayer Hook\n * @param collector The property collector\n */\n\nexport function useDragLayer(collect) {\n  var dragDropManager = useDragDropManager();\n  var monitor = dragDropManager.getMonitor();\n\n  var _useCollector = useCollector(monitor, collect),\n      _useCollector2 = _slicedToArray(_useCollector, 2),\n      collected = _useCollector2[0],\n      updateCollected = _useCollector2[1];\n\n  useEffect(function () {\n    return monitor.subscribeToOffsetChange(updateCollected);\n  });\n  useEffect(function () {\n    return monitor.subscribeToStateChange(updateCollected);\n  });\n  return collected;\n}","import { useDragLayer } from 'react-dnd';\n\nvar getStyle = function getStyle(currentOffset) {\n  var transform = \"translate(\".concat(currentOffset.x, \"px, \").concat(currentOffset.y, \"px)\");\n  return {\n    pointerEvents: 'none',\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    transform: transform,\n    WebkitTransform: transform\n  };\n};\n\nvar usePreview = function usePreview() {\n  var collectedProps = useDragLayer(function (monitor) {\n    return {\n      currentOffset: monitor.getSourceClientOffset(),\n      isDragging: monitor.isDragging(),\n      itemType: monitor.getItemType(),\n      item: monitor.getItem()\n    };\n  });\n\n  if (!collectedProps.isDragging || collectedProps.currentOffset === null) {\n    return {\n      display: false\n    };\n  }\n\n  return {\n    display: true,\n    itemType: collectedProps.itemType,\n    item: collectedProps.item,\n    style: getStyle(collectedProps.currentOffset)\n  };\n};\n\nexport { usePreview };","import React from 'react';\nexport var Context = React.createContext();","function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { usePreview } from './usePreview';\nimport { Context } from './Context';\n\nvar Preview = function Preview(props) {\n  var _usePreview = usePreview(),\n      display = _usePreview.display,\n      data = _objectWithoutProperties(_usePreview, [\"display\"]);\n\n  if (!display) {\n    return null;\n  }\n\n  var child;\n\n  if (props.children && typeof props.children === 'function') {\n    child = props.children(data);\n  } else if (props.children) {\n    child = props.children;\n  } else {\n    child = props.generator(data);\n  }\n\n  return /*#__PURE__*/React.createElement(Context.Provider, {\n    value: data\n  }, child);\n};\n\nPreview.propTypes = {\n  generator: PropTypes.func,\n  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func])\n};\nexport { Preview };","import { Preview } from './Preview';\nexport { usePreview } from './usePreview';\nexport { Context } from './Context';\nexport { Preview };\nexport default Preview;","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import { useContext } from 'react';\nimport { invariant } from '@react-dnd/invariant';\nimport { DndContext } from '../common/DndContext';\n/**\n * A hook to retrieve the DragDropManager from Context\n */\n\nexport function useDragDropManager() {\n  var _useContext = useContext(DndContext),\n      dragDropManager = _useContext.dragDropManager;\n\n  invariant(dragDropManager != null, 'Expected drag drop context');\n  return dragDropManager;\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { shallowEqual } from '@react-dnd/shallowequal';\nimport { useState, useCallback } from 'react';\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect';\n/**\n *\n * @param monitor The monitor to collect state from\n * @param collect The collecting function\n * @param onUpdate A method to invoke when updates occur\n */\n\nexport function useCollector(monitor, collect, onUpdate) {\n  var _useState = useState(function () {\n    return collect(monitor);\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      collected = _useState2[0],\n      setCollected = _useState2[1];\n\n  var updateCollected = useCallback(function () {\n    var nextValue = collect(monitor);\n\n    if (!shallowEqual(collected, nextValue)) {\n      setCollected(nextValue);\n\n      if (onUpdate) {\n        onUpdate();\n      }\n    }\n  }, [collected, monitor, onUpdate]); // update the collected properties after the first render\n  // and the components are attached to dnd-core\n\n  useIsomorphicLayoutEffect(updateCollected, []);\n  return [collected, updateCollected];\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nexport function isRef(obj) {\n  return (// eslint-disable-next-line no-prototype-builtins\n    obj !== null && _typeof(obj) === 'object' && Object.prototype.hasOwnProperty.call(obj, 'current')\n  );\n}","export function registerTarget(type, target, manager) {\n  var registry = manager.getRegistry();\n  var targetId = registry.addTarget(type, target);\n  return [targetId, function () {\n    return registry.removeTarget(targetId);\n  }];\n}\nexport function registerSource(type, source, manager) {\n  var registry = manager.getRegistry();\n  var sourceId = registry.addSource(type, source);\n  return [sourceId, function () {\n    return registry.removeSource(sourceId);\n  }];\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect';\nimport { useCollector } from './useCollector';\nexport function useMonitorOutput(monitor, collect, onCollect) {\n  var _useCollector = useCollector(monitor, collect, onCollect),\n      _useCollector2 = _slicedToArray(_useCollector, 2),\n      collected = _useCollector2[0],\n      updateCollected = _useCollector2[1];\n\n  useIsomorphicLayoutEffect(function subscribeToMonitorStateChange() {\n    var handlerId = monitor.getHandlerId();\n\n    if (handlerId == null) {\n      return undefined;\n    }\n\n    return monitor.subscribeToStateChange(updateCollected, {\n      handlerIds: [handlerId]\n    });\n  }, [monitor, updateCollected]);\n  return collected;\n}","var emptyImage;\nexport function getEmptyImage() {\n  if (!emptyImage) {\n    emptyImage = new Image();\n    emptyImage.src = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n  }\n\n  return emptyImage;\n}","import $$observable from 'symbol-observable';\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error('It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error('You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected the listener to be a function.');\n    }\n\n    if (isDispatching) {\n      throw new Error('You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error('You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionDescription = actionType && \"action \\\"\" + String(actionType) + \"\\\"\" || 'an action';\n  return \"Given \" + actionDescription + \", reducer \\\"\" + key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\";\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle \" + ActionTypes.INIT + \" or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(_key, action);\n        throw new Error(errorMessage);\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(\"bindActionCreators expected an object or a function, instead received \" + (actionCreators === null ? 'null' : typeof actionCreators) + \". \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    keys.push.apply(keys, Object.getOwnPropertySymbols(object));\n  }\n\n  if (enumerableOnly) keys = keys.filter(function (sym) {\n    return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n  });\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error('Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread2({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore };\n","export var INIT_COORDS = 'dnd-core/INIT_COORDS';\nexport var BEGIN_DRAG = 'dnd-core/BEGIN_DRAG';\nexport var PUBLISH_DRAG_SOURCE = 'dnd-core/PUBLISH_DRAG_SOURCE';\nexport var HOVER = 'dnd-core/HOVER';\nexport var DROP = 'dnd-core/DROP';\nexport var END_DRAG = 'dnd-core/END_DRAG';","export var strictEquality = function strictEquality(a, b) {\n  return a === b;\n};\n/**\n * Determine if two cartesian coordinate offsets are equal\n * @param offsetA\n * @param offsetB\n */\n\nexport function areCoordsEqual(offsetA, offsetB) {\n  if (!offsetA && !offsetB) {\n    return true;\n  } else if (!offsetA || !offsetB) {\n    return false;\n  } else {\n    return offsetA.x === offsetB.x && offsetA.y === offsetB.y;\n  }\n}\n/**\n * Determines if two arrays of items are equal\n * @param a The first array of items\n * @param b The second array of items\n */\n\nexport function areArraysEqual(a, b) {\n  var isEqual = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : strictEquality;\n\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  for (var i = 0; i < a.length; ++i) {\n    if (!isEqual(a[i], b[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { INIT_COORDS, BEGIN_DRAG, HOVER, END_DRAG, DROP } from '../actions/dragDrop';\nimport { areCoordsEqual } from '../utils/equality';\nvar initialState = {\n  initialSourceClientOffset: null,\n  initialClientOffset: null,\n  clientOffset: null\n};\nexport function reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var payload = action.payload;\n\n  switch (action.type) {\n    case INIT_COORDS:\n    case BEGIN_DRAG:\n      return {\n        initialSourceClientOffset: payload.sourceClientOffset,\n        initialClientOffset: payload.clientOffset,\n        clientOffset: payload.clientOffset\n      };\n\n    case HOVER:\n      if (areCoordsEqual(state.clientOffset, payload.clientOffset)) {\n        return state;\n      }\n\n      return _objectSpread(_objectSpread({}, state), {}, {\n        clientOffset: payload.clientOffset\n      });\n\n    case END_DRAG:\n    case DROP:\n      return initialState;\n\n    default:\n      return state;\n  }\n}","export var ADD_SOURCE = 'dnd-core/ADD_SOURCE';\nexport var ADD_TARGET = 'dnd-core/ADD_TARGET';\nexport var REMOVE_SOURCE = 'dnd-core/REMOVE_SOURCE';\nexport var REMOVE_TARGET = 'dnd-core/REMOVE_TARGET';\nexport function addSource(sourceId) {\n  return {\n    type: ADD_SOURCE,\n    payload: {\n      sourceId: sourceId\n    }\n  };\n}\nexport function addTarget(targetId) {\n  return {\n    type: ADD_TARGET,\n    payload: {\n      targetId: targetId\n    }\n  };\n}\nexport function removeSource(sourceId) {\n  return {\n    type: REMOVE_SOURCE,\n    payload: {\n      sourceId: sourceId\n    }\n  };\n}\nexport function removeTarget(targetId) {\n  return {\n    type: REMOVE_TARGET,\n    payload: {\n      targetId: targetId\n    }\n  };\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n// cheap lodash replacements\n\n/**\n * drop-in replacement for _.get\n * @param obj\n * @param path\n * @param defaultValue\n */\nexport function get(obj, path, defaultValue) {\n  return path.split('.').reduce(function (a, c) {\n    return a && a[c] ? a[c] : defaultValue || null;\n  }, obj);\n}\n/**\n * drop-in replacement for _.without\n */\n\nexport function without(items, item) {\n  return items.filter(function (i) {\n    return i !== item;\n  });\n}\n/**\n * drop-in replacement for _.isString\n * @param input\n */\n\nexport function isString(input) {\n  return typeof input === 'string';\n}\n/**\n * drop-in replacement for _.isString\n * @param input\n */\n\nexport function isObject(input) {\n  return _typeof(input) === 'object';\n}\n/**\n * repalcement for _.xor\n * @param itemsA\n * @param itemsB\n */\n\nexport function xor(itemsA, itemsB) {\n  var map = new Map();\n\n  var insertItem = function insertItem(item) {\n    map.set(item, map.has(item) ? map.get(item) + 1 : 1);\n  };\n\n  itemsA.forEach(insertItem);\n  itemsB.forEach(insertItem);\n  var result = [];\n  map.forEach(function (count, key) {\n    if (count === 1) {\n      result.push(key);\n    }\n  });\n  return result;\n}\n/**\n * replacement for _.intersection\n * @param itemsA\n * @param itemsB\n */\n\nexport function intersection(itemsA, itemsB) {\n  return itemsA.filter(function (t) {\n    return itemsB.indexOf(t) > -1;\n  });\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { BEGIN_DRAG, PUBLISH_DRAG_SOURCE, HOVER, END_DRAG, DROP } from '../actions/dragDrop';\nimport { REMOVE_TARGET } from '../actions/registry';\nimport { without } from '../utils/js_utils';\nvar initialState = {\n  itemType: null,\n  item: null,\n  sourceId: null,\n  targetIds: [],\n  dropResult: null,\n  didDrop: false,\n  isSourcePublic: null\n};\nexport function reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var payload = action.payload;\n\n  switch (action.type) {\n    case BEGIN_DRAG:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        itemType: payload.itemType,\n        item: payload.item,\n        sourceId: payload.sourceId,\n        isSourcePublic: payload.isSourcePublic,\n        dropResult: null,\n        didDrop: false\n      });\n\n    case PUBLISH_DRAG_SOURCE:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isSourcePublic: true\n      });\n\n    case HOVER:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        targetIds: payload.targetIds\n      });\n\n    case REMOVE_TARGET:\n      if (state.targetIds.indexOf(payload.targetId) === -1) {\n        return state;\n      }\n\n      return _objectSpread(_objectSpread({}, state), {}, {\n        targetIds: without(state.targetIds, payload.targetId)\n      });\n\n    case DROP:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        dropResult: payload.dropResult,\n        didDrop: true,\n        targetIds: []\n      });\n\n    case END_DRAG:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        itemType: null,\n        item: null,\n        sourceId: null,\n        dropResult: null,\n        didDrop: false,\n        isSourcePublic: null,\n        targetIds: []\n      });\n\n    default:\n      return state;\n  }\n}","import { ADD_SOURCE, ADD_TARGET, REMOVE_SOURCE, REMOVE_TARGET } from '../actions/registry';\nexport function reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ADD_SOURCE:\n    case ADD_TARGET:\n      return state + 1;\n\n    case REMOVE_SOURCE:\n    case REMOVE_TARGET:\n      return state - 1;\n\n    default:\n      return state;\n  }\n}","import { intersection } from './js_utils';\nexport var NONE = [];\nexport var ALL = [];\nNONE.__IS_NONE__ = true;\nALL.__IS_ALL__ = true;\n/**\n * Determines if the given handler IDs are dirty or not.\n *\n * @param dirtyIds The set of dirty handler ids\n * @param handlerIds The set of handler ids to check\n */\n\nexport function areDirty(dirtyIds, handlerIds) {\n  if (dirtyIds === NONE) {\n    return false;\n  }\n\n  if (dirtyIds === ALL || typeof handlerIds === 'undefined') {\n    return true;\n  }\n\n  var commonIds = intersection(handlerIds, dirtyIds);\n  return commonIds.length > 0;\n}","import { BEGIN_DRAG, PUBLISH_DRAG_SOURCE, HOVER, END_DRAG, DROP } from '../actions/dragDrop';\nimport { ADD_SOURCE, ADD_TARGET, REMOVE_SOURCE, REMOVE_TARGET } from '../actions/registry';\nimport { areArraysEqual } from '../utils/equality';\nimport { NONE, ALL } from '../utils/dirtiness';\nimport { xor } from '../utils/js_utils';\nexport function reduce() {\n  var _state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : NONE;\n\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case HOVER:\n      break;\n\n    case ADD_SOURCE:\n    case ADD_TARGET:\n    case REMOVE_TARGET:\n    case REMOVE_SOURCE:\n      return NONE;\n\n    case BEGIN_DRAG:\n    case PUBLISH_DRAG_SOURCE:\n    case END_DRAG:\n    case DROP:\n    default:\n      return ALL;\n  }\n\n  var _action$payload = action.payload,\n      _action$payload$targe = _action$payload.targetIds,\n      targetIds = _action$payload$targe === void 0 ? [] : _action$payload$targe,\n      _action$payload$prevT = _action$payload.prevTargetIds,\n      prevTargetIds = _action$payload$prevT === void 0 ? [] : _action$payload$prevT;\n  var result = xor(targetIds, prevTargetIds);\n  var didChange = result.length > 0 || !areArraysEqual(targetIds, prevTargetIds);\n\n  if (!didChange) {\n    return NONE;\n  } // Check the target ids at the innermost position. If they are valid, add them\n  // to the result\n\n\n  var prevInnermostTargetId = prevTargetIds[prevTargetIds.length - 1];\n  var innermostTargetId = targetIds[targetIds.length - 1];\n\n  if (prevInnermostTargetId !== innermostTargetId) {\n    if (prevInnermostTargetId) {\n      result.push(prevInnermostTargetId);\n    }\n\n    if (innermostTargetId) {\n      result.push(innermostTargetId);\n    }\n  }\n\n  return result;\n}","export function reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  return state + 1;\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { reduce as dragOffset } from './dragOffset';\nimport { reduce as dragOperation } from './dragOperation';\nimport { reduce as refCount } from './refCount';\nimport { reduce as dirtyHandlerIds } from './dirtyHandlerIds';\nimport { reduce as stateId } from './stateId';\nimport { get } from '../utils/js_utils';\nexport function reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return {\n    dirtyHandlerIds: dirtyHandlerIds(state.dirtyHandlerIds, {\n      type: action.type,\n      payload: _objectSpread(_objectSpread({}, action.payload), {}, {\n        prevTargetIds: get(state, 'dragOperation.targetIds', [])\n      })\n    }),\n    dragOffset: dragOffset(state.dragOffset, action),\n    refCount: refCount(state.refCount, action),\n    dragOperation: dragOperation(state.dragOperation, action),\n    stateId: stateId(state.stateId)\n  };\n}","import { INIT_COORDS } from '../types';\nexport function setClientOffset(clientOffset, sourceClientOffset) {\n  return {\n    type: INIT_COORDS,\n    payload: {\n      sourceClientOffset: sourceClientOffset || null,\n      clientOffset: clientOffset || null\n    }\n  };\n}","import { invariant } from '@react-dnd/invariant';\nimport { setClientOffset } from './local/setClientOffset';\nimport { isObject } from '../../utils/js_utils';\nimport { BEGIN_DRAG, INIT_COORDS } from './types';\nvar ResetCoordinatesAction = {\n  type: INIT_COORDS,\n  payload: {\n    clientOffset: null,\n    sourceClientOffset: null\n  }\n};\nexport function createBeginDrag(manager) {\n  return function beginDrag() {\n    var sourceIds = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      publishSource: true\n    };\n    var _options$publishSourc = options.publishSource,\n        publishSource = _options$publishSourc === void 0 ? true : _options$publishSourc,\n        clientOffset = options.clientOffset,\n        getSourceClientOffset = options.getSourceClientOffset;\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry(); // Initialize the coordinates using the client offset\n\n    manager.dispatch(setClientOffset(clientOffset));\n    verifyInvariants(sourceIds, monitor, registry); // Get the draggable source\n\n    var sourceId = getDraggableSource(sourceIds, monitor);\n\n    if (sourceId === null) {\n      manager.dispatch(ResetCoordinatesAction);\n      return;\n    } // Get the source client offset\n\n\n    var sourceClientOffset = null;\n\n    if (clientOffset) {\n      if (!getSourceClientOffset) {\n        throw new Error('getSourceClientOffset must be defined');\n      }\n\n      verifyGetSourceClientOffsetIsFunction(getSourceClientOffset);\n      sourceClientOffset = getSourceClientOffset(sourceId);\n    } // Initialize the full coordinates\n\n\n    manager.dispatch(setClientOffset(clientOffset, sourceClientOffset));\n    var source = registry.getSource(sourceId);\n    var item = source.beginDrag(monitor, sourceId);\n    verifyItemIsObject(item);\n    registry.pinSource(sourceId);\n    var itemType = registry.getSourceType(sourceId);\n    return {\n      type: BEGIN_DRAG,\n      payload: {\n        itemType: itemType,\n        item: item,\n        sourceId: sourceId,\n        clientOffset: clientOffset || null,\n        sourceClientOffset: sourceClientOffset || null,\n        isSourcePublic: !!publishSource\n      }\n    };\n  };\n}\n\nfunction verifyInvariants(sourceIds, monitor, registry) {\n  invariant(!monitor.isDragging(), 'Cannot call beginDrag while dragging.');\n  sourceIds.forEach(function (sourceId) {\n    invariant(registry.getSource(sourceId), 'Expected sourceIds to be registered.');\n  });\n}\n\nfunction verifyGetSourceClientOffsetIsFunction(getSourceClientOffset) {\n  invariant(typeof getSourceClientOffset === 'function', 'When clientOffset is provided, getSourceClientOffset must be a function.');\n}\n\nfunction verifyItemIsObject(item) {\n  invariant(isObject(item), 'Item must be an object.');\n}\n\nfunction getDraggableSource(sourceIds, monitor) {\n  var sourceId = null;\n\n  for (var i = sourceIds.length - 1; i >= 0; i--) {\n    if (monitor.canDragSource(sourceIds[i])) {\n      sourceId = sourceIds[i];\n      break;\n    }\n  }\n\n  return sourceId;\n}","import { PUBLISH_DRAG_SOURCE } from './types';\nexport function createPublishDragSource(manager) {\n  return function publishDragSource() {\n    var monitor = manager.getMonitor();\n\n    if (monitor.isDragging()) {\n      return {\n        type: PUBLISH_DRAG_SOURCE\n      };\n    }\n  };\n}","export function matchesType(targetType, draggedItemType) {\n  if (draggedItemType === null) {\n    return targetType === null;\n  }\n\n  return Array.isArray(targetType) ? targetType.some(function (t) {\n    return t === draggedItemType;\n  }) : targetType === draggedItemType;\n}","import { invariant } from '@react-dnd/invariant';\nimport { matchesType } from '../../utils/matchesType';\nimport { HOVER } from './types';\nexport function createHover(manager) {\n  return function hover(targetIdsArg) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        clientOffset = _ref.clientOffset;\n\n    verifyTargetIdsIsArray(targetIdsArg);\n    var targetIds = targetIdsArg.slice(0);\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    checkInvariants(targetIds, monitor, registry);\n    var draggedItemType = monitor.getItemType();\n    removeNonMatchingTargetIds(targetIds, registry, draggedItemType);\n    hoverAllTargets(targetIds, monitor, registry);\n    return {\n      type: HOVER,\n      payload: {\n        targetIds: targetIds,\n        clientOffset: clientOffset || null\n      }\n    };\n  };\n}\n\nfunction verifyTargetIdsIsArray(targetIdsArg) {\n  invariant(Array.isArray(targetIdsArg), 'Expected targetIds to be an array.');\n}\n\nfunction checkInvariants(targetIds, monitor, registry) {\n  invariant(monitor.isDragging(), 'Cannot call hover while not dragging.');\n  invariant(!monitor.didDrop(), 'Cannot call hover after drop.');\n\n  for (var i = 0; i < targetIds.length; i++) {\n    var targetId = targetIds[i];\n    invariant(targetIds.lastIndexOf(targetId) === i, 'Expected targetIds to be unique in the passed array.');\n    var target = registry.getTarget(targetId);\n    invariant(target, 'Expected targetIds to be registered.');\n  }\n}\n\nfunction removeNonMatchingTargetIds(targetIds, registry, draggedItemType) {\n  // Remove those targetIds that don't match the targetType.  This\n  // fixes shallow isOver which would only be non-shallow because of\n  // non-matching targets.\n  for (var i = targetIds.length - 1; i >= 0; i--) {\n    var targetId = targetIds[i];\n    var targetType = registry.getTargetType(targetId);\n\n    if (!matchesType(targetType, draggedItemType)) {\n      targetIds.splice(i, 1);\n    }\n  }\n}\n\nfunction hoverAllTargets(targetIds, monitor, registry) {\n  // Finally call hover on all matching targets.\n  targetIds.forEach(function (targetId) {\n    var target = registry.getTarget(targetId);\n    target.hover(monitor, targetId);\n  });\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { invariant } from '@react-dnd/invariant';\nimport { DROP } from './types';\nimport { isObject } from '../../utils/js_utils';\nexport function createDrop(manager) {\n  return function drop() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    verifyInvariants(monitor);\n    var targetIds = getDroppableTargets(monitor); // Multiple actions are dispatched here, which is why this doesn't return an action\n\n    targetIds.forEach(function (targetId, index) {\n      var dropResult = determineDropResult(targetId, index, registry, monitor);\n      var action = {\n        type: DROP,\n        payload: {\n          dropResult: _objectSpread(_objectSpread({}, options), dropResult)\n        }\n      };\n      manager.dispatch(action);\n    });\n  };\n}\n\nfunction verifyInvariants(monitor) {\n  invariant(monitor.isDragging(), 'Cannot call drop while not dragging.');\n  invariant(!monitor.didDrop(), 'Cannot call drop twice during one drag operation.');\n}\n\nfunction determineDropResult(targetId, index, registry, monitor) {\n  var target = registry.getTarget(targetId);\n  var dropResult = target ? target.drop(monitor, targetId) : undefined;\n  verifyDropResultType(dropResult);\n\n  if (typeof dropResult === 'undefined') {\n    dropResult = index === 0 ? {} : monitor.getDropResult();\n  }\n\n  return dropResult;\n}\n\nfunction verifyDropResultType(dropResult) {\n  invariant(typeof dropResult === 'undefined' || isObject(dropResult), 'Drop result must either be an object or undefined.');\n}\n\nfunction getDroppableTargets(monitor) {\n  var targetIds = monitor.getTargetIds().filter(monitor.canDropOnTarget, monitor);\n  targetIds.reverse();\n  return targetIds;\n}","import { invariant } from '@react-dnd/invariant';\nimport { END_DRAG } from './types';\nexport function createEndDrag(manager) {\n  return function endDrag() {\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    verifyIsDragging(monitor);\n    var sourceId = monitor.getSourceId();\n\n    if (sourceId != null) {\n      var source = registry.getSource(sourceId, true);\n      source.endDrag(monitor, sourceId);\n      registry.unpinSource();\n    }\n\n    return {\n      type: END_DRAG\n    };\n  };\n}\n\nfunction verifyIsDragging(monitor) {\n  invariant(monitor.isDragging(), 'Cannot call endDrag while not dragging.');\n}","/**\n * Coordinate addition\n * @param a The first coordinate\n * @param b The second coordinate\n */\nexport function add(a, b) {\n  return {\n    x: a.x + b.x,\n    y: a.y + b.y\n  };\n}\n/**\n * Coordinate subtraction\n * @param a The first coordinate\n * @param b The second coordinate\n */\n\nexport function subtract(a, b) {\n  return {\n    x: a.x - b.x,\n    y: a.y - b.y\n  };\n}\n/**\n * Returns the cartesian distance of the drag source component's position, based on its position\n * at the time when the current drag operation has started, and the movement difference.\n *\n * Returns null if no item is being dragged.\n *\n * @param state The offset state to compute from\n */\n\nexport function getSourceClientOffset(state) {\n  var clientOffset = state.clientOffset,\n      initialClientOffset = state.initialClientOffset,\n      initialSourceClientOffset = state.initialSourceClientOffset;\n\n  if (!clientOffset || !initialClientOffset || !initialSourceClientOffset) {\n    return null;\n  }\n\n  return subtract(add(clientOffset, initialSourceClientOffset), initialClientOffset);\n}\n/**\n * Determines the x,y offset between the client offset and the initial client offset\n *\n * @param state The offset state to compute from\n */\n\nexport function getDifferenceFromInitialOffset(state) {\n  var clientOffset = state.clientOffset,\n      initialClientOffset = state.initialClientOffset;\n\n  if (!clientOffset || !initialClientOffset) {\n    return null;\n  }\n\n  return subtract(clientOffset, initialClientOffset);\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { invariant } from '@react-dnd/invariant';\nimport { matchesType } from './utils/matchesType';\nimport { getSourceClientOffset as _getSourceClientOffset, getDifferenceFromInitialOffset as _getDifferenceFromInitialOffset } from './utils/coords';\nimport { areDirty } from './utils/dirtiness';\nexport var DragDropMonitorImpl = /*#__PURE__*/function () {\n  function DragDropMonitorImpl(store, registry) {\n    _classCallCheck(this, DragDropMonitorImpl);\n\n    this.store = store;\n    this.registry = registry;\n  }\n\n  _createClass(DragDropMonitorImpl, [{\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        handlerIds: undefined\n      };\n      var handlerIds = options.handlerIds;\n      invariant(typeof listener === 'function', 'listener must be a function.');\n      invariant(typeof handlerIds === 'undefined' || Array.isArray(handlerIds), 'handlerIds, when specified, must be an array of strings.');\n      var prevStateId = this.store.getState().stateId;\n\n      var handleChange = function handleChange() {\n        var state = _this.store.getState();\n\n        var currentStateId = state.stateId;\n\n        try {\n          var canSkipListener = currentStateId === prevStateId || currentStateId === prevStateId + 1 && !areDirty(state.dirtyHandlerIds, handlerIds);\n\n          if (!canSkipListener) {\n            listener();\n          }\n        } finally {\n          prevStateId = currentStateId;\n        }\n      };\n\n      return this.store.subscribe(handleChange);\n    }\n  }, {\n    key: \"subscribeToOffsetChange\",\n    value: function subscribeToOffsetChange(listener) {\n      var _this2 = this;\n\n      invariant(typeof listener === 'function', 'listener must be a function.');\n      var previousState = this.store.getState().dragOffset;\n\n      var handleChange = function handleChange() {\n        var nextState = _this2.store.getState().dragOffset;\n\n        if (nextState === previousState) {\n          return;\n        }\n\n        previousState = nextState;\n        listener();\n      };\n\n      return this.store.subscribe(handleChange);\n    }\n  }, {\n    key: \"canDragSource\",\n    value: function canDragSource(sourceId) {\n      if (!sourceId) {\n        return false;\n      }\n\n      var source = this.registry.getSource(sourceId);\n      invariant(source, 'Expected to find a valid source.');\n\n      if (this.isDragging()) {\n        return false;\n      }\n\n      return source.canDrag(this, sourceId);\n    }\n  }, {\n    key: \"canDropOnTarget\",\n    value: function canDropOnTarget(targetId) {\n      // undefined on initial render\n      if (!targetId) {\n        return false;\n      }\n\n      var target = this.registry.getTarget(targetId);\n      invariant(target, 'Expected to find a valid target.');\n\n      if (!this.isDragging() || this.didDrop()) {\n        return false;\n      }\n\n      var targetType = this.registry.getTargetType(targetId);\n      var draggedItemType = this.getItemType();\n      return matchesType(targetType, draggedItemType) && target.canDrop(this, targetId);\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging() {\n      return Boolean(this.getItemType());\n    }\n  }, {\n    key: \"isDraggingSource\",\n    value: function isDraggingSource(sourceId) {\n      // undefined on initial render\n      if (!sourceId) {\n        return false;\n      }\n\n      var source = this.registry.getSource(sourceId, true);\n      invariant(source, 'Expected to find a valid source.');\n\n      if (!this.isDragging() || !this.isSourcePublic()) {\n        return false;\n      }\n\n      var sourceType = this.registry.getSourceType(sourceId);\n      var draggedItemType = this.getItemType();\n\n      if (sourceType !== draggedItemType) {\n        return false;\n      }\n\n      return source.isDragging(this, sourceId);\n    }\n  }, {\n    key: \"isOverTarget\",\n    value: function isOverTarget(targetId) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        shallow: false\n      };\n\n      // undefined on initial render\n      if (!targetId) {\n        return false;\n      }\n\n      var shallow = options.shallow;\n\n      if (!this.isDragging()) {\n        return false;\n      }\n\n      var targetType = this.registry.getTargetType(targetId);\n      var draggedItemType = this.getItemType();\n\n      if (draggedItemType && !matchesType(targetType, draggedItemType)) {\n        return false;\n      }\n\n      var targetIds = this.getTargetIds();\n\n      if (!targetIds.length) {\n        return false;\n      }\n\n      var index = targetIds.indexOf(targetId);\n\n      if (shallow) {\n        return index === targetIds.length - 1;\n      } else {\n        return index > -1;\n      }\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.store.getState().dragOperation.itemType;\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.store.getState().dragOperation.item;\n    }\n  }, {\n    key: \"getSourceId\",\n    value: function getSourceId() {\n      return this.store.getState().dragOperation.sourceId;\n    }\n  }, {\n    key: \"getTargetIds\",\n    value: function getTargetIds() {\n      return this.store.getState().dragOperation.targetIds;\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.store.getState().dragOperation.dropResult;\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.store.getState().dragOperation.didDrop;\n    }\n  }, {\n    key: \"isSourcePublic\",\n    value: function isSourcePublic() {\n      return Boolean(this.store.getState().dragOperation.isSourcePublic);\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.store.getState().dragOffset.initialClientOffset;\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.store.getState().dragOffset.initialSourceClientOffset;\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.store.getState().dragOffset.clientOffset;\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset() {\n      return _getSourceClientOffset(this.store.getState().dragOffset);\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset() {\n      return _getDifferenceFromInitialOffset(this.store.getState().dragOffset);\n    }\n  }]);\n\n  return DragDropMonitorImpl;\n}();","export var HandlerRole;\n\n(function (HandlerRole) {\n  HandlerRole[\"SOURCE\"] = \"SOURCE\";\n  HandlerRole[\"TARGET\"] = \"TARGET\";\n})(HandlerRole || (HandlerRole = {}));","var nextUniqueId = 0;\nexport function getNextUniqueId() {\n  return nextUniqueId++;\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport { invariant } from '@react-dnd/invariant';\nexport function validateSourceContract(source) {\n  invariant(typeof source.canDrag === 'function', 'Expected canDrag to be a function.');\n  invariant(typeof source.beginDrag === 'function', 'Expected beginDrag to be a function.');\n  invariant(typeof source.endDrag === 'function', 'Expected endDrag to be a function.');\n}\nexport function validateTargetContract(target) {\n  invariant(typeof target.canDrop === 'function', 'Expected canDrop to be a function.');\n  invariant(typeof target.hover === 'function', 'Expected hover to be a function.');\n  invariant(typeof target.drop === 'function', 'Expected beginDrag to be a function.');\n}\nexport function validateType(type, allowArray) {\n  if (allowArray && Array.isArray(type)) {\n    type.forEach(function (t) {\n      return validateType(t, false);\n    });\n    return;\n  }\n\n  invariant(typeof type === 'string' || _typeof(type) === 'symbol', allowArray ? 'Type can only be a string, a symbol, or an array of either.' : 'Type can only be a string or a symbol.');\n}","import { rawAsap } from './raw'; // rawAsap provides everything we need except exception management.\n// RawTasks are recycled to reduce GC churn.\n\nvar freeTasks = []; // We queue errors to ensure they are thrown in right order (FIFO).\n// Array-as-queue is good enough here, since we are just dealing with exceptions.\n\nvar pendingErrors = [];\nvar requestErrorThrow = rawAsap.makeRequestCallFromTimer(throwFirstError);\n\nfunction throwFirstError() {\n  if (pendingErrors.length) {\n    throw pendingErrors.shift();\n  }\n}\n/**\n * Calls a task as soon as possible after returning, in its own event, with priority\n * over other events like animation, reflow, and repaint. An error thrown from an\n * event will not interrupt, nor even substantially slow down the processing of\n * other events, but will be rather postponed to a lower priority event.\n * @param {{call}} task A callable object, typically a function that takes no\n * arguments.\n */\n\n\nexport function asap(task) {\n  var rawTask;\n\n  if (freeTasks.length) {\n    rawTask = freeTasks.pop();\n  } else {\n    rawTask = new RawTask();\n  }\n\n  rawTask.task = task;\n  rawAsap(rawTask);\n} // We wrap tasks with recyclable task objects.  A task object implements\n// `call`, just like a function.\n\nvar RawTask =\n/** @class */\nfunction () {\n  function RawTask() {}\n\n  RawTask.prototype.call = function () {\n    try {\n      this.task.call();\n    } catch (error) {\n      if (asap.onerror) {\n        // This hook exists purely for testing purposes.\n        // Its name will be periodically randomized to break any code that\n        // depends on its existence.\n        asap.onerror(error);\n      } else {\n        // In a web browser, exceptions are not fatal. However, to avoid\n        // slowing down the queue of pending tasks, we rethrow the error in a\n        // lower priority turn.\n        pendingErrors.push(error);\n        requestErrorThrow();\n      }\n    } finally {\n      this.task = null;\n      freeTasks[freeTasks.length] = this;\n    }\n  };\n\n  return RawTask;\n}();","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { invariant } from '@react-dnd/invariant';\nimport { addSource as _addSource, addTarget as _addTarget, removeSource as _removeSource, removeTarget as _removeTarget } from './actions/registry';\nimport { getNextUniqueId } from './utils/getNextUniqueId';\nimport { HandlerRole } from './interfaces';\nimport { validateSourceContract, validateTargetContract, validateType } from './contracts';\nimport { asap } from '@react-dnd/asap';\n\nfunction getNextHandlerId(role) {\n  var id = getNextUniqueId().toString();\n\n  switch (role) {\n    case HandlerRole.SOURCE:\n      return \"S\".concat(id);\n\n    case HandlerRole.TARGET:\n      return \"T\".concat(id);\n\n    default:\n      throw new Error(\"Unknown Handler Role: \".concat(role));\n  }\n}\n\nfunction parseRoleFromHandlerId(handlerId) {\n  switch (handlerId[0]) {\n    case 'S':\n      return HandlerRole.SOURCE;\n\n    case 'T':\n      return HandlerRole.TARGET;\n\n    default:\n      invariant(false, \"Cannot parse handler ID: \".concat(handlerId));\n  }\n}\n\nfunction mapContainsValue(map, searchValue) {\n  var entries = map.entries();\n  var isDone = false;\n\n  do {\n    var _entries$next = entries.next(),\n        done = _entries$next.done,\n        _entries$next$value = _slicedToArray(_entries$next.value, 2),\n        value = _entries$next$value[1];\n\n    if (value === searchValue) {\n      return true;\n    }\n\n    isDone = !!done;\n  } while (!isDone);\n\n  return false;\n}\n\nexport var HandlerRegistryImpl = /*#__PURE__*/function () {\n  function HandlerRegistryImpl(store) {\n    _classCallCheck(this, HandlerRegistryImpl);\n\n    this.types = new Map();\n    this.dragSources = new Map();\n    this.dropTargets = new Map();\n    this.pinnedSourceId = null;\n    this.pinnedSource = null;\n    this.store = store;\n  }\n\n  _createClass(HandlerRegistryImpl, [{\n    key: \"addSource\",\n    value: function addSource(type, source) {\n      validateType(type);\n      validateSourceContract(source);\n      var sourceId = this.addHandler(HandlerRole.SOURCE, type, source);\n      this.store.dispatch(_addSource(sourceId));\n      return sourceId;\n    }\n  }, {\n    key: \"addTarget\",\n    value: function addTarget(type, target) {\n      validateType(type, true);\n      validateTargetContract(target);\n      var targetId = this.addHandler(HandlerRole.TARGET, type, target);\n      this.store.dispatch(_addTarget(targetId));\n      return targetId;\n    }\n  }, {\n    key: \"containsHandler\",\n    value: function containsHandler(handler) {\n      return mapContainsValue(this.dragSources, handler) || mapContainsValue(this.dropTargets, handler);\n    }\n  }, {\n    key: \"getSource\",\n    value: function getSource(sourceId) {\n      var includePinned = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n      var isPinned = includePinned && sourceId === this.pinnedSourceId;\n      var source = isPinned ? this.pinnedSource : this.dragSources.get(sourceId);\n      return source;\n    }\n  }, {\n    key: \"getTarget\",\n    value: function getTarget(targetId) {\n      invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n      return this.dropTargets.get(targetId);\n    }\n  }, {\n    key: \"getSourceType\",\n    value: function getSourceType(sourceId) {\n      invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n      return this.types.get(sourceId);\n    }\n  }, {\n    key: \"getTargetType\",\n    value: function getTargetType(targetId) {\n      invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n      return this.types.get(targetId);\n    }\n  }, {\n    key: \"isSourceId\",\n    value: function isSourceId(handlerId) {\n      var role = parseRoleFromHandlerId(handlerId);\n      return role === HandlerRole.SOURCE;\n    }\n  }, {\n    key: \"isTargetId\",\n    value: function isTargetId(handlerId) {\n      var role = parseRoleFromHandlerId(handlerId);\n      return role === HandlerRole.TARGET;\n    }\n  }, {\n    key: \"removeSource\",\n    value: function removeSource(sourceId) {\n      var _this = this;\n\n      invariant(this.getSource(sourceId), 'Expected an existing source.');\n      this.store.dispatch(_removeSource(sourceId));\n      asap(function () {\n        _this.dragSources.delete(sourceId);\n\n        _this.types.delete(sourceId);\n      });\n    }\n  }, {\n    key: \"removeTarget\",\n    value: function removeTarget(targetId) {\n      invariant(this.getTarget(targetId), 'Expected an existing target.');\n      this.store.dispatch(_removeTarget(targetId));\n      this.dropTargets.delete(targetId);\n      this.types.delete(targetId);\n    }\n  }, {\n    key: \"pinSource\",\n    value: function pinSource(sourceId) {\n      var source = this.getSource(sourceId);\n      invariant(source, 'Expected an existing source.');\n      this.pinnedSourceId = sourceId;\n      this.pinnedSource = source;\n    }\n  }, {\n    key: \"unpinSource\",\n    value: function unpinSource() {\n      invariant(this.pinnedSource, 'No source is pinned at the time.');\n      this.pinnedSourceId = null;\n      this.pinnedSource = null;\n    }\n  }, {\n    key: \"addHandler\",\n    value: function addHandler(role, type, handler) {\n      var id = getNextHandlerId(role);\n      this.types.set(id, type);\n\n      if (role === HandlerRole.SOURCE) {\n        this.dragSources.set(id, handler);\n      } else if (role === HandlerRole.TARGET) {\n        this.dropTargets.set(id, handler);\n      }\n\n      return id;\n    }\n  }]);\n\n  return HandlerRegistryImpl;\n}();","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { createStore } from 'redux';\nimport { reduce } from './reducers';\nimport { createDragDropActions } from './actions/dragDrop';\nimport { DragDropMonitorImpl } from './DragDropMonitorImpl';\nimport { HandlerRegistryImpl } from './HandlerRegistryImpl';\n\nfunction makeStoreInstance(debugMode) {\n  // TODO: if we ever make a react-native version of this,\n  // we'll need to consider how to pull off dev-tooling\n  var reduxDevTools = typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION__;\n  return createStore(reduce, debugMode && reduxDevTools && reduxDevTools({\n    name: 'dnd-core',\n    instanceId: 'dnd-core'\n  }));\n}\n\nexport var DragDropManagerImpl = /*#__PURE__*/function () {\n  function DragDropManagerImpl() {\n    var _this = this;\n\n    var debugMode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    _classCallCheck(this, DragDropManagerImpl);\n\n    this.isSetUp = false;\n\n    this.handleRefCountChange = function () {\n      var shouldSetUp = _this.store.getState().refCount > 0;\n\n      if (_this.backend) {\n        if (shouldSetUp && !_this.isSetUp) {\n          _this.backend.setup();\n\n          _this.isSetUp = true;\n        } else if (!shouldSetUp && _this.isSetUp) {\n          _this.backend.teardown();\n\n          _this.isSetUp = false;\n        }\n      }\n    };\n\n    var store = makeStoreInstance(debugMode);\n    this.store = store;\n    this.monitor = new DragDropMonitorImpl(store, new HandlerRegistryImpl(store));\n    store.subscribe(this.handleRefCountChange);\n  }\n\n  _createClass(DragDropManagerImpl, [{\n    key: \"receiveBackend\",\n    value: function receiveBackend(backend) {\n      this.backend = backend;\n    }\n  }, {\n    key: \"getMonitor\",\n    value: function getMonitor() {\n      return this.monitor;\n    }\n  }, {\n    key: \"getBackend\",\n    value: function getBackend() {\n      return this.backend;\n    }\n  }, {\n    key: \"getRegistry\",\n    value: function getRegistry() {\n      return this.monitor.registry;\n    }\n  }, {\n    key: \"getActions\",\n    value: function getActions() {\n      /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n      var manager = this;\n      var dispatch = this.store.dispatch;\n\n      function bindActionCreator(actionCreator) {\n        return function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          var action = actionCreator.apply(manager, args);\n\n          if (typeof action !== 'undefined') {\n            dispatch(action);\n          }\n        };\n      }\n\n      var actions = createDragDropActions(this);\n      return Object.keys(actions).reduce(function (boundActions, key) {\n        var action = actions[key];\n        boundActions[key] = bindActionCreator(action);\n        return boundActions;\n      }, {});\n    }\n  }, {\n    key: \"dispatch\",\n    value: function dispatch(action) {\n      this.store.dispatch(action);\n    }\n  }]);\n\n  return DragDropManagerImpl;\n}();","import { createBeginDrag } from './beginDrag';\nimport { createPublishDragSource } from './publishDragSource';\nimport { createHover } from './hover';\nimport { createDrop } from './drop';\nimport { createEndDrag } from './endDrag';\nexport * from './types';\nexport function createDragDropActions(manager) {\n  return {\n    beginDrag: createBeginDrag(manager),\n    publishDragSource: createPublishDragSource(manager),\n    hover: createHover(manager),\n    drop: createDrop(manager),\n    endDrag: createEndDrag(manager)\n  };\n}","import { DragDropManagerImpl } from './DragDropManagerImpl';\nexport function createDragDropManager(backendFactory, globalContext, backendOptions, debugMode) {\n  var manager = new DragDropManagerImpl(debugMode);\n  var backend = backendFactory(manager, globalContext, backendOptions);\n  manager.receiveBackend(backend);\n  return manager;\n}","import * as React from 'react';\nimport { createDragDropManager } from 'dnd-core';\n/**\n * Create the React Context\n */\n\nexport var DndContext = React.createContext({\n  dragDropManager: undefined\n});\n/**\n * Creates the context object we're providing\n * @param backend\n * @param context\n */\n\nexport function createDndContext(backend, context, options, debugMode) {\n  return {\n    dragDropManager: createDragDropManager(backend, context, options, debugMode)\n  };\n}","// cheap lodash replacements\nexport function memoize(fn) {\n  var result = null;\n\n  var memoized = function memoized() {\n    if (result == null) {\n      result = fn();\n    }\n\n    return result;\n  };\n\n  return memoized;\n}\n/**\n * drop-in replacement for _.without\n */\n\nexport function without(items, item) {\n  return items.filter(function (i) {\n    return i !== item;\n  });\n}\nexport function union(itemsA, itemsB) {\n  var set = new Set();\n\n  var insertItem = function insertItem(item) {\n    return set.add(item);\n  };\n\n  itemsA.forEach(insertItem);\n  itemsB.forEach(insertItem);\n  var result = [];\n  set.forEach(function (key) {\n    return result.push(key);\n  });\n  return result;\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { union, without } from './utils/js_utils';\nexport var EnterLeaveCounter = /*#__PURE__*/function () {\n  function EnterLeaveCounter(isNodeInDocument) {\n    _classCallCheck(this, EnterLeaveCounter);\n\n    this.entered = [];\n    this.isNodeInDocument = isNodeInDocument;\n  }\n\n  _createClass(EnterLeaveCounter, [{\n    key: \"enter\",\n    value: function enter(enteringNode) {\n      var _this = this;\n\n      var previousLength = this.entered.length;\n\n      var isNodeEntered = function isNodeEntered(node) {\n        return _this.isNodeInDocument(node) && (!node.contains || node.contains(enteringNode));\n      };\n\n      this.entered = union(this.entered.filter(isNodeEntered), [enteringNode]);\n      return previousLength === 0 && this.entered.length > 0;\n    }\n  }, {\n    key: \"leave\",\n    value: function leave(leavingNode) {\n      var previousLength = this.entered.length;\n      this.entered = without(this.entered.filter(this.isNodeInDocument), leavingNode);\n      return previousLength > 0 && this.entered.length === 0;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.entered = [];\n    }\n  }]);\n\n  return EnterLeaveCounter;\n}();","import { memoize } from './utils/js_utils';\nexport var isFirefox = memoize(function () {\n  return /firefox/i.test(navigator.userAgent);\n});\nexport var isSafari = memoize(function () {\n  return Boolean(window.safari);\n});","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nexport var MonotonicInterpolant = /*#__PURE__*/function () {\n  function MonotonicInterpolant(xs, ys) {\n    _classCallCheck(this, MonotonicInterpolant);\n\n    var length = xs.length; // Rearrange xs and ys so that xs is sorted\n\n    var indexes = [];\n\n    for (var i = 0; i < length; i++) {\n      indexes.push(i);\n    }\n\n    indexes.sort(function (a, b) {\n      return xs[a] < xs[b] ? -1 : 1;\n    }); // Get consecutive differences and slopes\n\n    var dys = [];\n    var dxs = [];\n    var ms = [];\n    var dx;\n    var dy;\n\n    for (var _i = 0; _i < length - 1; _i++) {\n      dx = xs[_i + 1] - xs[_i];\n      dy = ys[_i + 1] - ys[_i];\n      dxs.push(dx);\n      dys.push(dy);\n      ms.push(dy / dx);\n    } // Get degree-1 coefficients\n\n\n    var c1s = [ms[0]];\n\n    for (var _i2 = 0; _i2 < dxs.length - 1; _i2++) {\n      var m2 = ms[_i2];\n      var mNext = ms[_i2 + 1];\n\n      if (m2 * mNext <= 0) {\n        c1s.push(0);\n      } else {\n        dx = dxs[_i2];\n        var dxNext = dxs[_i2 + 1];\n        var common = dx + dxNext;\n        c1s.push(3 * common / ((common + dxNext) / m2 + (common + dx) / mNext));\n      }\n    }\n\n    c1s.push(ms[ms.length - 1]); // Get degree-2 and degree-3 coefficients\n\n    var c2s = [];\n    var c3s = [];\n    var m;\n\n    for (var _i3 = 0; _i3 < c1s.length - 1; _i3++) {\n      m = ms[_i3];\n      var c1 = c1s[_i3];\n      var invDx = 1 / dxs[_i3];\n\n      var _common = c1 + c1s[_i3 + 1] - m - m;\n\n      c2s.push((m - c1 - _common) * invDx);\n      c3s.push(_common * invDx * invDx);\n    }\n\n    this.xs = xs;\n    this.ys = ys;\n    this.c1s = c1s;\n    this.c2s = c2s;\n    this.c3s = c3s;\n  }\n\n  _createClass(MonotonicInterpolant, [{\n    key: \"interpolate\",\n    value: function interpolate(x) {\n      var xs = this.xs,\n          ys = this.ys,\n          c1s = this.c1s,\n          c2s = this.c2s,\n          c3s = this.c3s; // The rightmost point in the dataset should give an exact result\n\n      var i = xs.length - 1;\n\n      if (x === xs[i]) {\n        return ys[i];\n      } // Search for the interval x is in, returning the corresponding y if x is one of the original xs\n\n\n      var low = 0;\n      var high = c3s.length - 1;\n      var mid;\n\n      while (low <= high) {\n        mid = Math.floor(0.5 * (low + high));\n        var xHere = xs[mid];\n\n        if (xHere < x) {\n          low = mid + 1;\n        } else if (xHere > x) {\n          high = mid - 1;\n        } else {\n          return ys[mid];\n        }\n      }\n\n      i = Math.max(0, high); // Interpolate\n\n      var diff = x - xs[i];\n      var diffSq = diff * diff;\n      return ys[i] + c1s[i] * diff + c2s[i] * diffSq + c3s[i] * diff * diffSq;\n    }\n  }]);\n\n  return MonotonicInterpolant;\n}();","import { isSafari, isFirefox } from './BrowserDetector';\nimport { MonotonicInterpolant } from './MonotonicInterpolant';\nvar ELEMENT_NODE = 1;\nexport function getNodeClientOffset(node) {\n  var el = node.nodeType === ELEMENT_NODE ? node : node.parentElement;\n\n  if (!el) {\n    return null;\n  }\n\n  var _el$getBoundingClient = el.getBoundingClientRect(),\n      top = _el$getBoundingClient.top,\n      left = _el$getBoundingClient.left;\n\n  return {\n    x: left,\n    y: top\n  };\n}\nexport function getEventClientOffset(e) {\n  return {\n    x: e.clientX,\n    y: e.clientY\n  };\n}\n\nfunction isImageNode(node) {\n  var _document$documentEle;\n\n  return node.nodeName === 'IMG' && (isFirefox() || !((_document$documentEle = document.documentElement) === null || _document$documentEle === void 0 ? void 0 : _document$documentEle.contains(node)));\n}\n\nfunction getDragPreviewSize(isImage, dragPreview, sourceWidth, sourceHeight) {\n  var dragPreviewWidth = isImage ? dragPreview.width : sourceWidth;\n  var dragPreviewHeight = isImage ? dragPreview.height : sourceHeight; // Work around @2x coordinate discrepancies in browsers\n\n  if (isSafari() && isImage) {\n    dragPreviewHeight /= window.devicePixelRatio;\n    dragPreviewWidth /= window.devicePixelRatio;\n  }\n\n  return {\n    dragPreviewWidth: dragPreviewWidth,\n    dragPreviewHeight: dragPreviewHeight\n  };\n}\n\nexport function getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint) {\n  // The browsers will use the image intrinsic size under different conditions.\n  // Firefox only cares if it's an image, but WebKit also wants it to be detached.\n  var isImage = isImageNode(dragPreview);\n  var dragPreviewNode = isImage ? sourceNode : dragPreview;\n  var dragPreviewNodeOffsetFromClient = getNodeClientOffset(dragPreviewNode);\n  var offsetFromDragPreview = {\n    x: clientOffset.x - dragPreviewNodeOffsetFromClient.x,\n    y: clientOffset.y - dragPreviewNodeOffsetFromClient.y\n  };\n  var sourceWidth = sourceNode.offsetWidth,\n      sourceHeight = sourceNode.offsetHeight;\n  var anchorX = anchorPoint.anchorX,\n      anchorY = anchorPoint.anchorY;\n\n  var _getDragPreviewSize = getDragPreviewSize(isImage, dragPreview, sourceWidth, sourceHeight),\n      dragPreviewWidth = _getDragPreviewSize.dragPreviewWidth,\n      dragPreviewHeight = _getDragPreviewSize.dragPreviewHeight;\n\n  var calculateYOffset = function calculateYOffset() {\n    var interpolantY = new MonotonicInterpolant([0, 0.5, 1], [// Dock to the top\n    offsetFromDragPreview.y, // Align at the center\n    offsetFromDragPreview.y / sourceHeight * dragPreviewHeight, // Dock to the bottom\n    offsetFromDragPreview.y + dragPreviewHeight - sourceHeight]);\n    var y = interpolantY.interpolate(anchorY); // Work around Safari 8 positioning bug\n\n    if (isSafari() && isImage) {\n      // We'll have to wait for @3x to see if this is entirely correct\n      y += (window.devicePixelRatio - 1) * dragPreviewHeight;\n    }\n\n    return y;\n  };\n\n  var calculateXOffset = function calculateXOffset() {\n    // Interpolate coordinates depending on anchor point\n    // If you know a simpler way to do this, let me know\n    var interpolantX = new MonotonicInterpolant([0, 0.5, 1], [// Dock to the left\n    offsetFromDragPreview.x, // Align at the center\n    offsetFromDragPreview.x / sourceWidth * dragPreviewWidth, // Dock to the right\n    offsetFromDragPreview.x + dragPreviewWidth - sourceWidth]);\n    return interpolantX.interpolate(anchorX);\n  }; // Force offsets if specified in the options.\n\n\n  var offsetX = offsetPoint.offsetX,\n      offsetY = offsetPoint.offsetY;\n  var isManualOffsetX = offsetX === 0 || offsetX;\n  var isManualOffsetY = offsetY === 0 || offsetY;\n  return {\n    x: isManualOffsetX ? offsetX : calculateXOffset(),\n    y: isManualOffsetY ? offsetY : calculateYOffset()\n  };\n}","export var FILE = '__NATIVE_FILE__';\nexport var URL = '__NATIVE_URL__';\nexport var TEXT = '__NATIVE_TEXT__';","var _nativeTypesConfig;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport * as NativeTypes from '../NativeTypes';\nimport { getDataFromDataTransfer } from './getDataFromDataTransfer';\nexport var nativeTypesConfig = (_nativeTypesConfig = {}, _defineProperty(_nativeTypesConfig, NativeTypes.FILE, {\n  exposeProperties: {\n    files: function files(dataTransfer) {\n      return Array.prototype.slice.call(dataTransfer.files);\n    },\n    items: function items(dataTransfer) {\n      return dataTransfer.items;\n    }\n  },\n  matchesTypes: ['Files']\n}), _defineProperty(_nativeTypesConfig, NativeTypes.URL, {\n  exposeProperties: {\n    urls: function urls(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '').split('\\n');\n    }\n  },\n  matchesTypes: ['Url', 'text/uri-list']\n}), _defineProperty(_nativeTypesConfig, NativeTypes.TEXT, {\n  exposeProperties: {\n    text: function text(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '');\n    }\n  },\n  matchesTypes: ['Text', 'text/plain']\n}), _nativeTypesConfig);","export function getDataFromDataTransfer(dataTransfer, typesToTry, defaultValue) {\n  var result = typesToTry.reduce(function (resultSoFar, typeToTry) {\n    return resultSoFar || dataTransfer.getData(typeToTry);\n  }, '');\n  return result != null ? result : defaultValue;\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nexport var NativeDragSource = /*#__PURE__*/function () {\n  function NativeDragSource(config) {\n    _classCallCheck(this, NativeDragSource);\n\n    this.config = config;\n    this.item = {};\n    this.initializeExposedProperties();\n  }\n\n  _createClass(NativeDragSource, [{\n    key: \"initializeExposedProperties\",\n    value: function initializeExposedProperties() {\n      var _this = this;\n\n      Object.keys(this.config.exposeProperties).forEach(function (property) {\n        Object.defineProperty(_this.item, property, {\n          configurable: true,\n          enumerable: true,\n          get: function get() {\n            // eslint-disable-next-line no-console\n            console.warn(\"Browser doesn't allow reading \\\"\".concat(property, \"\\\" until the drop event.\"));\n            return null;\n          }\n        });\n      });\n    }\n  }, {\n    key: \"loadDataTransfer\",\n    value: function loadDataTransfer(dataTransfer) {\n      var _this2 = this;\n\n      if (dataTransfer) {\n        var newProperties = {};\n        Object.keys(this.config.exposeProperties).forEach(function (property) {\n          newProperties[property] = {\n            value: _this2.config.exposeProperties[property](dataTransfer, _this2.config.matchesTypes),\n            configurable: true,\n            enumerable: true\n          };\n        });\n        Object.defineProperties(this.item, newProperties);\n      }\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      return true;\n    }\n  }, {\n    key: \"beginDrag\",\n    value: function beginDrag() {\n      return this.item;\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging(monitor, handle) {\n      return handle === monitor.getSourceId();\n    }\n  }, {\n    key: \"endDrag\",\n    value: function endDrag() {// empty\n    }\n  }]);\n\n  return NativeDragSource;\n}();","import { nativeTypesConfig } from './nativeTypesConfig';\nimport { NativeDragSource } from './NativeDragSource';\nexport function createNativeDragSource(type, dataTransfer) {\n  var result = new NativeDragSource(nativeTypesConfig[type]);\n  result.loadDataTransfer(dataTransfer);\n  return result;\n}\nexport function matchNativeItemType(dataTransfer) {\n  if (!dataTransfer) {\n    return null;\n  }\n\n  var dataTransferTypes = Array.prototype.slice.call(dataTransfer.types || []);\n  return Object.keys(nativeTypesConfig).filter(function (nativeItemType) {\n    var matchesTypes = nativeTypesConfig[nativeItemType].matchesTypes;\n    return matchesTypes.some(function (t) {\n      return dataTransferTypes.indexOf(t) > -1;\n    });\n  })[0] || null;\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nexport var OptionsReader = /*#__PURE__*/function () {\n  function OptionsReader(globalContext) {\n    _classCallCheck(this, OptionsReader);\n\n    this.globalContext = globalContext;\n  }\n\n  _createClass(OptionsReader, [{\n    key: \"window\",\n    get: function get() {\n      if (this.globalContext) {\n        return this.globalContext;\n      } else if (typeof window !== 'undefined') {\n        return window;\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      if (this.window) {\n        return this.window.document;\n      }\n\n      return undefined;\n    }\n  }]);\n\n  return OptionsReader;\n}();","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { EnterLeaveCounter } from './EnterLeaveCounter';\nimport { isFirefox } from './BrowserDetector';\nimport { getNodeClientOffset, getEventClientOffset, getDragPreviewOffset } from './OffsetUtils';\nimport { createNativeDragSource, matchNativeItemType } from './NativeDragSources';\nimport * as NativeTypes from './NativeTypes';\nimport { OptionsReader } from './OptionsReader';\nexport var HTML5BackendImpl = /*#__PURE__*/function () {\n  function HTML5BackendImpl(manager, globalContext) {\n    var _this = this;\n\n    _classCallCheck(this, HTML5BackendImpl);\n\n    this.sourcePreviewNodes = new Map();\n    this.sourcePreviewNodeOptions = new Map();\n    this.sourceNodes = new Map();\n    this.sourceNodeOptions = new Map();\n    this.dragStartSourceIds = null;\n    this.dropTargetIds = [];\n    this.dragEnterTargetIds = [];\n    this.currentNativeSource = null;\n    this.currentNativeHandle = null;\n    this.currentDragSourceNode = null;\n    this.altKeyPressed = false;\n    this.mouseMoveTimeoutTimer = null;\n    this.asyncEndDragFrameId = null;\n    this.dragOverTargetIds = null;\n\n    this.getSourceClientOffset = function (sourceId) {\n      var source = _this.sourceNodes.get(sourceId);\n\n      return source && getNodeClientOffset(source) || null;\n    };\n\n    this.endDragNativeItem = function () {\n      if (!_this.isDraggingNativeItem()) {\n        return;\n      }\n\n      _this.actions.endDrag();\n\n      if (_this.currentNativeHandle) {\n        _this.registry.removeSource(_this.currentNativeHandle);\n      }\n\n      _this.currentNativeHandle = null;\n      _this.currentNativeSource = null;\n    };\n\n    this.isNodeInDocument = function (node) {\n      // Check the node either in the main document or in the current context\n      return Boolean(node && _this.document && _this.document.body && document.body.contains(node));\n    };\n\n    this.endDragIfSourceWasRemovedFromDOM = function () {\n      var node = _this.currentDragSourceNode;\n\n      if (_this.isNodeInDocument(node)) {\n        return;\n      }\n\n      if (_this.clearCurrentDragSourceNode()) {\n        _this.actions.endDrag();\n      }\n    };\n\n    this.handleTopDragStartCapture = function () {\n      _this.clearCurrentDragSourceNode();\n\n      _this.dragStartSourceIds = [];\n    };\n\n    this.handleTopDragStart = function (e) {\n      if (e.defaultPrevented) {\n        return;\n      }\n\n      var dragStartSourceIds = _this.dragStartSourceIds;\n      _this.dragStartSourceIds = null;\n      var clientOffset = getEventClientOffset(e); // Avoid crashing if we missed a drop event or our previous drag died\n\n      if (_this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      } // Don't publish the source just yet (see why below)\n\n\n      _this.actions.beginDrag(dragStartSourceIds || [], {\n        publishSource: false,\n        getSourceClientOffset: _this.getSourceClientOffset,\n        clientOffset: clientOffset\n      });\n\n      var dataTransfer = e.dataTransfer;\n      var nativeType = matchNativeItemType(dataTransfer);\n\n      if (_this.monitor.isDragging()) {\n        if (dataTransfer && typeof dataTransfer.setDragImage === 'function') {\n          // Use custom drag image if user specifies it.\n          // If child drag source refuses drag but parent agrees,\n          // use parent's node as drag image. Neither works in IE though.\n          var sourceId = _this.monitor.getSourceId();\n\n          var sourceNode = _this.sourceNodes.get(sourceId);\n\n          var dragPreview = _this.sourcePreviewNodes.get(sourceId) || sourceNode;\n\n          if (dragPreview) {\n            var _this$getCurrentSourc = _this.getCurrentSourcePreviewNodeOptions(),\n                anchorX = _this$getCurrentSourc.anchorX,\n                anchorY = _this$getCurrentSourc.anchorY,\n                offsetX = _this$getCurrentSourc.offsetX,\n                offsetY = _this$getCurrentSourc.offsetY;\n\n            var anchorPoint = {\n              anchorX: anchorX,\n              anchorY: anchorY\n            };\n            var offsetPoint = {\n              offsetX: offsetX,\n              offsetY: offsetY\n            };\n            var dragPreviewOffset = getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint);\n            dataTransfer.setDragImage(dragPreview, dragPreviewOffset.x, dragPreviewOffset.y);\n          }\n        }\n\n        try {\n          // Firefox won't drag without setting data\n          dataTransfer === null || dataTransfer === void 0 ? void 0 : dataTransfer.setData('application/json', {});\n        } catch (err) {} // IE doesn't support MIME types in setData\n        // Store drag source node so we can check whether\n        // it is removed from DOM and trigger endDrag manually.\n\n\n        _this.setCurrentDragSourceNode(e.target); // Now we are ready to publish the drag source.. or are we not?\n\n\n        var _this$getCurrentSourc2 = _this.getCurrentSourcePreviewNodeOptions(),\n            captureDraggingState = _this$getCurrentSourc2.captureDraggingState;\n\n        if (!captureDraggingState) {\n          // Usually we want to publish it in the next tick so that browser\n          // is able to screenshot the current (not yet dragging) state.\n          //\n          // It also neatly avoids a situation where render() returns null\n          // in the same tick for the source element, and browser freaks out.\n          setTimeout(function () {\n            return _this.actions.publishDragSource();\n          }, 0);\n        } else {\n          // In some cases the user may want to override this behavior, e.g.\n          // to work around IE not supporting custom drag previews.\n          //\n          // When using a custom drag layer, the only way to prevent\n          // the default drag preview from drawing in IE is to screenshot\n          // the dragging state in which the node itself has zero opacity\n          // and height. In this case, though, returning null from render()\n          // will abruptly end the dragging, which is not obvious.\n          //\n          // This is the reason such behavior is strictly opt-in.\n          _this.actions.publishDragSource();\n        }\n      } else if (nativeType) {\n        // A native item (such as URL) dragged from inside the document\n        _this.beginDragNativeItem(nativeType);\n      } else if (dataTransfer && !dataTransfer.types && (e.target && !e.target.hasAttribute || !e.target.hasAttribute('draggable'))) {\n        // Looks like a Safari bug: dataTransfer.types is null, but there was no draggable.\n        // Just let it drag. It's a native type (URL or text) and will be picked up in\n        // dragenter handler.\n        return;\n      } else {\n        // If by this time no drag source reacted, tell browser not to drag.\n        e.preventDefault();\n      }\n    };\n\n    this.handleTopDragEndCapture = function () {\n      if (_this.clearCurrentDragSourceNode()) {\n        // Firefox can dispatch this event in an infinite loop\n        // if dragend handler does something like showing an alert.\n        // Only proceed if we have not handled it already.\n        _this.actions.endDrag();\n      }\n    };\n\n    this.handleTopDragEnterCapture = function (e) {\n      _this.dragEnterTargetIds = [];\n\n      var isFirstEnter = _this.enterLeaveCounter.enter(e.target);\n\n      if (!isFirstEnter || _this.monitor.isDragging()) {\n        return;\n      }\n\n      var dataTransfer = e.dataTransfer;\n      var nativeType = matchNativeItemType(dataTransfer);\n\n      if (nativeType) {\n        // A native item (such as file or URL) dragged from outside the document\n        _this.beginDragNativeItem(nativeType, dataTransfer);\n      }\n    };\n\n    this.handleTopDragEnter = function (e) {\n      var dragEnterTargetIds = _this.dragEnterTargetIds;\n      _this.dragEnterTargetIds = [];\n\n      if (!_this.monitor.isDragging()) {\n        // This is probably a native item type we don't understand.\n        return;\n      }\n\n      _this.altKeyPressed = e.altKey;\n\n      if (!isFirefox()) {\n        // Don't emit hover in `dragenter` on Firefox due to an edge case.\n        // If the target changes position as the result of `dragenter`, Firefox\n        // will still happily dispatch `dragover` despite target being no longer\n        // there. The easy solution is to only fire `hover` in `dragover` on FF.\n        _this.actions.hover(dragEnterTargetIds, {\n          clientOffset: getEventClientOffset(e)\n        });\n      }\n\n      var canDrop = dragEnterTargetIds.some(function (targetId) {\n        return _this.monitor.canDropOnTarget(targetId);\n      });\n\n      if (canDrop) {\n        // IE requires this to fire dragover events\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n        }\n      }\n    };\n\n    this.handleTopDragOverCapture = function () {\n      _this.dragOverTargetIds = [];\n    };\n\n    this.handleTopDragOver = function (e) {\n      var dragOverTargetIds = _this.dragOverTargetIds;\n      _this.dragOverTargetIds = [];\n\n      if (!_this.monitor.isDragging()) {\n        // This is probably a native item type we don't understand.\n        // Prevent default \"drop and blow away the whole document\" action.\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = 'none';\n        }\n\n        return;\n      }\n\n      _this.altKeyPressed = e.altKey;\n\n      _this.actions.hover(dragOverTargetIds || [], {\n        clientOffset: getEventClientOffset(e)\n      });\n\n      var canDrop = (dragOverTargetIds || []).some(function (targetId) {\n        return _this.monitor.canDropOnTarget(targetId);\n      });\n\n      if (canDrop) {\n        // Show user-specified drop effect.\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n        }\n      } else if (_this.isDraggingNativeItem()) {\n        // Don't show a nice cursor but still prevent default\n        // \"drop and blow away the whole document\" action.\n        e.preventDefault();\n      } else {\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = 'none';\n        }\n      }\n    };\n\n    this.handleTopDragLeaveCapture = function (e) {\n      if (_this.isDraggingNativeItem()) {\n        e.preventDefault();\n      }\n\n      var isLastLeave = _this.enterLeaveCounter.leave(e.target);\n\n      if (!isLastLeave) {\n        return;\n      }\n\n      if (_this.isDraggingNativeItem()) {\n        _this.endDragNativeItem();\n      }\n    };\n\n    this.handleTopDropCapture = function (e) {\n      _this.dropTargetIds = [];\n      e.preventDefault();\n\n      if (_this.isDraggingNativeItem()) {\n        var _this$currentNativeSo;\n\n        (_this$currentNativeSo = _this.currentNativeSource) === null || _this$currentNativeSo === void 0 ? void 0 : _this$currentNativeSo.loadDataTransfer(e.dataTransfer);\n      }\n\n      _this.enterLeaveCounter.reset();\n    };\n\n    this.handleTopDrop = function (e) {\n      var dropTargetIds = _this.dropTargetIds;\n      _this.dropTargetIds = [];\n\n      _this.actions.hover(dropTargetIds, {\n        clientOffset: getEventClientOffset(e)\n      });\n\n      _this.actions.drop({\n        dropEffect: _this.getCurrentDropEffect()\n      });\n\n      if (_this.isDraggingNativeItem()) {\n        _this.endDragNativeItem();\n      } else {\n        _this.endDragIfSourceWasRemovedFromDOM();\n      }\n    };\n\n    this.handleSelectStart = function (e) {\n      var target = e.target; // Only IE requires us to explicitly say\n      // we want drag drop operation to start\n\n      if (typeof target.dragDrop !== 'function') {\n        return;\n      } // Inputs and textareas should be selectable\n\n\n      if (target.tagName === 'INPUT' || target.tagName === 'SELECT' || target.tagName === 'TEXTAREA' || target.isContentEditable) {\n        return;\n      } // For other targets, ask IE\n      // to enable drag and drop\n\n\n      e.preventDefault();\n      target.dragDrop();\n    };\n\n    this.options = new OptionsReader(globalContext);\n    this.actions = manager.getActions();\n    this.monitor = manager.getMonitor();\n    this.registry = manager.getRegistry();\n    this.enterLeaveCounter = new EnterLeaveCounter(this.isNodeInDocument);\n  }\n  /**\n   * Generate profiling statistics for the HTML5Backend.\n   */\n\n\n  _createClass(HTML5BackendImpl, [{\n    key: \"profile\",\n    value: function profile() {\n      var _this$dragStartSource, _this$dragOverTargetI;\n\n      return {\n        sourcePreviewNodes: this.sourcePreviewNodes.size,\n        sourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,\n        sourceNodeOptions: this.sourceNodeOptions.size,\n        sourceNodes: this.sourceNodes.size,\n        dragStartSourceIds: ((_this$dragStartSource = this.dragStartSourceIds) === null || _this$dragStartSource === void 0 ? void 0 : _this$dragStartSource.length) || 0,\n        dropTargetIds: this.dropTargetIds.length,\n        dragEnterTargetIds: this.dragEnterTargetIds.length,\n        dragOverTargetIds: ((_this$dragOverTargetI = this.dragOverTargetIds) === null || _this$dragOverTargetI === void 0 ? void 0 : _this$dragOverTargetI.length) || 0\n      };\n    } // public for test\n\n  }, {\n    key: \"setup\",\n    value: function setup() {\n      if (this.window === undefined) {\n        return;\n      }\n\n      if (this.window.__isReactDndBackendSetUp) {\n        throw new Error('Cannot have two HTML5 backends at the same time.');\n      }\n\n      this.window.__isReactDndBackendSetUp = true;\n      this.addEventListeners(this.window);\n    }\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      if (this.window === undefined) {\n        return;\n      }\n\n      this.window.__isReactDndBackendSetUp = false;\n      this.removeEventListeners(this.window);\n      this.clearCurrentDragSourceNode();\n\n      if (this.asyncEndDragFrameId) {\n        this.window.cancelAnimationFrame(this.asyncEndDragFrameId);\n      }\n    }\n  }, {\n    key: \"connectDragPreview\",\n    value: function connectDragPreview(sourceId, node, options) {\n      var _this2 = this;\n\n      this.sourcePreviewNodeOptions.set(sourceId, options);\n      this.sourcePreviewNodes.set(sourceId, node);\n      return function () {\n        _this2.sourcePreviewNodes.delete(sourceId);\n\n        _this2.sourcePreviewNodeOptions.delete(sourceId);\n      };\n    }\n  }, {\n    key: \"connectDragSource\",\n    value: function connectDragSource(sourceId, node, options) {\n      var _this3 = this;\n\n      this.sourceNodes.set(sourceId, node);\n      this.sourceNodeOptions.set(sourceId, options);\n\n      var handleDragStart = function handleDragStart(e) {\n        return _this3.handleDragStart(e, sourceId);\n      };\n\n      var handleSelectStart = function handleSelectStart(e) {\n        return _this3.handleSelectStart(e);\n      };\n\n      node.setAttribute('draggable', 'true');\n      node.addEventListener('dragstart', handleDragStart);\n      node.addEventListener('selectstart', handleSelectStart);\n      return function () {\n        _this3.sourceNodes.delete(sourceId);\n\n        _this3.sourceNodeOptions.delete(sourceId);\n\n        node.removeEventListener('dragstart', handleDragStart);\n        node.removeEventListener('selectstart', handleSelectStart);\n        node.setAttribute('draggable', 'false');\n      };\n    }\n  }, {\n    key: \"connectDropTarget\",\n    value: function connectDropTarget(targetId, node) {\n      var _this4 = this;\n\n      var handleDragEnter = function handleDragEnter(e) {\n        return _this4.handleDragEnter(e, targetId);\n      };\n\n      var handleDragOver = function handleDragOver(e) {\n        return _this4.handleDragOver(e, targetId);\n      };\n\n      var handleDrop = function handleDrop(e) {\n        return _this4.handleDrop(e, targetId);\n      };\n\n      node.addEventListener('dragenter', handleDragEnter);\n      node.addEventListener('dragover', handleDragOver);\n      node.addEventListener('drop', handleDrop);\n      return function () {\n        node.removeEventListener('dragenter', handleDragEnter);\n        node.removeEventListener('dragover', handleDragOver);\n        node.removeEventListener('drop', handleDrop);\n      };\n    }\n  }, {\n    key: \"addEventListeners\",\n    value: function addEventListeners(target) {\n      // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n      if (!target.addEventListener) {\n        return;\n      }\n\n      target.addEventListener('dragstart', this.handleTopDragStart);\n      target.addEventListener('dragstart', this.handleTopDragStartCapture, true);\n      target.addEventListener('dragend', this.handleTopDragEndCapture, true);\n      target.addEventListener('dragenter', this.handleTopDragEnter);\n      target.addEventListener('dragenter', this.handleTopDragEnterCapture, true);\n      target.addEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n      target.addEventListener('dragover', this.handleTopDragOver);\n      target.addEventListener('dragover', this.handleTopDragOverCapture, true);\n      target.addEventListener('drop', this.handleTopDrop);\n      target.addEventListener('drop', this.handleTopDropCapture, true);\n    }\n  }, {\n    key: \"removeEventListeners\",\n    value: function removeEventListeners(target) {\n      // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n      if (!target.removeEventListener) {\n        return;\n      }\n\n      target.removeEventListener('dragstart', this.handleTopDragStart);\n      target.removeEventListener('dragstart', this.handleTopDragStartCapture, true);\n      target.removeEventListener('dragend', this.handleTopDragEndCapture, true);\n      target.removeEventListener('dragenter', this.handleTopDragEnter);\n      target.removeEventListener('dragenter', this.handleTopDragEnterCapture, true);\n      target.removeEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n      target.removeEventListener('dragover', this.handleTopDragOver);\n      target.removeEventListener('dragover', this.handleTopDragOverCapture, true);\n      target.removeEventListener('drop', this.handleTopDrop);\n      target.removeEventListener('drop', this.handleTopDropCapture, true);\n    }\n  }, {\n    key: \"getCurrentSourceNodeOptions\",\n    value: function getCurrentSourceNodeOptions() {\n      var sourceId = this.monitor.getSourceId();\n      var sourceNodeOptions = this.sourceNodeOptions.get(sourceId);\n      return _objectSpread({\n        dropEffect: this.altKeyPressed ? 'copy' : 'move'\n      }, sourceNodeOptions || {});\n    }\n  }, {\n    key: \"getCurrentDropEffect\",\n    value: function getCurrentDropEffect() {\n      if (this.isDraggingNativeItem()) {\n        // It makes more sense to default to 'copy' for native resources\n        return 'copy';\n      }\n\n      return this.getCurrentSourceNodeOptions().dropEffect;\n    }\n  }, {\n    key: \"getCurrentSourcePreviewNodeOptions\",\n    value: function getCurrentSourcePreviewNodeOptions() {\n      var sourceId = this.monitor.getSourceId();\n      var sourcePreviewNodeOptions = this.sourcePreviewNodeOptions.get(sourceId);\n      return _objectSpread({\n        anchorX: 0.5,\n        anchorY: 0.5,\n        captureDraggingState: false\n      }, sourcePreviewNodeOptions || {});\n    }\n  }, {\n    key: \"isDraggingNativeItem\",\n    value: function isDraggingNativeItem() {\n      var itemType = this.monitor.getItemType();\n      return Object.keys(NativeTypes).some(function (key) {\n        return NativeTypes[key] === itemType;\n      });\n    }\n  }, {\n    key: \"beginDragNativeItem\",\n    value: function beginDragNativeItem(type, dataTransfer) {\n      this.clearCurrentDragSourceNode();\n      this.currentNativeSource = createNativeDragSource(type, dataTransfer);\n      this.currentNativeHandle = this.registry.addSource(type, this.currentNativeSource);\n      this.actions.beginDrag([this.currentNativeHandle]);\n    }\n  }, {\n    key: \"setCurrentDragSourceNode\",\n    value: function setCurrentDragSourceNode(node) {\n      var _this5 = this;\n\n      this.clearCurrentDragSourceNode();\n      this.currentDragSourceNode = node; // A timeout of > 0 is necessary to resolve Firefox issue referenced\n      // See:\n      //   * https://github.com/react-dnd/react-dnd/pull/928\n      //   * https://github.com/react-dnd/react-dnd/issues/869\n\n      var MOUSE_MOVE_TIMEOUT = 1000; // Receiving a mouse event in the middle of a dragging operation\n      // means it has ended and the drag source node disappeared from DOM,\n      // so the browser didn't dispatch the dragend event.\n      //\n      // We need to wait before we start listening for mousemove events.\n      // This is needed because the drag preview needs to be drawn or else it fires an 'mousemove' event\n      // immediately in some browsers.\n      //\n      // See:\n      //   * https://github.com/react-dnd/react-dnd/pull/928\n      //   * https://github.com/react-dnd/react-dnd/issues/869\n      //\n\n      this.mouseMoveTimeoutTimer = setTimeout(function () {\n        return _this5.window && _this5.window.addEventListener('mousemove', _this5.endDragIfSourceWasRemovedFromDOM, true);\n      }, MOUSE_MOVE_TIMEOUT);\n    }\n  }, {\n    key: \"clearCurrentDragSourceNode\",\n    value: function clearCurrentDragSourceNode() {\n      if (this.currentDragSourceNode) {\n        this.currentDragSourceNode = null;\n\n        if (this.window) {\n          this.window.clearTimeout(this.mouseMoveTimeoutTimer || undefined);\n          this.window.removeEventListener('mousemove', this.endDragIfSourceWasRemovedFromDOM, true);\n        }\n\n        this.mouseMoveTimeoutTimer = null;\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"handleDragStart\",\n    value: function handleDragStart(e, sourceId) {\n      if (e.defaultPrevented) {\n        return;\n      }\n\n      if (!this.dragStartSourceIds) {\n        this.dragStartSourceIds = [];\n      }\n\n      this.dragStartSourceIds.unshift(sourceId);\n    }\n  }, {\n    key: \"handleDragEnter\",\n    value: function handleDragEnter(e, targetId) {\n      this.dragEnterTargetIds.unshift(targetId);\n    }\n  }, {\n    key: \"handleDragOver\",\n    value: function handleDragOver(e, targetId) {\n      if (this.dragOverTargetIds === null) {\n        this.dragOverTargetIds = [];\n      }\n\n      this.dragOverTargetIds.unshift(targetId);\n    }\n  }, {\n    key: \"handleDrop\",\n    value: function handleDrop(e, targetId) {\n      this.dropTargetIds.unshift(targetId);\n    }\n  }, {\n    key: \"window\",\n    get: function get() {\n      return this.options.window;\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      return this.options.document;\n    }\n  }]);\n\n  return HTML5BackendImpl;\n}();","import { HTML5BackendImpl } from './HTML5BackendImpl';\nimport * as NativeTypes from './NativeTypes';\nexport { getEmptyImage } from './getEmptyImage';\nexport { NativeTypes };\nexport var HTML5Backend = function createBackend(manager, context) {\n  return new HTML5BackendImpl(manager, context);\n};","import { cloneElement } from 'react';\nimport { invariant } from '@react-dnd/invariant';\n\nfunction setRef(ref, node) {\n  if (typeof ref === 'function') {\n    ref(node);\n  } else {\n    ref.current = node;\n  }\n}\n\nexport function cloneWithRef(element, newRef) {\n  var previousRef = element.ref;\n  invariant(typeof previousRef !== 'string', 'Cannot connect React DnD to an element with an existing string ref. ' + 'Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. ' + 'Read more: https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute');\n\n  if (!previousRef) {\n    // When there is no ref on the element, use the new ref directly\n    return cloneElement(element, {\n      ref: newRef\n    });\n  } else {\n    return cloneElement(element, {\n      ref: function ref(node) {\n        setRef(previousRef, node);\n        setRef(newRef, node);\n      }\n    });\n  }\n}","import { isValidElement } from 'react';\nimport { cloneWithRef } from '../utils/cloneWithRef';\n\nfunction throwIfCompositeComponentElement(element) {\n  // Custom components can no longer be wrapped directly in React DnD 2.0\n  // so that we don't need to depend on findDOMNode() from react-dom.\n  if (typeof element.type === 'string') {\n    return;\n  }\n\n  var displayName = element.type.displayName || element.type.name || 'the component';\n  throw new Error('Only native element nodes can now be passed to React DnD connectors.' + \"You can either wrap \".concat(displayName, \" into a <div>, or turn it into a \") + 'drag source or a drop target itself.');\n}\n\nfunction wrapHookToRecognizeElement(hook) {\n  return function () {\n    var elementOrNode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n    // When passed a node, call the hook straight away.\n    if (!isValidElement(elementOrNode)) {\n      var node = elementOrNode;\n      hook(node, options); // return the node so it can be chained (e.g. when within callback refs\n      // <div ref={node => connectDragSource(connectDropTarget(node))}/>\n\n      return node;\n    } // If passed a ReactElement, clone it and attach this function as a ref.\n    // This helps us achieve a neat API where user doesn't even know that refs\n    // are being used under the hood.\n\n\n    var element = elementOrNode;\n    throwIfCompositeComponentElement(element); // When no options are passed, use the hook directly\n\n    var ref = options ? function (node) {\n      return hook(node, options);\n    } : hook;\n    return cloneWithRef(element, ref);\n  };\n}\n\nexport function wrapConnectorHooks(hooks) {\n  var wrappedHooks = {};\n  Object.keys(hooks).forEach(function (key) {\n    var hook = hooks[key]; // ref objects should be passed straight through without wrapping\n\n    if (key.endsWith('Ref')) {\n      wrappedHooks[key] = hooks[key];\n    } else {\n      var wrappedHook = wrapHookToRecognizeElement(hook);\n\n      wrappedHooks[key] = function () {\n        return wrappedHook;\n      };\n    }\n  });\n  return wrappedHooks;\n}","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nexport function rawAsap(task) {\n  if (!queue.length) {\n    requestFlush();\n    flushing = true;\n  } // Equivalent to push, but avoids a function call.\n\n\n  queue[queue.length] = task;\n}\nvar queue = []; // Once a flush has been requested, no further calls to `requestFlush` are\n// necessary until the next `flush` completes.\n// @ts-ignore\n\nvar flushing = false; // `requestFlush` is an implementation-specific method that attempts to kick\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser's own event loop.\n\nvar requestFlush; // The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\n\nvar index = 0; // If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\n\nvar capacity = 1024; // The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\n\nfunction flush() {\n  while (index < queue.length) {\n    var currentIndex = index; // Advance the index before calling the task. This ensures that we will\n    // begin flushing on the next task the task throws an error.\n\n    index = index + 1;\n    queue[currentIndex].call(); // Prevent leaking memory for long chains of recursive calls to `asap`.\n    // If we call `asap` within tasks scheduled by `asap`, the queue will\n    // grow, but to avoid an O(n) walk for every task we execute, we don't\n    // shift tasks off the queue after they have been executed.\n    // Instead, we periodically shift 1024 tasks off the queue.\n\n    if (index > capacity) {\n      // Manually shift all values starting at the index back to the\n      // beginning of the queue.\n      for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n        queue[scan] = queue[scan + index];\n      }\n\n      queue.length -= index;\n      index = 0;\n    }\n  }\n\n  queue.length = 0;\n  index = 0;\n  flushing = false;\n} // `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\n\n\nvar scope = typeof global !== 'undefined' ? global : self;\nvar BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver; // MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\n\nif (typeof BrowserMutationObserver === 'function') {\n  requestFlush = makeRequestCallFromMutationObserver(flush); // MessageChannels are desirable because they give direct access to the HTML\n  // task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n  // 11-12, and in web workers in many engines.\n  // Although message channels yield to any queued rendering and IO tasks, they\n  // would be better than imposing the 4ms delay of timers.\n  // However, they do not work reliably in Internet Explorer or Safari.\n  // Internet Explorer 10 is the only browser that has setImmediate but does\n  // not have MutationObservers.\n  // Although setImmediate yields to the browser's renderer, it would be\n  // preferrable to falling back to setTimeout since it does not have\n  // the minimum 4ms penalty.\n  // Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n  // Desktop to a lesser extent) that renders both setImmediate and\n  // MessageChannel useless for the purposes of ASAP.\n  // https://github.com/kriskowal/q/issues/396\n  // Timers are implemented universally.\n  // We fall back to timers in workers in most engines, and in foreground\n  // contexts in the following browsers.\n  // However, note that even this simple case requires nuances to operate in a\n  // broad spectrum of browsers.\n  //\n  // - Firefox 3-13\n  // - Internet Explorer 6-9\n  // - iPad Safari 4.3\n  // - Lynx 2.8.7\n} else {\n  requestFlush = makeRequestCallFromTimer(flush);\n} // `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.js’s\n// `process.on(\"uncaughtException\")` or by a domain.\n\n\nrawAsap.requestFlush = requestFlush; // To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\n\nfunction makeRequestCallFromMutationObserver(callback) {\n  var toggle = 1;\n  var observer = new BrowserMutationObserver(callback);\n  var node = document.createTextNode('');\n  observer.observe(node, {\n    characterData: true\n  });\n  return function requestCall() {\n    toggle = -toggle;\n    node.data = toggle;\n  };\n} // The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\n\nfunction makeRequestCallFromTimer(callback) {\n  return function requestCall() {\n    // We dispatch a timeout with a specified delay of 0 for engines that\n    // can reliably accommodate that request. This will usually be snapped\n    // to a 4 milisecond delay, but once we're flushing, there's no delay\n    // between events.\n    var timeoutHandle = setTimeout(handleTimer, 0); // However, since this timer gets frequently dropped in Firefox\n    // workers, we enlist an interval handle that will try to fire\n    // an event 20 times per second until it succeeds.\n\n    var intervalHandle = setInterval(handleTimer, 50);\n\n    function handleTimer() {\n      // Whichever timer succeeds will cancel both timers and\n      // execute the callback.\n      clearTimeout(timeoutHandle);\n      clearInterval(intervalHandle);\n      callback();\n    }\n  };\n} // This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\n\n\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer; // ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js","export var ListenerType;\n\n(function (ListenerType) {\n  ListenerType[\"mouse\"] = \"mouse\";\n  ListenerType[\"touch\"] = \"touch\";\n  ListenerType[\"keyboard\"] = \"keyboard\";\n})(ListenerType || (ListenerType = {}));","// Used for MouseEvent.buttons (note the s on the end).\nvar MouseButtons = {\n  Left: 1,\n  Right: 2,\n  Center: 4\n}; // Used for e.button (note the lack of an s on the end).\n\nvar MouseButton = {\n  Left: 0,\n  Center: 1,\n  Right: 2\n};\n/**\n * Only touch events and mouse events where the left button is pressed should initiate a drag.\n * @param {MouseEvent | TouchEvent} e The event\n */\n\nexport function eventShouldStartDrag(e) {\n  // For touch events, button will be undefined. If e.button is defined,\n  // then it should be MouseButton.Left.\n  return e.button === undefined || e.button === MouseButton.Left;\n}\n/**\n * Only touch events and mouse events where the left mouse button is no longer held should end a drag.\n * It's possible the user mouse downs with the left mouse button, then mouse down and ups with the right mouse button.\n * We don't want releasing the right mouse button to end the drag.\n * @param {MouseEvent | TouchEvent} e The event\n */\n\nexport function eventShouldEndDrag(e) {\n  // Touch events will have buttons be undefined, while mouse events will have e.buttons's left button\n  // bit field unset if the left mouse button has been released\n  return e.buttons === undefined || (e.buttons & MouseButtons.Left) === 0;\n}\nexport function isTouchEvent(e) {\n  return !!e.targetTouches;\n}","import { isTouchEvent } from './predicates';\nvar ELEMENT_NODE = 1;\nexport function getNodeClientOffset(node) {\n  var el = node.nodeType === ELEMENT_NODE ? node : node.parentElement;\n\n  if (!el) {\n    return undefined;\n  }\n\n  var _el$getBoundingClient = el.getBoundingClientRect(),\n      top = _el$getBoundingClient.top,\n      left = _el$getBoundingClient.left;\n\n  return {\n    x: left,\n    y: top\n  };\n}\nexport function getEventClientTouchOffset(e, lastTargetTouchFallback) {\n  if (e.targetTouches.length === 1) {\n    return getEventClientOffset(e.targetTouches[0]);\n  } else if (lastTargetTouchFallback && e.touches.length === 1) {\n    if (e.touches[0].target === lastTargetTouchFallback.target) {\n      return getEventClientOffset(e.touches[0]);\n    }\n  }\n}\nexport function getEventClientOffset(e, lastTargetTouchFallback) {\n  if (isTouchEvent(e)) {\n    return getEventClientTouchOffset(e, lastTargetTouchFallback);\n  } else {\n    return {\n      x: e.clientX,\n      y: e.clientY\n    };\n  }\n}","export var supportsPassive = function () {\n  // simular to jQuery's test\n  var supported = false;\n\n  try {\n    addEventListener('test', function () {// do nothing\n    }, Object.defineProperty({}, 'passive', {\n      get: function get() {\n        supported = true;\n        return true;\n      }\n    }));\n  } catch (e) {// do nothing\n  }\n\n  return supported;\n}();","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nexport var OptionsReader = /*#__PURE__*/function () {\n  function OptionsReader(incoming, context) {\n    var _this = this;\n\n    _classCallCheck(this, OptionsReader);\n\n    this.enableTouchEvents = true;\n    this.enableMouseEvents = false;\n    this.enableKeyboardEvents = false;\n    this.ignoreContextMenu = false;\n    this.enableHoverOutsideTarget = false;\n    this.touchSlop = 0;\n    this.scrollAngleRanges = undefined;\n    this.context = context;\n    this.delayTouchStart = incoming.delayTouchStart || incoming.delay || 0;\n    this.delayMouseStart = incoming.delayMouseStart || incoming.delay || 0;\n    Object.keys(incoming).forEach(function (key) {\n      if (incoming[key] != null) {\n        ;\n        _this[key] = incoming[key];\n      }\n    });\n  }\n\n  _createClass(OptionsReader, [{\n    key: \"window\",\n    get: function get() {\n      if (this.context && this.context.window) {\n        return this.context.window;\n      } else if (typeof window !== 'undefined') {\n        return window;\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      if (this.window) {\n        return this.window.document;\n      }\n\n      return undefined;\n    }\n  }]);\n\n  return OptionsReader;\n}();","var _eventNames;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { invariant } from '@react-dnd/invariant';\nimport { ListenerType } from './interfaces';\nimport { eventShouldStartDrag, eventShouldEndDrag, isTouchEvent } from './utils/predicates';\nimport { getEventClientOffset, getNodeClientOffset } from './utils/offsets';\nimport { distance, inAngleRanges } from './utils/math';\nimport { supportsPassive } from './utils/supportsPassive';\nimport { OptionsReader } from './OptionsReader';\nvar eventNames = (_eventNames = {}, _defineProperty(_eventNames, ListenerType.mouse, {\n  start: 'mousedown',\n  move: 'mousemove',\n  end: 'mouseup',\n  contextmenu: 'contextmenu'\n}), _defineProperty(_eventNames, ListenerType.touch, {\n  start: 'touchstart',\n  move: 'touchmove',\n  end: 'touchend'\n}), _defineProperty(_eventNames, ListenerType.keyboard, {\n  keydown: 'keydown'\n}), _eventNames);\nexport var TouchBackendImpl = /*#__PURE__*/function () {\n  function TouchBackendImpl(manager, context, options) {\n    var _this = this;\n\n    _classCallCheck(this, TouchBackendImpl);\n\n    this.getSourceClientOffset = function (sourceId) {\n      var element = _this.sourceNodes.get(sourceId);\n\n      return element && getNodeClientOffset(element);\n    };\n\n    this.handleTopMoveStartCapture = function (e) {\n      if (!eventShouldStartDrag(e)) {\n        return;\n      }\n\n      _this.moveStartSourceIds = [];\n    };\n\n    this.handleMoveStart = function (sourceId) {\n      // Just because we received an event doesn't necessarily mean we need to collect drag sources.\n      // We only collect start collecting drag sources on touch and left mouse events.\n      if (Array.isArray(_this.moveStartSourceIds)) {\n        _this.moveStartSourceIds.unshift(sourceId);\n      }\n    };\n\n    this.handleTopMoveStart = function (e) {\n      if (!eventShouldStartDrag(e)) {\n        return;\n      } // Don't prematurely preventDefault() here since it might:\n      // 1. Mess up scrolling\n      // 2. Mess up long tap (which brings up context menu)\n      // 3. If there's an anchor link as a child, tap won't be triggered on link\n\n\n      var clientOffset = getEventClientOffset(e);\n\n      if (clientOffset) {\n        if (isTouchEvent(e)) {\n          _this.lastTargetTouchFallback = e.targetTouches[0];\n        }\n\n        _this._mouseClientOffset = clientOffset;\n      }\n\n      _this.waitingForDelay = false;\n    };\n\n    this.handleTopMoveStartDelay = function (e) {\n      if (!eventShouldStartDrag(e)) {\n        return;\n      }\n\n      var delay = e.type === eventNames.touch.start ? _this.options.delayTouchStart : _this.options.delayMouseStart;\n      _this.timeout = setTimeout(_this.handleTopMoveStart.bind(_this, e), delay);\n      _this.waitingForDelay = true;\n    };\n\n    this.handleTopMoveCapture = function () {\n      _this.dragOverTargetIds = [];\n    };\n\n    this.handleMove = function (_evt, targetId) {\n      if (_this.dragOverTargetIds) {\n        _this.dragOverTargetIds.unshift(targetId);\n      }\n    };\n\n    this.handleTopMove = function (e) {\n      if (_this.timeout) {\n        clearTimeout(_this.timeout);\n      }\n\n      if (!_this.document || _this.waitingForDelay) {\n        return;\n      }\n\n      var moveStartSourceIds = _this.moveStartSourceIds,\n          dragOverTargetIds = _this.dragOverTargetIds;\n      var enableHoverOutsideTarget = _this.options.enableHoverOutsideTarget;\n      var clientOffset = getEventClientOffset(e, _this.lastTargetTouchFallback);\n\n      if (!clientOffset) {\n        return;\n      } // If the touch move started as a scroll, or is is between the scroll angles\n\n\n      if (_this._isScrolling || !_this.monitor.isDragging() && inAngleRanges(_this._mouseClientOffset.x || 0, _this._mouseClientOffset.y || 0, clientOffset.x, clientOffset.y, _this.options.scrollAngleRanges)) {\n        _this._isScrolling = true;\n        return;\n      } // If we're not dragging and we've moved a little, that counts as a drag start\n\n\n      if (!_this.monitor.isDragging() && // eslint-disable-next-line no-prototype-builtins\n      _this._mouseClientOffset.hasOwnProperty('x') && moveStartSourceIds && distance(_this._mouseClientOffset.x || 0, _this._mouseClientOffset.y || 0, clientOffset.x, clientOffset.y) > (_this.options.touchSlop ? _this.options.touchSlop : 0)) {\n        _this.moveStartSourceIds = undefined;\n\n        _this.actions.beginDrag(moveStartSourceIds, {\n          clientOffset: _this._mouseClientOffset,\n          getSourceClientOffset: _this.getSourceClientOffset,\n          publishSource: false\n        });\n      }\n\n      if (!_this.monitor.isDragging()) {\n        return;\n      }\n\n      var sourceNode = _this.sourceNodes.get(_this.monitor.getSourceId());\n\n      _this.installSourceNodeRemovalObserver(sourceNode);\n\n      _this.actions.publishDragSource();\n\n      if (e.cancelable) e.preventDefault(); // Get the node elements of the hovered DropTargets\n\n      var dragOverTargetNodes = (dragOverTargetIds || []).map(function (key) {\n        return _this.targetNodes.get(key);\n      }).filter(function (e) {\n        return !!e;\n      }); // Get the a ordered list of nodes that are touched by\n\n      var elementsAtPoint = _this.options.getDropTargetElementsAtPoint ? _this.options.getDropTargetElementsAtPoint(clientOffset.x, clientOffset.y, dragOverTargetNodes) : _this.document.elementsFromPoint(clientOffset.x, clientOffset.y); // Extend list with parents that are not receiving elementsFromPoint events (size 0 elements and svg groups)\n\n      var elementsAtPointExtended = [];\n\n      for (var nodeId in elementsAtPoint) {\n        // eslint-disable-next-line no-prototype-builtins\n        if (!elementsAtPoint.hasOwnProperty(nodeId)) {\n          continue;\n        }\n\n        var currentNode = elementsAtPoint[nodeId];\n        elementsAtPointExtended.push(currentNode);\n\n        while (currentNode) {\n          currentNode = currentNode.parentElement;\n\n          if (currentNode && elementsAtPointExtended.indexOf(currentNode) === -1) {\n            elementsAtPointExtended.push(currentNode);\n          }\n        }\n      }\n\n      var orderedDragOverTargetIds = elementsAtPointExtended // Filter off nodes that arent a hovered DropTargets nodes\n      .filter(function (node) {\n        return dragOverTargetNodes.indexOf(node) > -1;\n      }) // Map back the nodes elements to targetIds\n      .map(function (node) {\n        return _this._getDropTargetId(node);\n      }) // Filter off possible null rows\n      .filter(function (node) {\n        return !!node;\n      }).filter(function (id, index, ids) {\n        return ids.indexOf(id) === index;\n      }); // Invoke hover for drop targets when source node is still over and pointer is outside\n\n      if (enableHoverOutsideTarget) {\n        for (var targetId in _this.targetNodes) {\n          var targetNode = _this.targetNodes.get(targetId);\n\n          if (sourceNode && targetNode && targetNode.contains(sourceNode) && orderedDragOverTargetIds.indexOf(targetId) === -1) {\n            orderedDragOverTargetIds.unshift(targetId);\n            break;\n          }\n        }\n      } // Reverse order because dnd-core reverse it before calling the DropTarget drop methods\n\n\n      orderedDragOverTargetIds.reverse();\n\n      _this.actions.hover(orderedDragOverTargetIds, {\n        clientOffset: clientOffset\n      });\n    };\n    /**\n     *\n     * visible for testing\n     */\n\n\n    this._getDropTargetId = function (node) {\n      var keys = _this.targetNodes.keys();\n\n      var next = keys.next();\n\n      while (next.done === false) {\n        var targetId = next.value;\n\n        if (node === _this.targetNodes.get(targetId)) {\n          return targetId;\n        } else {\n          next = keys.next();\n        }\n      }\n\n      return undefined;\n    };\n\n    this.handleTopMoveEndCapture = function (e) {\n      _this._isScrolling = false;\n      _this.lastTargetTouchFallback = undefined;\n\n      if (!eventShouldEndDrag(e)) {\n        return;\n      }\n\n      if (!_this.monitor.isDragging() || _this.monitor.didDrop()) {\n        _this.moveStartSourceIds = undefined;\n        return;\n      }\n\n      if (e.cancelable) e.preventDefault();\n      _this._mouseClientOffset = {};\n\n      _this.uninstallSourceNodeRemovalObserver();\n\n      _this.actions.drop();\n\n      _this.actions.endDrag();\n    };\n\n    this.handleCancelOnEscape = function (e) {\n      if (e.key === 'Escape' && _this.monitor.isDragging()) {\n        _this._mouseClientOffset = {};\n\n        _this.uninstallSourceNodeRemovalObserver();\n\n        _this.actions.endDrag();\n      }\n    };\n\n    this.options = new OptionsReader(options, context);\n    this.actions = manager.getActions();\n    this.monitor = manager.getMonitor();\n    this.sourceNodes = new Map();\n    this.sourcePreviewNodes = new Map();\n    this.sourcePreviewNodeOptions = new Map();\n    this.targetNodes = new Map();\n    this.listenerTypes = [];\n    this._mouseClientOffset = {};\n    this._isScrolling = false;\n\n    if (this.options.enableMouseEvents) {\n      this.listenerTypes.push(ListenerType.mouse);\n    }\n\n    if (this.options.enableTouchEvents) {\n      this.listenerTypes.push(ListenerType.touch);\n    }\n\n    if (this.options.enableKeyboardEvents) {\n      this.listenerTypes.push(ListenerType.keyboard);\n    }\n  }\n  /**\n   * Generate profiling statistics for the HTML5Backend.\n   */\n\n\n  _createClass(TouchBackendImpl, [{\n    key: \"profile\",\n    value: function profile() {\n      var _this$dragOverTargetI;\n\n      return {\n        sourceNodes: this.sourceNodes.size,\n        sourcePreviewNodes: this.sourcePreviewNodes.size,\n        sourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,\n        targetNodes: this.targetNodes.size,\n        dragOverTargetIds: ((_this$dragOverTargetI = this.dragOverTargetIds) === null || _this$dragOverTargetI === void 0 ? void 0 : _this$dragOverTargetI.length) || 0\n      };\n    } // public for test\n\n  }, {\n    key: \"setup\",\n    value: function setup() {\n      if (!this.window) {\n        return;\n      }\n\n      invariant(!TouchBackendImpl.isSetUp, 'Cannot have two Touch backends at the same time.');\n      TouchBackendImpl.isSetUp = true;\n      this.addEventListener(this.window, 'start', this.getTopMoveStartHandler());\n      this.addEventListener(this.window, 'start', this.handleTopMoveStartCapture, true);\n      this.addEventListener(this.window, 'move', this.handleTopMove);\n      this.addEventListener(this.window, 'move', this.handleTopMoveCapture, true);\n      this.addEventListener(this.window, 'end', this.handleTopMoveEndCapture, true);\n\n      if (this.options.enableMouseEvents && !this.options.ignoreContextMenu) {\n        this.addEventListener(this.window, 'contextmenu', this.handleTopMoveEndCapture);\n      }\n\n      if (this.options.enableKeyboardEvents) {\n        this.addEventListener(this.window, 'keydown', this.handleCancelOnEscape, true);\n      }\n    }\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      if (!this.window) {\n        return;\n      }\n\n      TouchBackendImpl.isSetUp = false;\n      this._mouseClientOffset = {};\n      this.removeEventListener(this.window, 'start', this.handleTopMoveStartCapture, true);\n      this.removeEventListener(this.window, 'start', this.handleTopMoveStart);\n      this.removeEventListener(this.window, 'move', this.handleTopMoveCapture, true);\n      this.removeEventListener(this.window, 'move', this.handleTopMove);\n      this.removeEventListener(this.window, 'end', this.handleTopMoveEndCapture, true);\n\n      if (this.options.enableMouseEvents && !this.options.ignoreContextMenu) {\n        this.removeEventListener(this.window, 'contextmenu', this.handleTopMoveEndCapture);\n      }\n\n      if (this.options.enableKeyboardEvents) {\n        this.removeEventListener(this.window, 'keydown', this.handleCancelOnEscape, true);\n      }\n\n      this.uninstallSourceNodeRemovalObserver();\n    }\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener(subject, event, handler, capture) {\n      var options = supportsPassive ? {\n        capture: capture,\n        passive: false\n      } : capture;\n      this.listenerTypes.forEach(function (listenerType) {\n        var evt = eventNames[listenerType][event];\n\n        if (evt) {\n          subject.addEventListener(evt, handler, options);\n        }\n      });\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener(subject, event, handler, capture) {\n      var options = supportsPassive ? {\n        capture: capture,\n        passive: false\n      } : capture;\n      this.listenerTypes.forEach(function (listenerType) {\n        var evt = eventNames[listenerType][event];\n\n        if (evt) {\n          subject.removeEventListener(evt, handler, options);\n        }\n      });\n    }\n  }, {\n    key: \"connectDragSource\",\n    value: function connectDragSource(sourceId, node) {\n      var _this2 = this;\n\n      var handleMoveStart = this.handleMoveStart.bind(this, sourceId);\n      this.sourceNodes.set(sourceId, node);\n      this.addEventListener(node, 'start', handleMoveStart);\n      return function () {\n        _this2.sourceNodes.delete(sourceId);\n\n        _this2.removeEventListener(node, 'start', handleMoveStart);\n      };\n    }\n  }, {\n    key: \"connectDragPreview\",\n    value: function connectDragPreview(sourceId, node, options) {\n      var _this3 = this;\n\n      this.sourcePreviewNodeOptions.set(sourceId, options);\n      this.sourcePreviewNodes.set(sourceId, node);\n      return function () {\n        _this3.sourcePreviewNodes.delete(sourceId);\n\n        _this3.sourcePreviewNodeOptions.delete(sourceId);\n      };\n    }\n  }, {\n    key: \"connectDropTarget\",\n    value: function connectDropTarget(targetId, node) {\n      var _this4 = this;\n\n      if (!this.document) {\n        return function () {\n          /* noop */\n        };\n      }\n\n      var handleMove = function handleMove(e) {\n        if (!_this4.document || !_this4.monitor.isDragging()) {\n          return;\n        }\n\n        var coords;\n        /**\n         * Grab the coordinates for the current mouse/touch position\n         */\n\n        switch (e.type) {\n          case eventNames.mouse.move:\n            coords = {\n              x: e.clientX,\n              y: e.clientY\n            };\n            break;\n\n          case eventNames.touch.move:\n            coords = {\n              x: e.touches[0].clientX,\n              y: e.touches[0].clientY\n            };\n            break;\n        }\n        /**\n         * Use the coordinates to grab the element the drag ended on.\n         * If the element is the same as the target node (or any of it's children) then we have hit a drop target and can handle the move.\n         */\n\n\n        var droppedOn = coords != null ? _this4.document.elementFromPoint(coords.x, coords.y) : undefined;\n        var childMatch = droppedOn && node.contains(droppedOn);\n\n        if (droppedOn === node || childMatch) {\n          return _this4.handleMove(e, targetId);\n        }\n      };\n      /**\n       * Attaching the event listener to the body so that touchmove will work while dragging over multiple target elements.\n       */\n\n\n      this.addEventListener(this.document.body, 'move', handleMove);\n      this.targetNodes.set(targetId, node);\n      return function () {\n        if (_this4.document) {\n          _this4.targetNodes.delete(targetId);\n\n          _this4.removeEventListener(_this4.document.body, 'move', handleMove);\n        }\n      };\n    }\n  }, {\n    key: \"getTopMoveStartHandler\",\n    value: function getTopMoveStartHandler() {\n      if (!this.options.delayTouchStart && !this.options.delayMouseStart) {\n        return this.handleTopMoveStart;\n      }\n\n      return this.handleTopMoveStartDelay;\n    }\n  }, {\n    key: \"installSourceNodeRemovalObserver\",\n    value: function installSourceNodeRemovalObserver(node) {\n      var _this5 = this;\n\n      this.uninstallSourceNodeRemovalObserver();\n      this.draggedSourceNode = node;\n      this.draggedSourceNodeRemovalObserver = new MutationObserver(function () {\n        if (node && !node.parentElement) {\n          _this5.resurrectSourceNode();\n\n          _this5.uninstallSourceNodeRemovalObserver();\n        }\n      });\n\n      if (!node || !node.parentElement) {\n        return;\n      }\n\n      this.draggedSourceNodeRemovalObserver.observe(node.parentElement, {\n        childList: true\n      });\n    }\n  }, {\n    key: \"resurrectSourceNode\",\n    value: function resurrectSourceNode() {\n      if (this.document && this.draggedSourceNode) {\n        this.draggedSourceNode.style.display = 'none';\n        this.draggedSourceNode.removeAttribute('data-reactid');\n        this.document.body.appendChild(this.draggedSourceNode);\n      }\n    }\n  }, {\n    key: \"uninstallSourceNodeRemovalObserver\",\n    value: function uninstallSourceNodeRemovalObserver() {\n      if (this.draggedSourceNodeRemovalObserver) {\n        this.draggedSourceNodeRemovalObserver.disconnect();\n      }\n\n      this.draggedSourceNodeRemovalObserver = undefined;\n      this.draggedSourceNode = undefined;\n    }\n  }, {\n    key: \"window\",\n    get: function get() {\n      return this.options.window;\n    } // public for test\n\n  }, {\n    key: \"document\",\n    get: function get() {\n      if (this.window) {\n        return this.window.document;\n      }\n\n      return undefined;\n    }\n  }]);\n\n  return TouchBackendImpl;\n}();","export function distance(x1, y1, x2, y2) {\n  return Math.sqrt(Math.pow(Math.abs(x2 - x1), 2) + Math.pow(Math.abs(y2 - y1), 2));\n}\nexport function inAngleRanges(x1, y1, x2, y2, angleRanges) {\n  if (!angleRanges) {\n    return false;\n  }\n\n  var angle = Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI + 180;\n\n  for (var i = 0; i < angleRanges.length; ++i) {\n    if ((angleRanges[i].start == null || angle >= angleRanges[i].start) && (angleRanges[i].end == null || angle <= angleRanges[i].end)) {\n      return true;\n    }\n  }\n\n  return false;\n}","import { HTML5Backend } from 'react-dnd-html5-backend';\nimport { TouchBackend } from 'react-dnd-touch-backend';\nimport { TouchTransition, MouseTransition } from 'dnd-multi-backend';\nexport default {\n  backends: [{\n    backend: HTML5Backend,\n    transition: MouseTransition\n  }, {\n    backend: TouchBackend,\n    options: {\n      enableMouseEvents: true\n    },\n    preview: true,\n    transition: TouchTransition\n  }]\n};","import { TouchBackendImpl } from './TouchBackendImpl';\nexport * from './TouchBackendImpl';\nexport var TouchBackend = function createBackend(manager) {\n  var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return new TouchBackendImpl(manager, context, options);\n};","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { DndProvider as ReactDndProvider } from 'react-dnd';\nimport MultiBackend from 'dnd-multi-backend';\nexport var PreviewPortalContext = React.createContext(null);\nexport var DndProvider = function DndProvider(props) {\n  var previewPortal = useRef();\n  return /*#__PURE__*/React.createElement(PreviewPortalContext.Provider, {\n    value: previewPortal.current\n  }, /*#__PURE__*/React.createElement(ReactDndProvider, _extends({\n    backend: MultiBackend\n  }, props)), /*#__PURE__*/React.createElement(\"div\", {\n    ref: previewPortal\n  }));\n};\nDndProvider.propTypes = {\n  manager: PropTypes.any,\n  context: PropTypes.any,\n  options: PropTypes.any,\n  debugMode: PropTypes.bool\n};","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { useState, useEffect, useContext } from 'react';\nimport { DndContext } from 'react-dnd';\n\nvar useObservePreviews = function useObservePreviews() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      enabled = _useState2[0],\n      setEnabled = _useState2[1];\n\n  var dndContext = useContext(DndContext);\n  useEffect(function () {\n    var backend = dndContext.dragDropManager.getBackend();\n    var observer = {\n      backendChanged: function backendChanged(cbackend) {\n        setEnabled(cbackend.previewEnabled());\n      }\n    };\n    setEnabled(backend.previewEnabled());\n    backend.previews.register(observer);\n    return function () {\n      backend.previews.unregister(observer);\n    };\n  }, [dndContext, setEnabled]);\n  return enabled;\n};\n\nexport { useObservePreviews };","import React, { useContext } from 'react';\nimport ReactDOM from 'react-dom';\nimport DnDPreview, { Context as PreviewContext } from 'react-dnd-preview';\nimport { useObservePreviews } from '../common';\nimport { PreviewPortalContext } from './DndProvider';\n\nvar Preview = function Preview(props) {\n  var enabled = useObservePreviews();\n  var portal = useContext(PreviewPortalContext);\n\n  if (!enabled) {\n    return null;\n  }\n\n  var result = /*#__PURE__*/React.createElement(DnDPreview, props);\n\n  if (portal) {\n    return /*#__PURE__*/ReactDOM.createPortal(result, portal);\n  }\n\n  return result;\n};\n\nPreview.Context = PreviewContext;\nPreview.propTypes = DnDPreview.propTypes;\nexport { Preview, PreviewContext };","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from 'react';\nimport { memo } from 'react';\nimport { DndContext, createDndContext } from './DndContext';\nvar refCount = 0;\n/**\n * A React component that provides the React-DnD context\n */\n\nexport var DndProvider = memo(function (_ref) {\n  var children = _ref.children,\n      props = _objectWithoutProperties(_ref, [\"children\"]);\n\n  var _getDndContextValue = getDndContextValue(props),\n      _getDndContextValue2 = _slicedToArray(_getDndContextValue, 2),\n      manager = _getDndContextValue2[0],\n      isGlobalInstance = _getDndContextValue2[1]; // memoized from props\n\n  /**\n   * If the global context was used to store the DND context\n   * then where theres no more references to it we should\n   * clean it up to avoid memory leaks\n   */\n\n\n  React.useEffect(function () {\n    if (isGlobalInstance) {\n      refCount++;\n    }\n\n    return function () {\n      if (isGlobalInstance) {\n        refCount--;\n\n        if (refCount === 0) {\n          var context = getGlobalContext();\n          context[instanceSymbol] = null;\n        }\n      }\n    };\n  }, []);\n  return React.createElement(DndContext.Provider, {\n    value: manager\n  }, children);\n});\nDndProvider.displayName = 'DndProvider';\n\nfunction getDndContextValue(props) {\n  if ('manager' in props) {\n    var _manager = {\n      dragDropManager: props.manager\n    };\n    return [_manager, false];\n  }\n\n  var manager = createSingletonDndContext(props.backend, props.context, props.options, props.debugMode);\n  var isGlobalInstance = !props.context;\n  return [manager, isGlobalInstance];\n}\n\nvar instanceSymbol = Symbol.for('__REACT_DND_CONTEXT_INSTANCE__');\n\nfunction createSingletonDndContext(backend) {\n  var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getGlobalContext();\n  var options = arguments.length > 2 ? arguments[2] : undefined;\n  var debugMode = arguments.length > 3 ? arguments[3] : undefined;\n  var ctx = context;\n\n  if (!ctx[instanceSymbol]) {\n    ctx[instanceSymbol] = createDndContext(backend, context, options, debugMode);\n  }\n\n  return ctx[instanceSymbol];\n}\n\nfunction getGlobalContext() {\n  return typeof global !== 'undefined' ? global : window;\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { invariant } from '@react-dnd/invariant';\nvar isCallingCanDrag = false;\nvar isCallingIsDragging = false;\nexport var DragSourceMonitorImpl = /*#__PURE__*/function () {\n  function DragSourceMonitorImpl(manager) {\n    _classCallCheck(this, DragSourceMonitorImpl);\n\n    this.sourceId = null;\n    this.internalMonitor = manager.getMonitor();\n  }\n\n  _createClass(DragSourceMonitorImpl, [{\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(sourceId) {\n      this.sourceId = sourceId;\n    }\n  }, {\n    key: \"getHandlerId\",\n    value: function getHandlerId() {\n      return this.sourceId;\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      invariant(!isCallingCanDrag, 'You may not call monitor.canDrag() inside your canDrag() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor');\n\n      try {\n        isCallingCanDrag = true;\n        return this.internalMonitor.canDragSource(this.sourceId);\n      } finally {\n        isCallingCanDrag = false;\n      }\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging() {\n      if (!this.sourceId) {\n        return false;\n      }\n\n      invariant(!isCallingIsDragging, 'You may not call monitor.isDragging() inside your isDragging() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor');\n\n      try {\n        isCallingIsDragging = true;\n        return this.internalMonitor.isDraggingSource(this.sourceId);\n      } finally {\n        isCallingIsDragging = false;\n      }\n    }\n  }, {\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener, options) {\n      return this.internalMonitor.subscribeToStateChange(listener, options);\n    }\n  }, {\n    key: \"isDraggingSource\",\n    value: function isDraggingSource(sourceId) {\n      return this.internalMonitor.isDraggingSource(sourceId);\n    }\n  }, {\n    key: \"isOverTarget\",\n    value: function isOverTarget(targetId, options) {\n      return this.internalMonitor.isOverTarget(targetId, options);\n    }\n  }, {\n    key: \"getTargetIds\",\n    value: function getTargetIds() {\n      return this.internalMonitor.getTargetIds();\n    }\n  }, {\n    key: \"isSourcePublic\",\n    value: function isSourcePublic() {\n      return this.internalMonitor.isSourcePublic();\n    }\n  }, {\n    key: \"getSourceId\",\n    value: function getSourceId() {\n      return this.internalMonitor.getSourceId();\n    }\n  }, {\n    key: \"subscribeToOffsetChange\",\n    value: function subscribeToOffsetChange(listener) {\n      return this.internalMonitor.subscribeToOffsetChange(listener);\n    }\n  }, {\n    key: \"canDragSource\",\n    value: function canDragSource(sourceId) {\n      return this.internalMonitor.canDragSource(sourceId);\n    }\n  }, {\n    key: \"canDropOnTarget\",\n    value: function canDropOnTarget(targetId) {\n      return this.internalMonitor.canDropOnTarget(targetId);\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.internalMonitor.getItemType();\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.internalMonitor.getItem();\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.internalMonitor.getDropResult();\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.internalMonitor.didDrop();\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.internalMonitor.getInitialClientOffset();\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.internalMonitor.getInitialSourceClientOffset();\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset() {\n      return this.internalMonitor.getSourceClientOffset();\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.internalMonitor.getClientOffset();\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset() {\n      return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n  }]);\n\n  return DragSourceMonitorImpl;\n}();","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { wrapConnectorHooks } from './wrapConnectorHooks';\nimport { isRef } from '../utils/isRef';\nimport { shallowEqual } from '@react-dnd/shallowequal';\nexport var SourceConnector = /*#__PURE__*/function () {\n  function SourceConnector(backend) {\n    var _this = this;\n\n    _classCallCheck(this, SourceConnector);\n\n    this.hooks = wrapConnectorHooks({\n      dragSource: function dragSource(node, options) {\n        _this.clearDragSource();\n\n        _this.dragSourceOptions = options || null;\n\n        if (isRef(node)) {\n          _this.dragSourceRef = node;\n        } else {\n          _this.dragSourceNode = node;\n        }\n\n        _this.reconnectDragSource();\n      },\n      dragPreview: function dragPreview(node, options) {\n        _this.clearDragPreview();\n\n        _this.dragPreviewOptions = options || null;\n\n        if (isRef(node)) {\n          _this.dragPreviewRef = node;\n        } else {\n          _this.dragPreviewNode = node;\n        }\n\n        _this.reconnectDragPreview();\n      }\n    });\n    this.handlerId = null; // The drop target may either be attached via ref or connect function\n\n    this.dragSourceRef = null;\n    this.dragSourceOptionsInternal = null; // The drag preview may either be attached via ref or connect function\n\n    this.dragPreviewRef = null;\n    this.dragPreviewOptionsInternal = null;\n    this.lastConnectedHandlerId = null;\n    this.lastConnectedDragSource = null;\n    this.lastConnectedDragSourceOptions = null;\n    this.lastConnectedDragPreview = null;\n    this.lastConnectedDragPreviewOptions = null;\n    this.backend = backend;\n  }\n\n  _createClass(SourceConnector, [{\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(newHandlerId) {\n      if (this.handlerId === newHandlerId) {\n        return;\n      }\n\n      this.handlerId = newHandlerId;\n      this.reconnect();\n    }\n  }, {\n    key: \"reconnect\",\n    value: function reconnect() {\n      this.reconnectDragSource();\n      this.reconnectDragPreview();\n    }\n  }, {\n    key: \"reconnectDragSource\",\n    value: function reconnectDragSource() {\n      var dragSource = this.dragSource; // if nothing has changed then don't resubscribe\n\n      var didChange = this.didHandlerIdChange() || this.didConnectedDragSourceChange() || this.didDragSourceOptionsChange();\n\n      if (didChange) {\n        this.disconnectDragSource();\n      }\n\n      if (!this.handlerId) {\n        return;\n      }\n\n      if (!dragSource) {\n        this.lastConnectedDragSource = dragSource;\n        return;\n      }\n\n      if (didChange) {\n        this.lastConnectedHandlerId = this.handlerId;\n        this.lastConnectedDragSource = dragSource;\n        this.lastConnectedDragSourceOptions = this.dragSourceOptions;\n        this.dragSourceUnsubscribe = this.backend.connectDragSource(this.handlerId, dragSource, this.dragSourceOptions);\n      }\n    }\n  }, {\n    key: \"reconnectDragPreview\",\n    value: function reconnectDragPreview() {\n      var dragPreview = this.dragPreview; // if nothing has changed then don't resubscribe\n\n      var didChange = this.didHandlerIdChange() || this.didConnectedDragPreviewChange() || this.didDragPreviewOptionsChange();\n\n      if (didChange) {\n        this.disconnectDragPreview();\n      }\n\n      if (!this.handlerId) {\n        return;\n      }\n\n      if (!dragPreview) {\n        this.lastConnectedDragPreview = dragPreview;\n        return;\n      }\n\n      if (didChange) {\n        this.lastConnectedHandlerId = this.handlerId;\n        this.lastConnectedDragPreview = dragPreview;\n        this.lastConnectedDragPreviewOptions = this.dragPreviewOptions;\n        this.dragPreviewUnsubscribe = this.backend.connectDragPreview(this.handlerId, dragPreview, this.dragPreviewOptions);\n      }\n    }\n  }, {\n    key: \"didHandlerIdChange\",\n    value: function didHandlerIdChange() {\n      return this.lastConnectedHandlerId !== this.handlerId;\n    }\n  }, {\n    key: \"didConnectedDragSourceChange\",\n    value: function didConnectedDragSourceChange() {\n      return this.lastConnectedDragSource !== this.dragSource;\n    }\n  }, {\n    key: \"didConnectedDragPreviewChange\",\n    value: function didConnectedDragPreviewChange() {\n      return this.lastConnectedDragPreview !== this.dragPreview;\n    }\n  }, {\n    key: \"didDragSourceOptionsChange\",\n    value: function didDragSourceOptionsChange() {\n      return !shallowEqual(this.lastConnectedDragSourceOptions, this.dragSourceOptions);\n    }\n  }, {\n    key: \"didDragPreviewOptionsChange\",\n    value: function didDragPreviewOptionsChange() {\n      return !shallowEqual(this.lastConnectedDragPreviewOptions, this.dragPreviewOptions);\n    }\n  }, {\n    key: \"disconnectDragSource\",\n    value: function disconnectDragSource() {\n      if (this.dragSourceUnsubscribe) {\n        this.dragSourceUnsubscribe();\n        this.dragSourceUnsubscribe = undefined;\n      }\n    }\n  }, {\n    key: \"disconnectDragPreview\",\n    value: function disconnectDragPreview() {\n      if (this.dragPreviewUnsubscribe) {\n        this.dragPreviewUnsubscribe();\n        this.dragPreviewUnsubscribe = undefined;\n        this.dragPreviewNode = null;\n        this.dragPreviewRef = null;\n      }\n    }\n  }, {\n    key: \"clearDragSource\",\n    value: function clearDragSource() {\n      this.dragSourceNode = null;\n      this.dragSourceRef = null;\n    }\n  }, {\n    key: \"clearDragPreview\",\n    value: function clearDragPreview() {\n      this.dragPreviewNode = null;\n      this.dragPreviewRef = null;\n    }\n  }, {\n    key: \"connectTarget\",\n    get: function get() {\n      return this.dragSource;\n    }\n  }, {\n    key: \"dragSourceOptions\",\n    get: function get() {\n      return this.dragSourceOptionsInternal;\n    },\n    set: function set(options) {\n      this.dragSourceOptionsInternal = options;\n    }\n  }, {\n    key: \"dragPreviewOptions\",\n    get: function get() {\n      return this.dragPreviewOptionsInternal;\n    },\n    set: function set(options) {\n      this.dragPreviewOptionsInternal = options;\n    }\n  }, {\n    key: \"dragSource\",\n    get: function get() {\n      return this.dragSourceNode || this.dragSourceRef && this.dragSourceRef.current;\n    }\n  }, {\n    key: \"dragPreview\",\n    get: function get() {\n      return this.dragPreviewNode || this.dragPreviewRef && this.dragPreviewRef.current;\n    }\n  }]);\n\n  return SourceConnector;\n}();","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport { useMemo } from 'react';\nimport { invariant } from '@react-dnd/invariant';\nimport { registerSource } from '../../common/registration';\nimport { useDragDropManager } from '../useDragDropManager';\nimport { DragSourceMonitorImpl } from '../../common/DragSourceMonitorImpl';\nimport { SourceConnector } from '../../common/SourceConnector';\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect';\nexport function useDragSourceMonitor() {\n  var manager = useDragDropManager();\n  var monitor = useMemo(function () {\n    return new DragSourceMonitorImpl(manager);\n  }, [manager]);\n  var connector = useMemo(function () {\n    return new SourceConnector(manager.getBackend());\n  }, [manager]);\n  return [monitor, connector];\n}\nexport function useDragHandler(spec, monitor, connector) {\n  var manager = useDragDropManager();\n  var handler = useMemo(function () {\n    return {\n      beginDrag: function beginDrag() {\n        var _spec$current = spec.current,\n            begin = _spec$current.begin,\n            item = _spec$current.item;\n\n        if (begin) {\n          var beginResult = begin(monitor);\n          invariant(beginResult == null || _typeof(beginResult) === 'object', 'dragSpec.begin() must either return an object, undefined, or null');\n          return beginResult || item || {};\n        }\n\n        return item || {};\n      },\n      canDrag: function canDrag() {\n        if (typeof spec.current.canDrag === 'boolean') {\n          return spec.current.canDrag;\n        } else if (typeof spec.current.canDrag === 'function') {\n          return spec.current.canDrag(monitor);\n        } else {\n          return true;\n        }\n      },\n      isDragging: function isDragging(globalMonitor, target) {\n        var isDragging = spec.current.isDragging;\n        return isDragging ? isDragging(monitor) : target === globalMonitor.getSourceId();\n      },\n      endDrag: function endDrag() {\n        var end = spec.current.end;\n\n        if (end) {\n          end(monitor.getItem(), monitor);\n        }\n\n        connector.reconnect();\n      }\n    };\n  }, []);\n  useIsomorphicLayoutEffect(function registerHandler() {\n    var _registerSource = registerSource(spec.current.item.type, handler, manager),\n        _registerSource2 = _slicedToArray(_registerSource, 2),\n        handlerId = _registerSource2[0],\n        unregister = _registerSource2[1];\n\n    monitor.receiveHandlerId(handlerId);\n    connector.receiveHandlerId(handlerId);\n    return unregister;\n  }, []);\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { useRef, useMemo } from 'react';\nimport { invariant } from '@react-dnd/invariant';\nimport { useMonitorOutput } from './internal/useMonitorOutput';\nimport { useIsomorphicLayoutEffect } from './internal/useIsomorphicLayoutEffect';\nimport { useDragSourceMonitor, useDragHandler } from './internal/drag';\n/**\n * useDragSource hook\n * @param sourceSpec The drag source specification *\n */\n\nexport function useDrag(spec) {\n  var specRef = useRef(spec);\n  specRef.current = spec; // TODO: wire options into createSourceConnector\n\n  invariant(spec.item != null, 'item must be defined');\n  invariant(spec.item.type != null, 'item type must be defined');\n\n  var _useDragSourceMonitor = useDragSourceMonitor(),\n      _useDragSourceMonitor2 = _slicedToArray(_useDragSourceMonitor, 2),\n      monitor = _useDragSourceMonitor2[0],\n      connector = _useDragSourceMonitor2[1];\n\n  useDragHandler(specRef, monitor, connector);\n  var result = useMonitorOutput(monitor, specRef.current.collect || function () {\n    return {};\n  }, function () {\n    return connector.reconnect();\n  });\n  var connectDragSource = useMemo(function () {\n    return connector.hooks.dragSource();\n  }, [connector]);\n  var connectDragPreview = useMemo(function () {\n    return connector.hooks.dragPreview();\n  }, [connector]);\n  useIsomorphicLayoutEffect(function () {\n    connector.dragSourceOptions = specRef.current.options || null;\n    connector.reconnect();\n  }, [connector]);\n  useIsomorphicLayoutEffect(function () {\n    connector.dragPreviewOptions = specRef.current.previewOptions || null;\n    connector.reconnect();\n  }, [connector]);\n  return [result, connectDragSource, connectDragPreview];\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { shallowEqual } from '@react-dnd/shallowequal';\nimport { wrapConnectorHooks } from './wrapConnectorHooks';\nimport { isRef } from '../utils/isRef';\nexport var TargetConnector = /*#__PURE__*/function () {\n  function TargetConnector(backend) {\n    var _this = this;\n\n    _classCallCheck(this, TargetConnector);\n\n    this.hooks = wrapConnectorHooks({\n      dropTarget: function dropTarget(node, options) {\n        _this.clearDropTarget();\n\n        _this.dropTargetOptions = options;\n\n        if (isRef(node)) {\n          _this.dropTargetRef = node;\n        } else {\n          _this.dropTargetNode = node;\n        }\n\n        _this.reconnect();\n      }\n    });\n    this.handlerId = null; // The drop target may either be attached via ref or connect function\n\n    this.dropTargetRef = null;\n    this.dropTargetOptionsInternal = null;\n    this.lastConnectedHandlerId = null;\n    this.lastConnectedDropTarget = null;\n    this.lastConnectedDropTargetOptions = null;\n    this.backend = backend;\n  }\n\n  _createClass(TargetConnector, [{\n    key: \"reconnect\",\n    value: function reconnect() {\n      // if nothing has changed then don't resubscribe\n      var didChange = this.didHandlerIdChange() || this.didDropTargetChange() || this.didOptionsChange();\n\n      if (didChange) {\n        this.disconnectDropTarget();\n      }\n\n      var dropTarget = this.dropTarget;\n\n      if (!this.handlerId) {\n        return;\n      }\n\n      if (!dropTarget) {\n        this.lastConnectedDropTarget = dropTarget;\n        return;\n      }\n\n      if (didChange) {\n        this.lastConnectedHandlerId = this.handlerId;\n        this.lastConnectedDropTarget = dropTarget;\n        this.lastConnectedDropTargetOptions = this.dropTargetOptions;\n        this.unsubscribeDropTarget = this.backend.connectDropTarget(this.handlerId, dropTarget, this.dropTargetOptions);\n      }\n    }\n  }, {\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(newHandlerId) {\n      if (newHandlerId === this.handlerId) {\n        return;\n      }\n\n      this.handlerId = newHandlerId;\n      this.reconnect();\n    }\n  }, {\n    key: \"didHandlerIdChange\",\n    value: function didHandlerIdChange() {\n      return this.lastConnectedHandlerId !== this.handlerId;\n    }\n  }, {\n    key: \"didDropTargetChange\",\n    value: function didDropTargetChange() {\n      return this.lastConnectedDropTarget !== this.dropTarget;\n    }\n  }, {\n    key: \"didOptionsChange\",\n    value: function didOptionsChange() {\n      return !shallowEqual(this.lastConnectedDropTargetOptions, this.dropTargetOptions);\n    }\n  }, {\n    key: \"disconnectDropTarget\",\n    value: function disconnectDropTarget() {\n      if (this.unsubscribeDropTarget) {\n        this.unsubscribeDropTarget();\n        this.unsubscribeDropTarget = undefined;\n      }\n    }\n  }, {\n    key: \"clearDropTarget\",\n    value: function clearDropTarget() {\n      this.dropTargetRef = null;\n      this.dropTargetNode = null;\n    }\n  }, {\n    key: \"connectTarget\",\n    get: function get() {\n      return this.dropTarget;\n    }\n  }, {\n    key: \"dropTargetOptions\",\n    get: function get() {\n      return this.dropTargetOptionsInternal;\n    },\n    set: function set(options) {\n      this.dropTargetOptionsInternal = options;\n    }\n  }, {\n    key: \"dropTarget\",\n    get: function get() {\n      return this.dropTargetNode || this.dropTargetRef && this.dropTargetRef.current;\n    }\n  }]);\n\n  return TargetConnector;\n}();","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { invariant } from '@react-dnd/invariant';\nvar isCallingCanDrop = false;\nexport var DropTargetMonitorImpl = /*#__PURE__*/function () {\n  function DropTargetMonitorImpl(manager) {\n    _classCallCheck(this, DropTargetMonitorImpl);\n\n    this.targetId = null;\n    this.internalMonitor = manager.getMonitor();\n  }\n\n  _createClass(DropTargetMonitorImpl, [{\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(targetId) {\n      this.targetId = targetId;\n    }\n  }, {\n    key: \"getHandlerId\",\n    value: function getHandlerId() {\n      return this.targetId;\n    }\n  }, {\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener, options) {\n      return this.internalMonitor.subscribeToStateChange(listener, options);\n    }\n  }, {\n    key: \"canDrop\",\n    value: function canDrop() {\n      // Cut out early if the target id has not been set. This should prevent errors\n      // where the user has an older version of dnd-core like in\n      // https://github.com/react-dnd/react-dnd/issues/1310\n      if (!this.targetId) {\n        return false;\n      }\n\n      invariant(!isCallingCanDrop, 'You may not call monitor.canDrop() inside your canDrop() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor');\n\n      try {\n        isCallingCanDrop = true;\n        return this.internalMonitor.canDropOnTarget(this.targetId);\n      } finally {\n        isCallingCanDrop = false;\n      }\n    }\n  }, {\n    key: \"isOver\",\n    value: function isOver(options) {\n      if (!this.targetId) {\n        return false;\n      }\n\n      return this.internalMonitor.isOverTarget(this.targetId, options);\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.internalMonitor.getItemType();\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.internalMonitor.getItem();\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.internalMonitor.getDropResult();\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.internalMonitor.didDrop();\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.internalMonitor.getInitialClientOffset();\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.internalMonitor.getInitialSourceClientOffset();\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset() {\n      return this.internalMonitor.getSourceClientOffset();\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.internalMonitor.getClientOffset();\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset() {\n      return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n  }]);\n\n  return DropTargetMonitorImpl;\n}();","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { useMemo } from 'react';\nimport { registerTarget } from '../../common/registration';\nimport { useDragDropManager } from '../useDragDropManager';\nimport { TargetConnector } from '../../common/TargetConnector';\nimport { DropTargetMonitorImpl } from '../../common/DropTargetMonitorImpl';\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect';\nexport function useDropTargetMonitor() {\n  var manager = useDragDropManager();\n  var monitor = useMemo(function () {\n    return new DropTargetMonitorImpl(manager);\n  }, [manager]);\n  var connector = useMemo(function () {\n    return new TargetConnector(manager.getBackend());\n  }, [manager]);\n  return [monitor, connector];\n}\nexport function useDropHandler(spec, monitor, connector) {\n  var manager = useDragDropManager();\n  var handler = useMemo(function () {\n    return {\n      canDrop: function canDrop() {\n        var canDrop = spec.current.canDrop;\n        return canDrop ? canDrop(monitor.getItem(), monitor) : true;\n      },\n      hover: function hover() {\n        var hover = spec.current.hover;\n\n        if (hover) {\n          hover(monitor.getItem(), monitor);\n        }\n      },\n      drop: function drop() {\n        var drop = spec.current.drop;\n\n        if (drop) {\n          return drop(monitor.getItem(), monitor);\n        }\n      }\n    };\n  }, [monitor]);\n  useIsomorphicLayoutEffect(function registerHandler() {\n    var _registerTarget = registerTarget(spec.current.accept, handler, manager),\n        _registerTarget2 = _slicedToArray(_registerTarget, 2),\n        handlerId = _registerTarget2[0],\n        unregister = _registerTarget2[1];\n\n    monitor.receiveHandlerId(handlerId);\n    connector.receiveHandlerId(handlerId);\n    return unregister;\n  }, [monitor, connector]);\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { useRef, useMemo } from 'react';\nimport { invariant } from '@react-dnd/invariant';\nimport { useMonitorOutput } from './internal/useMonitorOutput';\nimport { useIsomorphicLayoutEffect } from './internal/useIsomorphicLayoutEffect';\nimport { useDropHandler, useDropTargetMonitor } from './internal/drop';\n/**\n * useDropTarget Hook\n * @param spec The drop target specification\n */\n\nexport function useDrop(spec) {\n  var specRef = useRef(spec);\n  specRef.current = spec;\n  invariant(spec.accept != null, 'accept must be defined');\n\n  var _useDropTargetMonitor = useDropTargetMonitor(),\n      _useDropTargetMonitor2 = _slicedToArray(_useDropTargetMonitor, 2),\n      monitor = _useDropTargetMonitor2[0],\n      connector = _useDropTargetMonitor2[1];\n\n  useDropHandler(specRef, monitor, connector);\n  var result = useMonitorOutput(monitor, specRef.current.collect || function () {\n    return {};\n  }, function () {\n    return connector.reconnect();\n  });\n  var connectDropTarget = useMemo(function () {\n    return connector.hooks.dropTarget();\n  }, [connector]);\n  useIsomorphicLayoutEffect(function () {\n    connector.dropTargetOptions = spec.options || null;\n    connector.reconnect();\n  }, [spec.options]);\n  return [result, connectDropTarget];\n}"],"sourceRoot":""}