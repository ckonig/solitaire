{"version":3,"sources":["common/AspectRatio/AspectRatio.tsx","Model/Deck/Deck.ts","View/UI/StartScreen/DifficultyOptions.ts","View/UI/StartScreen/ControlsPresets.ts","View/UI/StartScreen/Screens/Context.ts","View/UI/StartScreen/Screens/CloseButton.tsx","View/UI/StorageManager.ts","View/UI/StartScreen/Screens/ScreenElement.ts","View/UI/StartScreen/Screens/CookieBanner.tsx","View/UI/StartScreen/Screens/Row.tsx","View/UI/StartScreen/Screens/ScreenNavWrapper.tsx","View/UI/StartScreen/Screens/ScreenNavigator.ts","View/UI/StartScreen/Screens/ScreenContent.tsx","View/UI/StartScreen/Screens/ScreenMainButton.tsx","View/UI/StartScreen/Screens/Controls.tsx","View/UI/StartScreen/Screens/Difficulty.tsx","View/UI/StartScreen/Screens/ScreenSelect.tsx","View/UI/StartScreen/Screens/ScreenToggle.tsx","View/UI/StartScreen/Screens/QuickStart.tsx","View/UI/StartScreen/Screens/Rating.tsx","View/UI/StartScreen/Screens/Suggestions.tsx","View/UI/StartScreen/Screens/Screen.tsx","View/UI/StartScreen/Menu/VerticalMenu.tsx","View/UI/StartScreen/Menu/StartMenu.tsx","View/UI/StartScreen/Home.tsx","common/AspectRatio/Ratios.ts","App.tsx","View/Context.ts","common/TouchDetector.js","View/UI/StartScreen/Context.ts","Model/Deck/Card.ts","Model/Game/Settings/SuggestionModes.ts","View/PauseContext.tsx","GameModes.tsx","common/GamePad.tsx","common/KeyboardLayouts.ts","Model/Deck/DeckSize.ts","common/Keyboard.ts","Common.ts","Model/Deck/Suits.ts","View/UI/StartScreen/RatingOptions.ts","View/UI/StartScreen/AbstractNavigator.ts","Model/Game/Settings/EntropyLevels.ts","View/UI/StartScreen/Menu/MenuButton.tsx","View/UI/StartScreen/Menu/MenuTitle.tsx","View/UI/StartScreen/Menu/TreeNavWrapper.tsx","View/UI/StartScreen/Menu/TreeNavigator.ts","View/UI/StartScreen/Menu/MenuTree.tsx"],"names":["AspectRatio","props","state","width","height","updateWindowDimensions","bind","this","window","addEventListener","removeEventListener","setState","innerWidth","innerHeight","suffix","ratio","multiplier","className","prefix","children","React","Component","Deck","cards","keys","Object","Suits","DeckSize","map","deckSize","key","Card","flat","reverse","shuffleArray","array","i","length","j","Math","floor","random","result","copyAll","DifficultyOptions","id","settings","drawMode","recyclingMode","icon","lines","ControlPresets","inputMethod","inputLayout","ScreenContext","createContext","closeScreen","CloseButton","useContext","onClick","StorageManager","hasConsent","consent","localStorage","getItem","parseInt","giveConsent","prompt","confirm","setItem","revokeConsent","clear","store","value","JSON","stringify","getPreviousState","parse","getScreenElementClassName","base","hasFocus","disabled","useFocusEffect","inputEl","useEffect","current","document","activeElement","focus","RenderCookieBanner","navigation","NavigationContext","y","x","screen","useRef","consented","ref","setConsented","CookieBanner","CookieContext","Row","navigator","addElement","child","index","skip","rows","buttons","cloneElement","Array","isArray","ScreenNavWrapper","setNavigation","assignState","inputHandlers","onCancel","screeen","mainMenu","menu","onUp","moveUp","onDown","moveDown","onLeft","moveLeft","onRight","moveRight","onAction","action","Keyboard","layout","Universal","GamePad","ScreenNavigator","getRows","goToRow","row","getRow","click","AbstractNavigator","ScreenContent","_index","_i","addRow","ScreenMainButton","pos","autoFocus","onFocus","line","Controls","StartScreenContext","player","players","useState","found","buttonPressed","pads","setPads","press","console","log","playerHasSettings","playerId","isActive","applyPreset","nextPlayer","getButtonClass","blockedByOtherPlayers","otherPlayers","filter","p","getLines","preset","name","slice","gamepadIndex","Difficulty","difficultySettings","renderButton","button","_ScreenSelect","label","values","callBack","toString","description","ScreenSelect","_ScreenToggle","useInitialFocus","checked","onChange","val","ScreenToggle","optimizeOptions","entropy","quickDeal","QuickStart","getClassName","entropySettings","baseEntropy","interactionEntropy","EntropyLevels","Rating","ratingPreset","customizeRating","modifier","next","ratingSettings","RatingPresets","matchPreset","ALL","apply","undoPenalty","r","timedMode","hintPenalty","ratingModifier","customizeRating2","s","suggestionMode","SuggestionModes","NONE","REGULAR","missPenalty","Suggestions","suggestionModes","allSuggestionModes","renderToggle","mode","Screen","Provider","VerticalMenu","StartMenu","switchToMenu","toggleScreen","switchToScreen","toggleMainMenu","toggleConsent","revoke","storage","MenuTitle","MenuTree","keyboardLayout","MenuButton","title","start","GameModes","SINGLEPLAYER","toggled","VERSUS","Home","startPos","navigationContext","previous","defaultStartScreenState","startScreenContext","cookieContext","boardMode","initialized","inputMode","Ratios","_16to9","_4to3","App","started","setStarted","defaultState","defaultPlayerSettings","launchState","setLaunchState","restart","deck","shuffle","BoardWrap","lazy","board","copy","DelayedSuspense","delay","fallback","Date","now","defaultValue","replaceContext","updateContext","updateGameContext","GlobalContext","CookieContextProvider","TouchDetector","prefixes","split","DocumentTouch","query","join","matchMedia","matches","e","error","NavigationProvider","face","type","isHidden","entropyStyle","source","suggestion","success","canClick","setSuccess","causeEntropy","lvl","level","randomInt","min","max","equals","other","_p","card","otherCard","orig","SuggestionMode","obj","isTemporary","supportsHints","SCORED","FULL","ONCE","TWICE","raw","get","all","default","getHintMode","defaultPauseState","end","paused","pauses","pauseStartedAt","allowed","pausedBy","showMenu","defaultPauseContext","togglePause","getElapsed","PauseContext","PauseContextProvider","PauseProvider","setPaused","context","isPaused","padleft","msec","reduce","a","b","getElapsedMs","hh","mm","ss","handlers","onButtonDown","debug","onHint","onUndo","onPause","onMenu","onConnect","onDisconnect","getKeyboardLayout","Wasd","Arrows","NumPad","up","keyCode","down","right","left","cancel","undo","ctrlKey","hint","pause","getFoundationOrder","getTableauOrder","navListener","evtobj","event","preventDefault","0","1","heart","color","club","diamond","spade","after","CHILL","COMPETITIVE","filterd","s1","s2","_MenuButton","menuX","menuY","menuFocus","setClicking","active","isClicking","onMouseDown","TreeNavWrapper","TreeNavigator"],"mappings":"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","file":"static/js/2.b82bd58b.chunk.js","sourcesContent":["import \"./16to9.css\";\nimport \"./4to3.css\";\nimport \"./aspectratio.css\";\n\nimport { Ratio } from \"./Ratios\";\nimport React from \"react\";\n\nexport default class AspectRatio extends React.Component<{ ratio: Ratio }, { width: number; height: number }> {\n    constructor(props: any) {\n        super(props);\n        this.state = { width: 0, height: 0 };\n        this.updateWindowDimensions = this.updateWindowDimensions.bind(this);\n    }\n\n    componentDidMount() {\n        this.updateWindowDimensions();\n        window.addEventListener(\"resize\", this.updateWindowDimensions);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener(\"resize\", this.updateWindowDimensions);\n    }\n\n    updateWindowDimensions() {\n        this.setState({ width: window.innerWidth, height: window.innerHeight });\n    }\n\n    render() {\n        const suffix = this.state.width >= this.state.height * this.props.ratio.multiplier ? \"landscape\" : \"portrait\";\n        return (\n            <div className=\"appwrapper\">\n                <div className={`appwrapper-${this.props.ratio.prefix}-` + suffix}>\n                    <div className={`appwrapper-${this.props.ratio.prefix}-` + suffix + \"-inner\"}>\n                        <div className=\"appwrapper-jail\">{this.props.children}</div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","import Card from \"./Card\";\nimport { DeckSize } from \"./DeckSize\";\nimport Suits from \"./Suits\";\n\nexport default class Deck {\n    cards: Card[];\n    constructor() {\n        const keys = Object.keys(Suits);\n        this.cards = DeckSize.map((deckSize) => [...keys.map((key) => new Card(deckSize, Suits[key], true))])\n            .flat()\n            .reverse();\n    }\n\n    shuffle() {\n        this.shuffleArray(this.cards);\n        return this;\n    }\n\n    // credits: https://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array\n    shuffleArray(array: any[]) {\n        for (let i = array.length - 1; i > 0; i--) {\n            const j = Math.floor(Math.random() * (i + 1));\n            [array[i], array[j]] = [array[j], array[i]];\n        }\n    }\n\n    copy() {\n        const result = new Deck();\n        result.cards = Card.copyAll(this.cards);\n        return result;\n    }\n}\n","export interface DifficultyOption {\n    id: number;\n    settings: {\n        drawMode: string;\n        recyclingMode: string;\n    };\n    icon: string;\n    lines: string[];\n}\nconst DifficultyOptions: DifficultyOption[] = [\n    {\n        id: 0,\n        settings: { drawMode: \"single\", recyclingMode: \"infinite\" },\n        icon: \"ðŸ­\",\n        lines: [\"Turn 1 card\", \"No Limit\"],\n    },\n    {\n        id: 1,\n        settings: { drawMode: \"single\", recyclingMode: \"3-pass\" },\n        icon: \"ðŸ¹\",\n        lines: [\"Turn 1 card\", \"Three passes\"],\n    },\n    {\n        id: 2,\n        settings: { drawMode: \"single\", recyclingMode: \"1-pass\" },\n        icon: \"ðŸ°\",\n        lines: [\"Turn 1 card\", \"Only a single pass\"],\n    },\n    {\n        id: 3,\n        settings: { drawMode: \"triple\", recyclingMode: \"infinite\" },\n        icon: \"ðŸ¨\",\n        lines: [\"Turn 3 cards\", \"No limit\"],\n    },\n    {\n        id: 4,\n        settings: { drawMode: \"triple\", recyclingMode: \"3-pass\" },\n        icon: \"ðŸ¼\",\n        lines: [\"Turn 3 cards \", \"Three passes\"],\n    },\n    {\n        id: 5,\n        settings: { drawMode: \"triple\", recyclingMode: \"1-pass\" },\n        icon: \"ðŸ»\",\n        lines: [\"Turn 3 cards \", \"Only a single pass\"],\n    },\n];\n\nexport default DifficultyOptions;\n","export interface IControlPreset {\n    id: number;\n    icon: string;\n    inputMethod: string;\n    inputLayout: number;\n    lines: string[],\n}\nexport const ControlPresets: IControlPreset[] = [\n    {\n        id: 0,\n        icon: \"ðŸ–±ï¸\",\n        inputMethod: \"mouse\",\n        inputLayout: 0,\n        lines: [\"Mouse or\", \"Touchpad\"],\n    },\n    {\n        id: 1,\n        icon: \"ðŸŽ®\",\n        inputMethod: \"gamepad\",\n        inputLayout: 0,\n        lines: [\"Gamepad 1\"],\n    },\n    {\n        id: 2,\n        icon: \"ðŸŽ®\",\n        inputMethod: \"gamepad\",\n        inputLayout: 1,\n        lines: [\"Gamepad 2\"],\n    },\n    {\n        id: 3,\n        icon: \"âŒ¨ï¸\",\n        inputMethod: \"keyboard\",\n        inputLayout: 0,\n        lines: [\"Keyboard\", \"WASD\"],\n    },\n    {\n        id: 4,\n        icon: \"âŒ¨ï¸\",\n        inputMethod: \"keyboard\",\n        inputLayout: 1,\n        lines: [\"Keyboard\", \"ARROWS\"],\n    },\n    {\n        id: 5,\n        icon: \"âŒ¨ï¸\",\n        inputMethod: \"keyboard\",\n        inputLayout: 2,\n        lines: [\"Keyboard\", \"NUMPAD\"],\n    },\n];\n","import React from \"react\";\n\ninterface IScreenContext {\n    closeScreen: () => void;\n}\n\nconst ScreenContext = React.createContext<IScreenContext>({\n    closeScreen: () => {},\n});\n\nexport default ScreenContext;\n","import React from \"react\";\nimport ScreenContext from \"./Context\";\n\nconst CloseButton = () => {\n    const { closeScreen } = React.useContext(ScreenContext);\n    return (\n        <div className=\"closer\">\n            <button onClick={closeScreen}>ðŸ—™</button>\n        </div>\n    );\n};\n\nexport default CloseButton;\n","import { StartScreenState } from \"./StartScreen/Context\";\n\nexport default class StorageManager {\n    hasConsent = () => {\n        const consent = localStorage.getItem(\"consent\");\n        return consent && !!parseInt(consent);\n    };\n\n    giveConsent = () => ({\n        prompt: \"Allow this game to store settings, so your changes will stay. No data leaves your computer.\",\n        confirm: () => {\n            localStorage.setItem(\"consent\", \"1\");\n        },\n    });\n    \n    revokeConsent = () => ({\n        prompt: \"Delete all local stored data? All settings will be lost.\",\n        confirm: () => {\n            localStorage.clear();\n        },\n    });\n\n    store = (value: StartScreenState) => {\n        if (this.hasConsent()) {\n            localStorage.setItem(\"state\", JSON.stringify(value));\n        }\n    };\n\n    getPreviousState = () => {\n        if (this.hasConsent()) {\n            const state = localStorage.getItem(\"state\");\n            return state != null ? JSON.parse(state) : null;\n        }\n        return null;\n    };\n}\n","import React from \"react\";\nimport { XY } from \"../../XY\";\n\nexport interface Focusable {\n    hasFocus: boolean;\n    autoFocus?: boolean;\n}\n\nexport interface MenuInpputElementProps extends Focusable {\n    disabled?: boolean;\n}\n\nexport const getScreenElementClassName = (base: string, props: MenuInpputElementProps) => {\n    let className = base;\n    if (props.hasFocus) {\n        className += \" focused\";\n    }\n    if (props.disabled) {\n        className += \" disabled\";\n    }\n    return className;\n};\n\nexport const useFocusEffect = (props: Focusable, inputEl: React.RefObject<HTMLElement>) => {\n    React.useEffect(() => {\n        if (props.hasFocus && inputEl && inputEl.current && inputEl.current !== document.activeElement) {\n            inputEl.current.focus();\n        }\n    }, [props.hasFocus, inputEl]);\n};\n\nexport const useInitialFocus = (props: Focusable, inputEl: React.RefObject<HTMLElement>, pos: XY) => {\n    React.useEffect(() => {\n        if (\n            props.autoFocus &&\n            !props.hasFocus &&\n            inputEl &&\n            inputEl.current &&\n            inputEl.current !== document.activeElement &&\n            pos.x == -1 &&\n            pos.y == -1\n        ) {\n            inputEl.current.focus();\n        }\n    }, [inputEl]);\n};\n","import StorageManager from \"../../StorageManager\";\nimport React from \"react\";\nimport { CookieContext, ICookieContext } from \"../../../Context\";\nimport { useFocusEffect } from \"./ScreenElement\";\nimport { XY } from \"../../XY\";\nimport {NavigationContext} from \"../Context\";\n\ninterface RenderCookieBannerProps extends ICookieContext, XY {}\n\nconst RenderCookieBanner = (props: RenderCookieBannerProps) => {\n    const { navigation } = React.useContext(NavigationContext);\n    const hasFocus = (y: number, x: number) => navigation.focus == \"screen\" && navigation.screen.x == x && navigation.screen.y == y;\n    const inputEl = React.useRef<HTMLButtonElement>(null);\n    useFocusEffect({ hasFocus: hasFocus(props.y, props.x) }, inputEl);\n    let className = \"cookiebanner\";\n    if (hasFocus(props.y, props.x)) {\n        className += \" focused\";\n    }\n    return !props.consented ? (\n        <button\n            ref={inputEl}\n            className={className}\n            onClick={() => {\n                const storage = new StorageManager();\n                const consent = storage.giveConsent();\n                if (!props.consented && confirm(consent.prompt)) {\n                    consent.confirm();\n                    props.setConsented(true);\n                }\n            }}\n        >\n            <div className=\"icon\">ðŸª</div>\n            <div className=\"message\">\n                <b>Changes on this page will be lost after each game</b>, until you allow this app to store data on your machine. Click here\n                to give consent.\n            </div>\n        </button>\n    ) : null;\n};\n\nconst CookieBanner = (props: { x?: number; y?: number }) => {\n    if (typeof props.x == \"undefined\" || typeof props.y == \"undefined\") {\n        return null;\n    }\n    const { consented, setConsented } = React.useContext(CookieContext);\n    return <RenderCookieBanner x={props.x} y={props.y} consented={consented} setConsented={setConsented} />;\n};\n\nexport default CookieBanner;\n","import React from \"react\";\nimport { ScreenNavigator } from \"./ScreenNavigator\";\n\nconst Row = (props: { skip?: boolean; y?: number; navigator?: ScreenNavigator; children?: any[] | any | undefined }) => {\n    if (typeof props.y == \"undefined\" || typeof props.navigator == \"undefined\") {\n        return null;\n    }\n    const addElement = (child: any, index: number) => {\n        if (!child) return null;\n        const assign = (n: any[]) => {\n            n[props.y || 0].buttons[index || 0] = { x: index, y: props.y };\n        };\n        if (!props.skip) {\n            assign(props.navigator?.rows || []);\n        }\n        return React.cloneElement(child, { key: index, x: index, y: props.y });\n    };\n    return !props.children ? null : (\n        <div className=\"row\">{Array.isArray(props.children) ? props.children.map(addElement) : addElement(props.children, 0)}</div>\n    );\n};\nexport default Row;\n","import GamePad from \"../../../../common/GamePad\";\nimport Keyboard from \"../../../../common/Keyboard\";\nimport { NavigationContext } from \"../Context\";\nimport React from \"react\";\nimport { ScreenNavigator } from \"./ScreenNavigator\";\nimport { Universal } from \"../../../../common/KeyboardLayouts\";\nimport { XY } from \"../../XY\";\n\nconst ScreenNavWrapper = (props: { navigator: ScreenNavigator; screen: string }) => {\n    const { navigator } = props;\n    const { navigation, setNavigation } = React.useContext(NavigationContext);\n\n    const assignState = (result: XY) => {\n        if (navigation.focus == \"screen\") {\n            setNavigation({ ...navigation, screen: result });\n        }\n    };\n\n    const inputHandlers = {\n        onCancel: () =>\n            setNavigation({ ...navigation, focus: \"menu\", screeen: \"\", mainMenu: navigation.mainMenu, menu: { ...navigation.menu } }),\n        onUp: () => assignState(navigator.moveUp(navigation.screen.x, navigation.screen.y)),\n        onDown: () => assignState(navigator.moveDown(navigation.screen.x, navigation.screen.y)),\n        onLeft: () => assignState(navigator.moveLeft(navigation.screen.x, navigation.screen.y)),\n        onRight: () => assignState(navigator.moveRight(navigation.screen.x, navigation.screen.y)),\n        onAction: () => navigator.action(navigation.screen),\n    };\n\n    return navigation.focus == \"screen\" ? (\n        <>\n            <Keyboard layout={Universal} {...inputHandlers} />\n            <GamePad {...inputHandlers} />\n        </>\n    ) : null;\n};\nexport default ScreenNavWrapper;\n","import AbstractNavigator from \"../AbstractNavigator\";\nimport { NavHandler } from \"../../NavHandler\";\nimport { XY } from \"../../XY\";\n\nexport class ScreenNavigator extends AbstractNavigator implements NavHandler {\n    moveUp: (x: number, y: number) => XY = (x, y) => {\n        const rows = this.getRows();\n        if (y == 0) {\n            return this.goToRow({ x: x, y: rows.length - 1 });\n        }\n        return this.goToRow({ x: x, y: y - 1 });\n    };\n\n    moveDown: (x: number, y: number) => XY = (x, y) => {\n        const rows = this.getRows();\n        if (y == rows.length - 1) {\n            return this.goToRow({ x: x, y: 0 });\n        }\n        return this.goToRow({ x: x, y: y + 1 });\n    };\n\n    moveLeft: (x: number, y: number) => XY = (x, y) => {\n        const row = this.getRow(y);\n        if (x == 0) {\n            return { x: row.buttons.length - 1, y: y };\n        }\n        return { x: x - 1, y: y };\n    };\n\n    moveRight: (x: number, y: number) => XY = (x, y) => {\n        const row = this.getRow(y);\n        if (x == row.buttons.length - 1) {\n            return { x: 0, y: y };\n        }\n        return { x: x + 1, y: y };\n    };\n\n    action: (xy: XY) => void = () => {\n        const activeElement: any = document.activeElement;\n        activeElement && activeElement.click();\n    };\n}\n","import React from \"react\";\nimport ScreenNavWrapper from \"./ScreenNavWrapper\";\nimport { ScreenNavigator } from \"./ScreenNavigator\";\n\nconst ScreenContent = (props: { id: string; children: any[] }) => {\n    const navigator = new ScreenNavigator();\n    let _index = -1;\n    let _i = -1;\n    const addRow = (child: any) => {\n        _i++;\n        if (!child.props.skip) {\n            _index++;\n            navigator.rows[_index] = { buttons: [] };\n        }\n        return React.cloneElement(child, { key: _i, x: 0, y: _index, navigator: navigator });\n    };\n    return (\n        <div className=\"content\">\n            {props.children.map((child) => addRow(child))}\n            <ScreenNavWrapper navigator={navigator} screen=\"rating\" />\n        </div>\n    );\n};\n\nexport default ScreenContent;\n","import { NavigationContext } from \"../Context\";\nimport React from \"react\";\nimport { XY } from \"../../XY\";\n\ninterface ScreenMainButtonProps {\n    x?: number;\n    y?: number;\n    id: number;\n    icon: string;\n    className: (pos: XY) => string;\n    lines: string[];\n    onClick: () => void;\n    autoFocus: boolean;\n    disabled?: boolean;\n}\nconst ScreenMainButton = (props: ScreenMainButtonProps) => {\n    if (typeof props.x == \"undefined\" || typeof props.y == \"undefined\") {\n        return null;\n    }\n\n    const pos = { x: props.x, y: props.y };\n    const inputEl = React.useRef<HTMLButtonElement>(null);\n    const { navigation, setNavigation } = React.useContext(NavigationContext);\n    const hasFocus = navigation.focus == \"screen\" && navigation.screen.x == props.x && navigation.screen.y == props.y;\n    React.useEffect(() => {\n        if (hasFocus && inputEl && inputEl.current && inputEl.current !== document.activeElement) {\n            inputEl.current.focus();\n        }\n    }, [inputEl, hasFocus]);\n\n    React.useEffect(() => {\n        if (\n            props.autoFocus &&\n            !hasFocus &&\n            inputEl &&\n            inputEl.current &&\n            inputEl.current !== document.activeElement &&\n            navigation.screen.x == -1 &&\n            navigation.screen.y == -1\n        ) {\n            inputEl.current.focus();\n        }\n    }, [inputEl]);\n    const focus = () => {\n        if (!hasFocus) {\n            setNavigation({ ...navigation, screen: { x: props.x || 0, y: props.y || 0 } });\n        }\n    };\n    const click = () => {\n        props.onClick();\n        setNavigation({ ...navigation, screen: { x: props.x || 0, y: props.y || 0 } });\n    };\n    return (\n        <button\n            onFocus={focus}\n            ref={inputEl}\n            key={props.id}\n            disabled={props.disabled}\n            className={props.className(pos)}\n            onClick={click}\n        >\n            {props.icon}\n            {props.lines.map((line: string, index: number) => (\n                <div key={index}>{line}</div>\n            ))}\n        </button>\n    );\n};\n\n\nexport default ScreenMainButton;\n","import { ControlPresets, IControlPreset } from \"../ControlsPresets\";\nimport StartScreenContext, { NavigationContext } from \"../Context\";\n\nimport CloseButton from \"./CloseButton\";\nimport CookieBanner from \"./CookieBanner\";\nimport { CookieContext } from \"../../../Context\";\nimport GamePad from \"../../../../common/GamePad\";\nimport React from \"react\";\nimport Row from \"./Row\";\nimport ScreenContent from \"./ScreenContent\";\nimport ScreenMainButton from \"./ScreenMainButton\";\nimport { XY } from \"../../XY\";\n\nconst Controls = (props: { player: number }) => {\n    const { state, setState } = React.useContext(StartScreenContext);\n    const { navigation } = React.useContext(NavigationContext);\n\n    const player = state.players[props.player];\n\n    if (!player) {\n        return null;\n    }\n\n    const [pads, setPads] = React.useState([\n        {\n            found: false,\n            buttonPressed: false,\n        },\n        {\n            found: false,\n            buttonPressed: false,\n        },\n    ]);\n\n    const press = (i: number) => {\n        pads[i].found = true;\n        pads[i].buttonPressed = true;\n        setPads({ ...pads });\n        console.log(pads);\n    };\n\n    const { consented } = React.useContext(CookieContext);\n\n    const playerHasSettings = (id: number, playerId: number) =>\n        state.players[playerId].inputLayout == ControlPresets[id].inputLayout &&\n        state.players[playerId].inputMethod == ControlPresets[id].inputMethod;\n\n    const isActive = (id: number) => playerHasSettings(id, props.player);\n\n    const applyPreset = (id: number) => {\n        const nextPlayer = { ...state.players };\n        nextPlayer[props.player].inputMethod = ControlPresets[id].inputMethod;\n        nextPlayer[props.player].inputLayout = ControlPresets[id].inputLayout;\n        setState({ ...state, players: nextPlayer });\n    };\n\n    const getButtonClass = (id: number, pos: XY) => {\n        let className = pos.x + \"\" + pos.y + \" \" + navigation.screen.x + \"\" + navigation.screen.y + \" \";\n        className += navigation.screen.x == pos.x && navigation.screen.y == pos.y ? \" focused\" : \"\";\n        className += isActive(id) ? \" active-0\" : \" inactive-0\";\n        className += blockedByOtherPlayers(id) ? \" disabled\" : \"\";\n        return className;\n    };\n\n    const blockedByOtherPlayers = (id: number) => {\n        const otherPlayers = [0, 1].filter((p) => p !== props.player);\n        return playerHasSettings(id, otherPlayers[0]);\n    };\n\n    const getLines = (preset: IControlPreset) => {\n        if (preset.inputMethod == \"gamepad\") {\n            return [...preset.lines, pads[preset.inputLayout].found || pads[preset.inputLayout].buttonPressed ? \"Connected\" : \"Not Found\"];\n        }\n        return preset.lines;\n    };\n\n    return (\n        <div className=\"controls startdetails\">\n            <CloseButton />\n            <div className=\"title\">{player.name}</div>\n            <ScreenContent id=\"settings\">\n                <Row skip={consented}>\n                    <CookieBanner />\n                </Row>\n                <Row>\n                    {ControlPresets.slice(0, 3).map((preset) => (\n                        <ScreenMainButton\n                            key={preset.id}\n                            icon={preset.icon}\n                            id={preset.id}\n                            disabled={blockedByOtherPlayers(preset.id)}\n                            autoFocus={isActive(preset.id)}\n                            className={(pos: XY) => getButtonClass(preset.id, pos)}\n                            onClick={() => applyPreset(preset.id)}\n                            lines={getLines(preset)}\n                        />\n                    ))}\n                </Row>\n                <Row>\n                    {ControlPresets.slice(3).map((preset) => (\n                        <ScreenMainButton\n                            key={preset.id}\n                            icon={preset.icon}\n                            id={preset.id}\n                            disabled={blockedByOtherPlayers(preset.id)}\n                            autoFocus={isActive(preset.id)}\n                            className={(pos: XY) => getButtonClass(preset.id, pos)}\n                            onClick={() => applyPreset(preset.id)}\n                            lines={preset.lines}\n                        />\n                    ))}\n                </Row>\n                <Row skip={true}>\n                    <div className=\"togglecontainer\">\n                        <div className=\"title\">@todo</div>\n                        <div className=\"toggle\"></div>\n                        <div className=\"description\">Describe Layout of currently selected input method</div>\n                    </div>\n                    <div className=\"togglecontainer\">\n                        <div className=\"title\">@todo</div>\n                        <div className=\"toggle\"></div>\n                        <div className=\"description\">Describe Layout of currently selected input method</div>\n                    </div>\n                </Row>\n            </ScreenContent>\n            <GamePad\n                gamepadIndex={0}\n                onUp={() => press(0)}\n                onDown={() => press(0)}\n                onRight={() => press(0)}\n                onLeft={() => press(0)}\n                onAction={() => press(0)}\n            />\n            <GamePad\n                gamepadIndex={1}\n                onUp={() => press(1)}\n                onDown={() => press(1)}\n                onRight={() => press(1)}\n                onLeft={() => press(1)}\n                onAction={() => press(1)}\n            />\n        </div>\n    );\n};\n\nexport default Controls;\n","import DifficultyOptions, { DifficultyOption } from \"../DifficultyOptions\";\nimport StartScreenContext, { NavigationContext } from \"../Context\";\n\nimport CloseButton from \"./CloseButton\";\nimport CookieBanner from \"./CookieBanner\";\nimport { CookieContext } from \"../../../Context\";\nimport React from \"react\";\nimport Row from \"./Row\";\nimport ScreenContent from \"./ScreenContent\";\nimport ScreenMainButton from \"./ScreenMainButton\";\nimport { XY } from \"../../XY\";\n\nconst Difficulty = () => {\n    const { state, setState } = React.useContext(StartScreenContext);\n    const { navigation } = React.useContext(NavigationContext);\n\n    const isActive = (id: number) => state.difficultySettings == id;\n\n    const getButtonClass = (index: number, pos: XY) => {\n        const hasFocus = navigation.screen.x == pos.x && navigation.screen.y == pos.y;\n        let name = isActive(index) ? `active active-${index}` : `inactive-${index}`;\n        name += hasFocus ? \" focused\" : \"\";\n        return name;\n    };\n\n    const renderButton = (button: DifficultyOption) => (\n        <ScreenMainButton\n            key={button.id}\n            icon={button.icon}\n            id={button.id}\n            autoFocus={isActive(button.id)}\n            className={(pos) => getButtonClass(button.id, pos)}\n            onClick={() => setState({ ...state, difficultySettings: button.id })}\n            lines={button.lines}\n        />\n    );\n\n    const { consented } = React.useContext(CookieContext);\n\n    return (\n        <div className=\"difficulty startdetails\">\n            <CloseButton />\n            <div className=\"title\">Difficulty</div>\n            <ScreenContent id=\"difficulty\">\n                <Row skip={consented}>\n                    <CookieBanner />\n                </Row>\n                <Row>{DifficultyOptions.slice(0, 3).map(renderButton)}</Row>\n                <Row>{DifficultyOptions.slice(3).map(renderButton)}</Row>\n                <Row skip={true}>\n                    <div className=\"togglecontainer\">\n                        <div className=\"title\">Draw Mode</div>\n                        <div className=\"toggle\"></div>\n                        <div className=\"description\">\n                            {DifficultyOptions[state.difficultySettings].settings.drawMode == \"triple\"\n                                ? \"Turn 3 cards at once from the Stock to the Waste.\"\n                                : null}\n                            {DifficultyOptions[state.difficultySettings].settings.drawMode == \"single\"\n                                ? \"Turn 1 card after the other from the Stock to the Waste.\"\n                                : null}\n                        </div>\n                    </div>\n                    <div className=\"togglecontainer\">\n                        <div className=\"title\">Pass Limit</div>\n                        <div className=\"toggle\"></div>\n                        <div className=\"description\">\n                            {DifficultyOptions[state.difficultySettings].settings.recyclingMode == \"1-pass\"\n                                ? \"One pass through the deck. Waste can not be recycled to the Stock.\"\n                                : null}\n                            {DifficultyOptions[state.difficultySettings].settings.recyclingMode == \"3-pass\"\n                                ? \"Three passes through the deck. Waste can be recycled to Stock two times.\"\n                                : null}\n                            {DifficultyOptions[state.difficultySettings].settings.recyclingMode == \"infinite\"\n                                ? \"No limit on passes through the deck. Waste can be recycled to Stock endlessly.\"\n                                : null}\n                        </div>\n                    </div>\n                </Row>\n            </ScreenContent>\n        </div>\n    );\n};\n\nexport default Difficulty;\n","import React from \"react\";\nimport { NavigationContext } from \"../Context\";\nimport { getScreenElementClassName, useFocusEffect } from \"./ScreenElement\";\n\nexport type SelectItem = {\n    label: string;\n    id: string | number;\n};\n\ninterface StaticSelectProps {\n    disabled?: boolean;\n    value: number;\n    values: SelectItem[];\n    label: string;\n    description: string;\n    callBack: (s: string) => void;\n}\n\ninterface SelectProps extends StaticSelectProps {\n    x: number;\n    y: number;\n    hasFocus: boolean;\n}\n\ninterface _ScreenSelectProps extends StaticSelectProps {\n    x?: number;\n    y?: number;\n}\n\nconst _ScreenSelect = (props: SelectProps) => {\n    const inputEl = React.useRef<HTMLButtonElement>(null);\n    useFocusEffect(props, inputEl);\n    const { navigation, setNavigation } = React.useContext(NavigationContext);\n\n    return (\n        <div className={getScreenElementClassName(\"togglecontainer\", props)}>\n            <div className=\"title\">\n                {props.label}: {props.values[props.value].label}\n            </div>\n            <div className=\"button\">\n                <button\n                    ref={inputEl}\n                    onClick={() => {\n                        props.callBack((props.value + 1 < props.values.length ? props.value + 1 : 0).toString());\n                        setNavigation({ ...navigation, screen: { x: props.x, y: props.y } });\n                    }}\n                    disabled={!!props.disabled}\n                    onFocus={() => {\n                        if (!props.hasFocus) {\n                            setNavigation({ ...navigation, screen: { x: props.x, y: props.y } });\n                        }\n                    }}\n                >\n                    ðŸ”\n                </button>\n            </div>\n            <div className=\"description\">{props.description}</div>\n        </div>\n    );\n};\n\nconst ScreenSelect = (props: _ScreenSelectProps) => {\n    if (typeof props.x == \"undefined\" || typeof props.y == \"undefined\") {\n        return null;\n    }\n    const { navigation } = React.useContext(NavigationContext);\n    const hasFocus = (y: number, x: number) => navigation.focus == \"screen\" && navigation.screen.x == x && navigation.screen.y == y;\n    const pos = { x: props.x || 0, y: props.y || 0 };\n    return (\n        <_ScreenSelect\n            x={pos.x}\n            y={pos.y}\n            disabled={!!props.disabled}\n            hasFocus={hasFocus(pos.y, pos.x)}\n            label={props.label}\n            description={props.description}\n            value={props.value}\n            values={props.values}\n            callBack={props.callBack}\n        />\n    );\n};\n\nexport default ScreenSelect;\n","import \"./react-toggle.css\";\n\nimport { getScreenElementClassName, useFocusEffect, useInitialFocus } from \"./ScreenElement\";\n\nimport { NavigationContext } from \"../Context\";\nimport React from \"react\";\nimport Toggle from \"react-toggle\";\nimport { XY } from \"../../XY\";\n\ninterface StaticScreenToggleProps {\n    value: boolean;\n    label: string;\n    description: string;\n    disabled?: boolean;\n    callBack?: (s: boolean) => void;\n    autoFocus?: boolean;\n}\n\ninterface ToggleProps extends StaticScreenToggleProps {\n    x: number;\n    y: number;\n    hasFocus: boolean;\n}\n\ninterface _ScreenToggleProps extends StaticScreenToggleProps {\n    x?: number;\n    y?: number;\n}\n\nconst _ScreenToggle = (props: ToggleProps) => {\n    const inputEl = React.useRef<HTMLButtonElement>(null);\n    useFocusEffect(props, inputEl);\n    const { navigation, setNavigation } = React.useContext(NavigationContext);\n    const change = (val: boolean, pos: XY) => {\n        setNavigation({ ...navigation, screen: pos });\n        props.callBack && props.callBack(val);\n    };\n    useInitialFocus(props, inputEl, navigation.screen);\n    return (\n        <div className={getScreenElementClassName(\"togglecontainer\", props)}>\n            <div className=\"title\">{props.label}</div>\n            <div className=\"toggle\">\n                <Toggle\n                    ref={inputEl}\n                    disabled={!!props.disabled}\n                    autoFocus={props.hasFocus}\n                    onFocus={() => {\n                        if (!props.hasFocus) {\n                            setNavigation({ ...navigation, screen: { x: props.x, y: props.y } });\n                        }\n                    }}\n                    checked={props.value}\n                    onChange={() => change(!props.value, { x: props.x, y: props.y })}\n                />\n            </div>\n            <div className=\"description\">{props.description}</div>\n        </div>\n    );\n};\n\nconst ScreenToggle = (props: _ScreenToggleProps) => {\n    if (typeof props.x == \"undefined\" || typeof props.y == \"undefined\") {\n        return null;\n    }\n    const { navigation } = React.useContext(NavigationContext);\n    const hasFocus = (y: number, x: number) => navigation.focus == \"screen\" && navigation.screen.x == x && navigation.screen.y == y;\n    const pos = { x: props.x || 0, y: props.y || 0 };\n    return (\n        <_ScreenToggle\n            x={pos.x}\n            y={pos.y}\n            disabled={!!props.disabled}\n            hasFocus={hasFocus(pos.y, pos.x)}\n            label={props.label}\n            description={props.description}\n            value={props.value}\n            callBack={props.callBack}\n            autoFocus={props.autoFocus}\n        />\n    );\n};\n\nexport default ScreenToggle;\n","import StartScreenContext, { NavigationContext, StartScreenState } from \"../Context\";\n\nimport CloseButton from \"./CloseButton\";\nimport CookieBanner from \"./CookieBanner\";\nimport { CookieContext } from \"../../../Context\";\nimport EntropyLevels from \"../../../../Model/Game/Settings/EntropyLevels\";\nimport React from \"react\";\nimport Row from \"./Row\";\nimport ScreenContent from \"./ScreenContent\";\nimport ScreenMainButton from \"./ScreenMainButton\";\nimport ScreenSelect from \"./ScreenSelect\";\nimport ScreenToggle from \"./ScreenToggle\";\nimport { XY } from \"../../XY\";\n\ninterface OptimizeOption {\n    entropy: number;\n    quickDeal: boolean;\n    lines: string[];\n    icon: string;\n}\n\nconst optimizeOptions: (state: StartScreenState) => OptimizeOption[] = (state: StartScreenState) => [\n    {\n        entropy: 2,\n        quickDeal: false,\n        lines: [(!state.quickDeal ? \"Optimized\" : \"Optimize\") + \" for Desktop\"],\n        icon: \"ðŸ–¥ï¸\",\n    },\n    {\n        entropy: 1,\n        quickDeal: true,\n        lines: [(state.quickDeal ? \"Optimized\" : \"Optimize\") + \" for Mobile\"],\n        icon: \"ðŸ“±\",\n    },\n];\n\nconst QuickStart = () => {\n    const { state, setState } = React.useContext(StartScreenContext);\n    const { navigation } = React.useContext(NavigationContext);\n    const { consented } = React.useContext(CookieContext);\n\n    const isActive = (val: boolean) => state.quickDeal == val;\n\n    const setBaseEntropy = (value: string) =>\n        setState({ ...state, entropySettings: { ...state.entropySettings, baseEntropy: parseInt(value) } });\n\n    const setInteractionEntropy = (value: string) =>\n        setState({ ...state, entropySettings: { ...state.entropySettings, interactionEntropy: parseInt(value) } });\n\n    const setQuickDeal = (value: boolean) => setState({ ...state, quickDeal: value });\n\n    const getClassName = (button: OptimizeOption, pos: XY) => {\n        const hasFocus = navigation.screen.x == pos.x && navigation.screen.y == pos.y;\n        let name = isActive(button.quickDeal) ? \"active active-0\" : \"inactive-0\";\n        name += hasFocus ? \" focused\" : \"\";\n        return name;\n    };\n\n    return (\n        <div className=\"quickstart startdetails\">\n            <CloseButton />\n            <div className=\"title\">Various</div>\n            <ScreenContent id=\"settings\">\n                <Row skip={consented}>\n                    <CookieBanner />\n                </Row>\n                <Row>\n                    {optimizeOptions(state).map((button, i) => (\n                        <ScreenMainButton\n                            key={i}\n                            icon={button.icon}\n                            id={i}\n                            autoFocus={isActive(button.quickDeal)}\n                            className={(pos) => getClassName(button, pos)}\n                            lines={button.lines}\n                            onClick={() =>\n                                setState({\n                                    ...state,\n                                    quickDeal: button.quickDeal,\n                                    entropySettings: {\n                                        baseEntropy: button.entropy,\n                                        interactionEntropy: button.entropy,\n                                    },\n                                })\n                            }\n                        />\n                    ))}\n                </Row>\n                <Row>\n                    <ScreenSelect\n                        label=\"Base Entropy\"\n                        description=\"How much chaos will the stacks on the board contain by themselves?\"\n                        value={state.entropySettings.baseEntropy || 0}\n                        values={EntropyLevels.map((label, id) => ({ id, label }))}\n                        callBack={setBaseEntropy}\n                    />\n                    <ScreenSelect\n                        label=\"Interaction Entropy\"\n                        description=\"How much chaos will each interaction add to a stack on the board?\"\n                        value={state.entropySettings.interactionEntropy || 0}\n                        values={EntropyLevels.map((label, id) => ({ id, label }))}\n                        callBack={setInteractionEntropy}\n                    />\n                </Row>\n                <Row>\n                    <ScreenToggle\n                        label=\"Instant Deal\"\n                        description=\"Should the deal animation at the beginning of the game be skipped?\"\n                        value={state.quickDeal}\n                        callBack={setQuickDeal}\n                    />\n                    <ScreenToggle\n                        disabled={true}\n                        label=\"Auto Deal\"\n                        description=\"Should the game draw one card from the stock every 5 seconds?\"\n                        value={false}\n                    />\n                </Row>\n            </ScreenContent>\n        </div>\n    );\n};\nexport default QuickStart;\n","import StartScreenContext, { NavigationContext, StartScreenState } from \"../Context\";\n\nimport CloseButton from \"./CloseButton\";\nimport CookieBanner from \"./CookieBanner\";\nimport { CookieContext } from \"../../../Context\";\nimport RatingPresets from \"../RatingOptions\";\nimport { RatingSettings } from \"../../../../Common\";\nimport React from \"react\";\nimport Row from \"./Row\";\nimport ScreenContent from \"./ScreenContent\";\nimport ScreenMainButton from \"./ScreenMainButton\";\nimport ScreenToggle from \"./ScreenToggle\";\nimport SuggestionModes from \"../../../../Model/Game/Settings/SuggestionModes\";\nimport { XY } from \"../../XY\";\n\nconst Rating = () => {\n    const { state, setState } = React.useContext(StartScreenContext);\n    const { navigation } = React.useContext(NavigationContext);\n    const applyPreset = (id: number) => {\n        const next = { ...state };\n        RatingPresets.ALL[id].apply(next);\n        setState(next);\n    };\n\n    const isActive = (id: number) => state.ratingPreset == id;\n\n    const getButtonClass = (id: number, pos: XY) => {\n        let name = isActive(id) ? `active active-${id}` : `inactive-${id}`;\n        name += navigation.screen.x == pos.x && navigation.screen.y == pos.y ? \" focused\" : \"\";\n        return name;\n    };\n\n    const customizeRating = (modifier: (context: RatingSettings) => void) => {\n        const next = { ...state };\n        modifier(next.ratingSettings);\n        next.ratingPreset = RatingPresets.matchPreset(next.ratingSettings);\n        setState(next);\n    };\n    \n    const customizeRating2 = (ratingModifier: (context: RatingSettings) => void, modifier: (context: StartScreenState) => void) => {\n        const next = { ...state };\n        ratingModifier(next.ratingSettings);\n        modifier(next);\n        next.ratingPreset = RatingPresets.matchPreset(next.ratingSettings);\n        setState(next);\n    };\n\n    const setMissPenalty = (value: boolean) =>\n        customizeRating((r) => {\n            r.missPenalty = value;\n        });\n\n    const setTimeRating = (value: boolean) =>\n        customizeRating((r) => {\n            r.timedMode = value;\n        });\n\n    const setUndoPenalty = (value: boolean) =>\n        customizeRating((r) => {\n            r.undoPenalty = value;\n        });\n\n    const setHintPenalty = (value: boolean) => {\n        customizeRating2(\n            (r) => {\n                r.hintPenalty = value;\n            },\n            (s) => {\n                s.suggestionMode = value ? SuggestionModes.NONE : SuggestionModes.REGULAR;\n            }\n        );\n    };\n\n    const { consented } = React.useContext(CookieContext);\n\n    return (\n        <div className=\"rating startdetails\">\n            <CloseButton />\n            <div className=\"title\">Penalties</div>\n            <ScreenContent id=\"penalties\">\n                <Row skip={consented}>\n                    <CookieBanner />\n                </Row>\n                <Row>\n                    {RatingPresets.ALL.map((preset) => (\n                        <ScreenMainButton\n                            key={preset.id}\n                            icon={preset.icon}\n                            id={preset.id}\n                            autoFocus={isActive(preset.id) || (state.ratingPreset == -1 && preset.id == 0)}\n                            className={(pos: XY) => getButtonClass(preset.id, pos)}\n                            onClick={() => applyPreset(preset.id)}\n                            lines={[preset.label]}\n                        />\n                    ))}\n                </Row>\n                <Row>\n                    <ScreenToggle\n                        label=\"Undo Penalty\"\n                        description=\"Undo is enabled, but excessive use will be painful. This penalty starts with 2 and increases exponentially.\"\n                        value={!!state.ratingSettings.undoPenalty}\n                        callBack={setUndoPenalty}\n                    />\n                    <ScreenToggle\n                        label=\"Time Penalty\"\n                        description=\"Fast players are rewarded with a time bonus, slow players will be punished.\"\n                        value={!!state.ratingSettings.timedMode}\n                        callBack={setTimeRating}\n                    />\n                </Row>\n                <Row>\n                    <ScreenToggle\n                        label=\"Hint Penalty\"\n                        description=\"Each manual hint will reduce the number of points by 10. This setting disables automatic suggestions. \"\n                        value={!!state.ratingSettings.hintPenalty}\n                        callBack={setHintPenalty}\n                    />\n                    <ScreenToggle\n                        label=\"Miss Penalty\"\n                        description=\"Be careful where you click, as each invalid action will lead to a penalty of 10 points.\"\n                        value={!!state.ratingSettings.missPenalty}\n                        callBack={setMissPenalty}\n                    />\n                </Row>\n            </ScreenContent>\n        </div>\n    );\n};\n\nexport default Rating;\n","import SuggestionModes, { SuggestionMode } from \"../../../../Model/Game/Settings/SuggestionModes\";\n\nimport CloseButton from \"./CloseButton\";\nimport CookieBanner from \"./CookieBanner\";\nimport { CookieContext } from \"../../../Context\";\nimport React from \"react\";\nimport Row from \"./Row\";\nimport ScreenContent from \"./ScreenContent\";\nimport ScreenToggle from \"./ScreenToggle\";\nimport StartScreenContext from \"../Context\";\n\nconst Suggestions = () => {\n    const { consented } = React.useContext(CookieContext);\n    const { state, setState } = React.useContext(StartScreenContext);\n\n    const suggestionModes = SuggestionModes.allSuggestionModes();\n\n    const isActive = (id: string) => state.suggestionMode == id;\n\n    const isDisabled = (id: string) => id !== SuggestionModes.NONE && state.ratingSettings.hintPenalty;\n\n    const renderToggle = (mode: SuggestionMode, index: number) => (\n        <ScreenToggle\n            value={isActive(mode.key)}\n            disabled={isDisabled(mode.key)}\n            label={mode.icon + \" \" + mode.label}\n            callBack={() => setState({ ...state, suggestionMode: mode.key })}\n            description={mode.description}\n            key={index}\n            autoFocus={isActive(mode.key)}\n        />\n    );\n\n    return (\n        <div className=\"suggestions startdetails\">\n            <CloseButton />\n            <div className=\"title\">Suggestions</div>\n            <ScreenContent id=\"settings\">\n                <Row skip={consented}>\n                    <CookieBanner />\n                </Row>\n                <Row>{suggestionModes.slice(0, 2).map(renderToggle)}</Row>\n                <Row>{suggestionModes.slice(2).map(renderToggle)}</Row>\n            </ScreenContent>\n        </div>\n    );\n};\n\nexport default Suggestions;\n","import Controls from \"./Controls\";\nimport Difficulty from \"./Difficulty\";\nimport { NavigationContext } from \"../Context\";\nimport QuickStart from \"./QuickStart\";\nimport Rating from \"./Rating\";\nimport React from \"react\";\nimport ScreenContext from \"./Context\";\nimport Suggestions from \"./Suggestions\";\n\nconst Screen = (props: { screen: string }) => {\n    //@todo screen can be taken from navigation context, passed to innner renderer here\n    //@todo load this screen after 1st selection incl. toggles and gamepads as asynchronous components\n    const { navigation, setNavigation } = React.useContext(NavigationContext);\n    //@todo closeScreen can be defined in navigationContext\n    const closeScreen = () =>\n        setNavigation({\n            ...navigation,\n            focus: \"menu\",\n            screeen: \"\",\n            mainMenu: navigation.mainMenu,\n            menu: { ...navigation.menu },\n        });\n\n    //@todo add credits page\n    return (\n        <ScreenContext.Provider value={{ closeScreen: () => closeScreen() }}>\n            <div className=\"startscreen-layout\">\n                <div className=\"startscreen-jail\">\n                    {props.screen == \"rating\" ? <Rating /> : null}\n                    {props.screen == \"difficulty\" ? <Difficulty /> : null}\n                    {props.screen == \"settings\" ? <QuickStart /> : null}\n                    {props.screen == \"suggestions\" ? <Suggestions /> : null}\n                    {props.screen == \"controls0\" ? <Controls player={0} /> : null}\n                    {props.screen == \"controls1\" ? <Controls player={1} /> : null}\n                </div>\n            </div>\n        </ScreenContext.Provider>\n    );\n};\n\nexport default Screen;\n","import React from \"react\";\n\nconst VerticalMenu = (props: any) => {\n    return (\n        <div className=\"ui menu\">\n            <div className=\"startscreen-jail\">\n                <div className=\"innermenu\">{props.children}</div>\n            </div>\n        </div>\n    );\n};\nexport default VerticalMenu;\n","import \"../Menu.scss\";\n\nimport { CookieContext } from \"../../../Context\";\nimport GameModes from \"../../../../GameModes\";\nimport MenuButton from \"./MenuButton\";\nimport MenuTitle from \"./MenuTitle\";\nimport MenuTree from \"./MenuTree\";\nimport { NavigationContext } from \"../Context\";\nimport React from \"react\";\nimport StorageManager from \"../../StorageManager\";\nimport { Universal } from \"../../../../common/KeyboardLayouts\";\nimport VerticalMenu from \"./VerticalMenu\";\nimport { XY } from \"../../XY\";\n\nconst StartMenu = (props: { start: (boardMode: string) => void }) => {\n    const { navigation, setNavigation } = React.useContext(NavigationContext);\n    const { consented, setConsented } = React.useContext(CookieContext);\n\n    const switchToScreen = (s: string, pos: XY) =>\n        setNavigation({\n            ...navigation,\n            focus: \"screen\",\n            screeen: s,\n            screen: { x: -1, y: -1 },\n            menu: { ...pos },\n        });\n\n    const switchToMenu = (menu: string, pos: XY) =>\n        setNavigation({\n            ...navigation,\n            focus: \"menu\",\n            screeen: \"\",\n            mainMenu: menu,\n            menu: { ...pos },\n        });\n\n    const toggleScreen = (s: string, pos: XY) => {\n        if (navigation.screeen !== s) {\n            switchToScreen(s, pos);\n        } else {\n            switchToMenu(navigation.mainMenu, pos);\n        }\n    };\n\n    const toggleMainMenu = (val: string, pos: XY) => switchToMenu(navigation.mainMenu !== val ? val : \"\", pos);\n\n    const toggleConsent = consented\n        ? () => {\n              const revoke = storage.revokeConsent();\n              //@todo use custom confirm dialog to support gamepad\n              if (confirm(revoke.prompt)) {\n                  revoke.confirm();\n                  setConsented(false);\n              }\n          }\n        : () => {\n              const consent = storage.giveConsent();\n              //@todo use custom confirm dialog to support gamepad\n              if (confirm(consent.prompt)) {\n                  consent.confirm();\n                  setConsented(true);\n              }\n          };\n\n    const storage = new StorageManager();\n\n    return (\n        <VerticalMenu>\n            <MenuTitle label=\"â™¦ Solitaire\" />\n\n            <MenuTree keyboardLayout={Universal}>\n                <MenuButton icon=\"ðŸŽ²\" title=\"Single Player\" onClick={() => props.start(GameModes.SINGLEPLAYER)} />\n                <MenuButton\n                    icon=\"âš”ï¸\"\n                    title=\"Versus\"\n                    onClick={(pos: XY) => toggleMainMenu(\"versus\", pos)}\n                    toggled={navigation.mainMenu == \"versus\"}\n                >\n                    <MenuButton\n                        icon=\"ðŸŽ®\"\n                        title=\"Player 1\"\n                        onClick={(pos: XY) => toggleScreen(\"controls0\", pos)}\n                        toggled={navigation.screeen == \"controls0\"}\n                    />\n                    <MenuButton\n                        icon=\"ðŸŽ®\"\n                        title=\"Player 2\"\n                        onClick={(pos: XY) => toggleScreen(\"controls1\", pos)}\n                        toggled={navigation.screeen == \"controls1\"}\n                    />\n                    <MenuButton icon=\"ðŸŽ²\" title=\"Start\" onClick={() => props.start(GameModes.VERSUS)} />\n                </MenuButton>\n                <MenuButton\n                    icon=\"âš™ï¸\"\n                    title=\"Options\"\n                    onClick={(pos: XY) => toggleMainMenu(\"custom\", pos)}\n                    toggled={navigation.mainMenu == \"custom\"}\n                >\n                    <MenuButton\n                        icon=\"ðŸ’ª\"\n                        title=\"Difficulty\"\n                        onClick={(pos: XY) => toggleScreen(\"difficulty\", pos)}\n                        toggled={navigation.screeen == \"difficulty\"}\n                    />\n                    <MenuButton\n                        icon=\"âš–ï¸\"\n                        title=\"Penalties\"\n                        onClick={(pos: XY) => toggleScreen(\"rating\", pos)}\n                        toggled={navigation.screeen == \"rating\"}\n                    />\n                    <MenuButton\n                        icon=\"ðŸ’¡\"\n                        title=\"Suggestions\"\n                        onClick={(pos: XY) => toggleScreen(\"suggestions\", pos)}\n                        toggled={navigation.screeen == \"suggestions\"}\n                    />\n                    <MenuButton\n                        icon=\"ðŸ§°\"\n                        title=\"Various\"\n                        onClick={(pos: XY) => toggleScreen(\"settings\", pos)}\n                        toggled={navigation.screeen == \"settings\"}\n                    />\n                </MenuButton>\n                <MenuButton icon=\"ðŸª\" title={consented ? \"Delete Cookie\" : \"Allow Cookie\"} onClick={toggleConsent} toggled={false} />\n            </MenuTree>\n        </VerticalMenu>\n    );\n};\nexport default StartMenu;\n","import { NavigationProvider, NavigationState, Provider, StartScreenState, defaultStartScreenState } from \"./Context\";\n\nimport { CookieContextProvider } from \"../../Context\";\nimport DifficultyOptions from \"./DifficultyOptions\";\nimport { LaunchSettings } from \"../../../Common\";\nimport React from \"react\";\nimport Screen from \"./Screens/Screen\";\nimport StartMenu from \"./Menu/StartMenu\";\nimport StorageManager from \"../StorageManager\";\n\nconst Home = (props: { start: (settings: LaunchSettings) => void }) => {\n    const storage = new StorageManager();\n\n    //@todo wrap into custom hook\n    const startPos = { x: 0, y: 0 };\n    const [navigation, setNavigation] = React.useState<NavigationState>({\n        menu: { ...startPos },\n        screen: { ...startPos },\n        focus: \"menu\",\n        mainMenu: \"\",\n        screeen: \"\",\n    });\n    const navigationContext = {\n        navigation,\n        setNavigation,\n    };\n\n    //@todo wrap into custom hook\n    const previous = storage.getPreviousState();\n    const [state, setState] = React.useState<StartScreenState>(previous ? previous : defaultStartScreenState);\n    const startScreenContext = {\n        state,\n        setState: (s: StartScreenState) => {\n            setState(s);\n            storage.store(s);\n        },\n    };\n    \n    //@todo wrap into custom hook\n    const [consented, setConsented] = React.useState<boolean>(!!storage.hasConsent());\n    const cookieContext = {\n        consented,\n        setConsented,\n    };\n\n    //@todo start() can be defined in StartScreenContext\n    const start = (boardMode: string) => {\n        const settings = {\n            ...DifficultyOptions[state.difficultySettings].settings,\n            ...state.ratingSettings,\n            baseEntropy: state.entropySettings.baseEntropy || 0,\n            interactionEntropy: state.entropySettings.interactionEntropy || 0,\n            players: { ...state.players },\n            quickDeal: state.quickDeal,\n            boardMode: boardMode,\n            initialized: true,\n            suggestionMode: state.suggestionMode,\n            inputMode: \"\",\n        };\n        props.start(settings);\n    };\n\n    return (\n        <Provider value={startScreenContext}>\n            <NavigationProvider value={navigationContext}>\n                <CookieContextProvider value={cookieContext}>\n                    <StartMenu start={start} />\n                    <Screen screen={navigation.screeen} />\n                </CookieContextProvider>\n            </NavigationProvider>\n        </Provider>\n    );\n};\nexport default Home;\n","export interface Ratio {\n    prefix: string;\n    multiplier: number;\n}\nexport default class Ratios {\n    static _16to9: Ratio = {\n        prefix: \"16-to-9\",\n        multiplier: 1.7778,\n    };\n    static _4to3: Ratio = {\n        prefix: \"4-to-3\",\n        multiplier: 1.3333,\n    };\n}\n","import \"./App.css\";\n\nimport { LaunchSettings, defaultPlayerSettings } from \"./Common\";\n\nimport AspectRatio from \"./common/AspectRatio/AspectRatio\";\nimport Deck from \"./Model/Deck/Deck\";\nimport DelayedSuspense from \"./common/DelayedSuspense\";\nimport GameModes from \"./GameModes\";\nimport Home from \"./View/UI/StartScreen/Home\";\nimport { PauseProvider } from \"./View/PauseContext\";\nimport Ratios from \"./common/AspectRatio/Ratios\";\nimport React from \"react\";\nimport SuggestionModes from \"./Model/Game/Settings/SuggestionModes\";\n\nconst App = () => {\n    const [started, setStarted] = React.useState<number>(0);\n    const defaultState = {\n        boardMode: GameModes.SINGLEPLAYER,\n        inputMode: \"mouse\",\n        initialized: false,\n        players: defaultPlayerSettings,\n        drawMode: \"\",\n        recyclingMode: \"\",\n        interactionEntropy: 0,\n        baseEntropy: 0,\n        suggestionMode: SuggestionModes.NONE,\n    };\n\n    const [launchState, setLaunchState] = React.useState<LaunchSettings>(defaultState);\n\n    const restart = () => {\n        setLaunchState(defaultState);\n    };\n\n    const deck = new Deck().shuffle();\n    const start = (settings: LaunchSettings) => {\n        deck.shuffle();\n        setLaunchState({ ...settings });\n        setStarted(Date.now());\n    };\n\n    if (launchState?.initialized) {\n        const BoardWrap = React.lazy(() => import(\"./View/Game/BoardWrap\"));\n        let board = null;\n        if (launchState.boardMode == GameModes.SINGLEPLAYER) {\n            board = (\n                <AspectRatio ratio={Ratios._4to3}>\n                    <div className={\"layout-grid-container singleplayer\"}>\n                        <BoardWrap player={0} settings={launchState} restart={restart} deck={deck} />\n                    </div>\n                </AspectRatio>\n            );\n        }\n        if (launchState.boardMode == GameModes.VERSUS) {\n            board = (\n                <div className=\"game-layout-container splitscreen\">\n                    <div className={\"layout-grid-container \" + launchState.boardMode}>\n                        <BoardWrap\n                            player={0}\n                            settings={{ ...launchState, inputMode: launchState.players[0].inputMethod }}\n                            restart={restart}\n                            deck={deck.copy()}\n                        />\n                    </div>\n\n                    <div className={\"layout-grid-container \" + launchState.boardMode}>\n                        <BoardWrap\n                            player={1}\n                            settings={{ ...launchState, inputMode: launchState.players[1].inputMethod }}\n                            restart={restart}\n                            deck={deck.copy()}\n                        />\n                    </div>\n                </div>\n            );\n        }\n        return (\n            <PauseProvider started={started}>\n                <DelayedSuspense delay={500} fallback={<h3>Loading...</h3>}>\n                    {board}\n                </DelayedSuspense>\n            </PauseProvider>\n        );\n    }\n\n    return (\n        <AspectRatio ratio={Ratios._16to9}>\n            <Home start={start} />\n        </AspectRatio>\n    );\n};\nexport default App;\n","import { StateReplaceFunction, StateUpdateFunction } from \"../Common\";\n\nimport Model from \"../Model/Model\";\nimport React from \"react\";\n\ninterface IGlobalContext {\n    state: Model | null;\n    replaceContext: StateReplaceFunction;\n    updateContext: StateUpdateFunction;\n    updateGameContext: StateUpdateFunction;\n    restart: () => void;\n}\n\nconst defaultValue = {\n    state: null,\n    replaceContext: () => {},\n    updateContext: () => {},\n    updateGameContext: () => {},\n    restart: () => {},\n};\n\nconst GlobalContext = React.createContext<IGlobalContext>(defaultValue);\n\nexport const Provider = GlobalContext.Provider;\n\nexport default GlobalContext;\n\nexport interface ICookieContext {\n    consented: boolean;\n    setConsented: (c: boolean) => void;\n}\nexport const CookieContext = React.createContext<ICookieContext>({ consented: false, setConsented: () => {} });\nexport const CookieContextProvider = CookieContext.Provider;\n","//credit https://stackoverflow.com/a/60312025/1216242\nconst TouchDetector = () => {\n    try {\n        const prefixes = \" -webkit- -moz- -o- -ms- \".split(\" \");\n\n        const mq = (query) => window.matchMedia(query).matches;\n\n        if (\"ontouchstart\" in window || (typeof window.DocumentTouch !== \"undefined\" && document instanceof window.DocumentTouch)) {\n            return true;\n        }\n\n        return mq([\"(\", prefixes.join(\"touch-enabled),(\"), \"heartz\", \")\"].join(\"\"));\n    } catch (e) {\n        console.error(\"(Touch detect failed)\", e);\n        return false;\n    }\n};\n\nexport default TouchDetector;\n","import { EntropySettings, PlayerSettings, RatingSettings, defaultPlayerSettings } from \"../../../Common\";\n\nimport RatingPresets from \"./RatingOptions\";\nimport React from \"react\";\nimport SuggestionModes from \"../../../Model/Game/Settings/SuggestionModes\";\nimport TouchDetector from \"../../../common/TouchDetector\";\n\nexport interface IStartScreenContext {\n    state: StartScreenState;\n    setState: (s: StartScreenState) => void;\n}\n\nexport const defaultStartScreenState: StartScreenState = {\n    ratingSettings: { ...RatingPresets.REGULAR },\n    difficultySettings: 1,\n    ratingPreset: 1,\n    quickDeal: TouchDetector(),\n    entropySettings: {\n        baseEntropy: TouchDetector() ? 1 : 2,\n        interactionEntropy: TouchDetector() ? 1 : 2,\n    },\n    suggestionMode: SuggestionModes.REGULAR,\n    players: defaultPlayerSettings,\n};\n\nexport interface StartScreenState {\n    ratingSettings: RatingSettings;\n    difficultySettings: number;\n    ratingPreset: number;\n    quickDeal: boolean;\n    entropySettings: EntropySettings;\n    suggestionMode: string;\n    players: PlayerSettings;\n}\n\nexport interface NavigationState {\n    menu: {\n        x: number;\n        y: number;\n    };\n    screen: {\n        x: number;\n        y: number;\n    };\n    focus: string;\n    mainMenu: string;\n    screeen: string;\n}\ninterface INavigationContext {\n    navigation: NavigationState;\n    setNavigation: (n: NavigationState) => void;\n}\n\nexport const NavigationContext = React.createContext<INavigationContext>({\n    navigation: {\n        menu: {\n            x: 0,\n            y: 0,\n        },\n        screen: {\n            x: 0,\n            y: 0,\n        },\n        focus: \"menu\",\n        mainMenu: \"\",\n        screeen: \"\",\n    },\n    setNavigation: () => {\n        console.log(\"todo implement\");\n    },\n});\n\nconst StartScreenContext = React.createContext<IStartScreenContext>({\n    state: {\n        difficultySettings: 0,\n        ratingPreset: 0,\n        ratingSettings: {},\n        entropySettings: {},\n        quickDeal: false,\n        suggestionMode: SuggestionModes.REGULAR,\n        players: defaultPlayerSettings,\n    },\n    setState: () => {\n        console.log(\"todo implement\");\n    },\n});\n\nexport const Provider = StartScreenContext.Provider;\nexport const NavigationProvider = NavigationContext.Provider;\nexport default StartScreenContext;\n","import { Suit } from \"./Suits\";\n\nexport default class Card {\n    face: string;\n    type: Suit;\n    isHidden: boolean;\n    entropyStyle: any;\n    source: string;\n    suggestion: boolean;\n    success: number;\n    canClick: () => boolean;\n    onClick: (_p: any) => (s: any) => void;\n    constructor(face: string, type: Suit, isHidden: boolean) {\n        this.face = face;\n        this.type = type;\n        this.isHidden = isHidden;\n        this.entropyStyle = {};\n        this.source = \"\";\n        this.suggestion = false;\n        this.success = 0;\n        this.canClick = () => false;\n        \n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        this.onClick = (_p) => (s: any) => {};\n    }\n\n    setSuccess = (s : number) => {\n        this.success = s;\n    }\n\n    causeEntropy = (lvl: number) => {\n        if (lvl == 0) {\n            this.entropyStyle = {};\n            return;\n        }\n        const level = lvl * 2;\n        const random = () => Math.random() < 0.5;\n        const randomInt = (min: number, max: number) => Math.random() * (max - min) + min;\n        //shift\n        if (random()) {\n            if (random()) {\n                this.entropyStyle[\"left\"] = randomInt(0, level / 20) + \"vw\";\n            } else {\n                this.entropyStyle[\"right\"] = randomInt(0, level / 20) + \"vw\";\n            }\n        }\n        //rotate\n        this.entropyStyle[\"transform\"] = \"rotate(\" + randomInt(level * -1, level) + \"deg)\";\n    };\n\n    equals = (other: Card | null) => {\n        return other && Card.equals(this, other) || false;\n    };\n\n    static equals(card: Card, otherCard: Card) {\n        return (!card && !otherCard) || (card && otherCard && otherCard.face == card.face && otherCard.type.icon == card.type.icon);\n    }\n\n    static copy = (orig: Card) => {\n        const copy = new Card(orig.face, orig.type, orig.isHidden);\n        copy.source = orig.source;\n        copy.entropyStyle = { ...orig.entropyStyle };\n        copy.canClick = orig.canClick;\n        copy.onClick = orig.onClick;\n        return copy;\n    };\n\n    static copyAll = (cards: Card[]) => cards.map((card) => Card.copy(card));\n}\n","export class SuggestionMode {\n    key: string;\n    label: string;\n    isTemporary: boolean;\n    supportsHints: boolean;\n    next: string | undefined;\n    icon: string;\n    description: string;\n    constructor(key: string, obj: ISuggestionMode) {\n        this.key = key;\n        this.label = obj.label;\n        this.icon = obj.icon;\n        this.description = obj.description;\n        this.isTemporary = !!obj.isTemporary;\n        this.supportsHints = !!obj.supportsHints;\n        this.next = obj.next;\n    }\n}\n\nexport type ISuggestionMode = {\n    label: string;\n    icon: string;\n    description: string;\n    isTemporary?: boolean;\n    supportsHints?: boolean;\n    next?: string;\n};\n\nexport default class SuggestionModes {\n    static NONE = \"NONE\";\n    static SCORED = \"SCORED\";\n    static REGULAR = \"REGULAR\";\n    static FULL = \"FULL\";\n    static ONCE = \"ONCE\";\n    static TWICE = \"TWICE\";\n    static raw: { [id: string]: ISuggestionMode } = {\n        NONE: {\n            label: \"None\",\n            description: \"No distractions. This enables one-time hints.\",\n            supportsHints: true,\n            icon: \"âŒ\",\n        },\n        SCORED: {\n            label: \"Scored\",\n            description: \"Shows all actions that increase the score.\",\n            icon: \"ðŸ†\",\n        },\n        REGULAR: {\n            label: \"Regular\",\n            description: \"Shows all possible actions except circular\",\n            icon: \"ðŸ’¡\",\n        },\n        FULL: {\n            label: \"Full\",\n            description: \"Shows all possible actions, even if they are circular\",\n            icon: \"ðŸŽ“\",\n        },\n        ONCE: {\n            label: \"Single Action\",\n            description: \"triggered by manual hint in game\",\n            isTemporary: true,\n            next: \"NONE\",\n            icon: \"â³\",\n        },\n    };\n    static get = (key: string) => new SuggestionMode(key, SuggestionModes.raw[key]);\n    static all = () => Object.keys(SuggestionModes.raw).map(SuggestionModes.get);\n    static allSuggestionModes = () => SuggestionModes.all().filter((mode) => !mode.isTemporary);\n    static default = () => SuggestionModes.get(SuggestionModes.REGULAR);\n    static getHintMode = () => SuggestionModes.get(SuggestionModes.ONCE);\n    static next = (current: SuggestionMode) => {\n        const all = SuggestionModes.allSuggestionModes();\n        if (all[all.length - 1].key == current.key) {\n            return all[0];\n        }\n        for (let i = 0; i < all.length; i++) {\n            if (all[i].key == current.key) {\n                return all[i + 1];\n            }\n        }\n        return all[0];\n    };\n}\n","import React from \"react\";\n\nexport interface IPauseState {\n    started: number;\n    end: number;\n    paused: boolean;\n    pauses: number[];\n    pauseStartedAt: number;\n    allowed: number;\n    isSilent?: boolean;\n    pausedBy: number;\n    showMenu: boolean;\n}\nexport interface IPauseContext {\n    state: IPauseState;\n    togglePause: (isPaused: boolean, pausedBy: number) => void;\n    getElapsed: () => string,\n}\nexport const defaultPauseState = {\n    started: 0,\n    end: 0,\n    paused: false,\n    pauses: [],\n    pauseStartedAt: 0,\n    allowed: 5,\n    pausedBy: -1,\n    showMenu: false,\n};\nexport const defaultPauseContext = {\n    state: defaultPauseState,\n    togglePause: () => {},\n    getElapsed: () => \"\",\n};\n\nconst PauseContext = React.createContext<IPauseContext>(defaultPauseContext);\nconst PauseContextProvider = PauseContext.Provider;\n\nexport const PauseProvider = (props: any) => {\n    const [paused, setPaused] = React.useState<IPauseState>({ ...defaultPauseState });\n    const getElapsedMs = () => {\n        const pauses = paused.pauses.reduce((a, b) => a + b, 0);\n        return (paused.end || paused.pauseStartedAt || Date.now()) - props.started - pauses;\n    };\n\n    const getElapsed = () => {\n        const padleft = (i: number) => ((i + \"\").length == 1 ? \"0\" + i : i);\n        let msec = getElapsedMs();\n        const hh = Math.floor(msec / 1000 / 60 / 60);\n        msec -= hh * 1000 * 60 * 60;\n        const mm = Math.floor(msec / 1000 / 60);\n        msec -= mm * 1000 * 60;\n        const ss = Math.floor(msec / 1000);\n        msec -= ss * 1000;\n        return hh ? hh + \":\" + padleft(mm) + \":\" + padleft(ss) : padleft(mm) + \":\" + padleft(ss);\n    };\n    const togglePause = (isPaused: boolean, pausedBy: number) => {\n        if (paused.showMenu) {\n            setPaused({\n                ...paused,\n                pausedBy: pausedBy,\n                pauses: [...paused.pauses, Date.now() - paused.pauseStartedAt],\n                pauseStartedAt: 0,\n                paused: false,\n                showMenu: false,\n            });\n        } else if (paused.pauses.length < paused.allowed) {\n            setPaused({\n                ...paused,\n                pausedBy: pausedBy,\n                pauseStartedAt: Date.now(),\n                paused: true,\n                showMenu: true,\n            });\n        } else {\n            setPaused({\n                ...paused,\n                pausedBy: pausedBy,\n                pauseStartedAt: 0,\n                paused: false,\n                showMenu: true,\n            });\n        }\n    };\n    const context = {\n        state: { ...paused, started: props.started },\n        togglePause,\n        getElapsed,\n    };\n\n    return <PauseContextProvider value={context}>{props.children}</PauseContextProvider>;\n};\n\nexport default PauseContext;\n","export default class GameModes {\n    static SINGLEPLAYER = \"singleplayer\";\n    static VERSUS = \"splitscreen\";\n}\n","import { InputProps } from \"./InputProps\";\nimport React from \"react\";\nimport ReactGamePad from \"react-gamepad\";\nimport RenderAfter from \"./RenderAfter\";\n\ninterface GamePadProps extends InputProps {\n    gamepadIndex?: number;\n}\nconst GamePad = (props: GamePadProps) => {\n    const handlers = {\n        onButtonDown: (e: string) => {\n            //@todo use layout abstraction like in keyboard\n            //@todo make layouts configurable (for visuals allow switching PS4 and XBOX layouts)\n            console.debug(e);\n            if (e == \"DPadLeft\") {\n                props.onLeft && props.onLeft();\n            }\n            if (e == \"DPadRight\") {\n                props.onRight && props.onRight();\n            }\n            if (e == \"DPadUp\") {\n                props.onUp && props.onUp();\n            }\n            if (e == \"DPadDown\") {\n                props.onDown && props.onDown();\n            }\n            if (e == \"A\") {\n                props.onAction && props.onAction();\n            }\n            if (e == \"B\") {\n                props.onCancel && props.onCancel();\n            }\n            if (e == \"X\") {\n                props.onHint && props.onHint();\n            }\n            if (e == \"Y\") {\n                props.onUndo && props.onUndo();\n            }\n            if (e == \"Start\") {\n                props.onPause && props.onPause();\n            }\n            if (e == \"Back\") {\n                props.onMenu && props.onMenu();\n            }\n        },\n\n        onConnect: (e: number) => {\n            console.debug(\"connected\", e);\n        },\n\n        onDisconnect: (e: number) => {\n            console.debug(\"disconnected\", e);\n        },\n    };\n\n    return (\n        <RenderAfter delay={125}>\n            <ReactGamePad gamepadIndex={props.gamepadIndex} {...handlers}>\n                <span></span>\n            </ReactGamePad>\n        </RenderAfter>\n    );\n};\n\nexport default GamePad;\n","interface KeyboardLayout {\n    up: (e: KeyboardEvent) => boolean;\n    down: (e: KeyboardEvent) => boolean;\n    right: (e: KeyboardEvent) => boolean;\n    left: (e: KeyboardEvent) => boolean;\n    cancel: (e: KeyboardEvent) => boolean;\n    action: (e: KeyboardEvent) => boolean;\n    undo: (e: KeyboardEvent) => boolean;\n    hint: (e: KeyboardEvent) => boolean;\n    pause: (e: KeyboardEvent) => boolean;\n    menu: (e: KeyboardEvent) => boolean;\n}\n\nexport default KeyboardLayout;\n\nexport const getKeyboardLayout = (id: number) => {\n    if (id == 0) return Wasd;\n    if (id == 1) return Arrows;\n    if (id == 2) return NumPad;\n    throw \"Unknown keyboard layout ID\";\n};\n\nexport const Arrows: KeyboardLayout = {\n    up: (e) => e.keyCode == 38,\n    down: (e) => e.keyCode == 40,\n    right: (e) => e.keyCode == 39,\n    left: (e) => e.keyCode == 37,\n    cancel: (e) => e.keyCode == 27,\n    action: (e) => e.keyCode == 96,\n    undo: (e) => e.keyCode == 90 && e.ctrlKey,\n    hint: (e) => e.keyCode == 72,\n    pause: (e) => e.keyCode == 80,\n    menu: (e) => e.keyCode == 77,\n};\n\nexport const Wasd: KeyboardLayout = {\n    up: (e) => e.keyCode == 87,\n    down: (e) => e.keyCode == 83,\n    right: (e) => e.keyCode == 68,\n    left: (e) => e.keyCode == 65,\n    cancel: (e) => e.keyCode == 69,\n    action: (e) => e.keyCode == 81,\n    undo: (e) => e.keyCode == 88,\n    hint: (e) => e.keyCode == 90,\n    pause: (e) => e.keyCode == 999,\n    menu: (e) => e.keyCode == 27,\n};\n\nexport const NumPad: KeyboardLayout = {\n    up: (e) => e.keyCode == 104,\n    down: (e) => e.keyCode == 101,\n    right: (e) => e.keyCode == 102,\n    left: (e) => e.keyCode == 100,\n    cancel: (e) => e.keyCode == 105,\n    action: (e) => e.keyCode == 103,\n    undo: (e) => e.keyCode == 98,\n    hint: (e) => e.keyCode == 97,\n    pause: (e) => e.keyCode == 999,\n    menu: (e) => e.keyCode == 99,\n};\n\nexport const Universal: KeyboardLayout = {\n    up: (e) => NumPad.up(e) || Wasd.up(e) || Arrows.up(e),\n    down: (e) => NumPad.down(e) || Wasd.down(e) || Arrows.down(e),\n    right: (e) => NumPad.right(e) || Wasd.right(e) || Arrows.right(e),\n    left: (e) => NumPad.left(e) || Wasd.left(e) || Arrows.left(e),\n    cancel: (e) => NumPad.cancel(e) || Wasd.cancel(e) || Arrows.cancel(e),\n    action: (e) => NumPad.action(e) || Wasd.action(e) || Arrows.action(e),\n    undo: (e) => NumPad.undo(e) || Wasd.undo(e) || Arrows.undo(e),\n    hint: (e) => NumPad.hint(e) || Wasd.hint(e) || Arrows.hint(e),\n    pause: (e) => NumPad.pause(e) || Wasd.pause(e) || Arrows.pause(e),\n    menu: (e) => NumPad.menu(e) || Wasd.menu(e) || Arrows.menu(e),\n};\n","export const DeckSize = [\"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"J\", \"Q\", \"K\", \"A\"];\n\nexport const getFoundationOrder = () => {\n    return [\"A\", ...DeckSize.slice(0, DeckSize.length - 1)].reverse();\n};\n\nexport const getTableauOrder = () => {\n    return [...DeckSize];\n};\n","import { InputProps } from \"./InputProps\";\nimport KeyboardLayout from \"./KeyboardLayouts\";\nimport React from \"react\";\n\ninterface KeyboardProps extends InputProps {\n    layout: KeyboardLayout;\n}\nconst Keyboard = (props: KeyboardProps) => {\n    const navListener = (e: any) => {\n        const evtobj = window.event ? event : e;\n        const { layout } = props;\n        if (layout.cancel(evtobj)) {\n            props.onCancel && props.onCancel();\n            e.preventDefault();\n        }\n        if (layout.left(evtobj)) {\n            props.onLeft && props.onLeft();\n            e.preventDefault();\n        }\n        if (layout.right(evtobj)) {\n            props.onRight && props.onRight();\n            e.preventDefault();\n        }\n        if (layout.up(evtobj)) {\n            props.onUp && props.onUp();\n            e.preventDefault();\n        }\n        if (layout.down(evtobj)) {\n            props.onDown && props.onDown();\n            e.preventDefault();\n        }\n        if (layout.action(evtobj)) {\n            props.onAction && props.onAction();\n            e.preventDefault();\n        }\n        if (layout.undo(evtobj)) {\n            props.onUndo && props.onUndo();\n            e.preventDefault();\n        }\n        if (layout.hint(evtobj)) {\n            props.onHint && props.onHint();\n            e.preventDefault();\n        }\n        if (layout.pause(evtobj)) {\n            props.onPause && props.onPause();\n            e.preventDefault();\n        }\n        if (layout.menu(evtobj)) {\n            props.onMenu && props.onMenu();\n            e.preventDefault();\n        }\n    };\n    React.useEffect(() => {\n        document.addEventListener(\"keydown\", navListener);\n        return () => {\n            document.removeEventListener(\"keydown\", navListener);\n        };\n    }, [props]);\n    return null;\n};\nexport default Keyboard;\n","import Card from \"./Model/Deck/Card\";\nimport Model from \"./Model/Model\";\n\nexport type StateReplacer = (state: Model) => Model | null;\nexport type StateUpdater = (state: Model) => void;\nexport type StateReplaceFunction = (modifier: StateReplacer) => void;\nexport type StateUpdateFunction = (modifier: StateUpdater) => void;\n\nexport const defaultPlayerSettings: PlayerSettings = {\n    0: {\n        id: 0,\n        name: \"Player 1\",\n        inputMethod: \"gamepad\",\n        inputLayout: 0,\n    },\n    1: {\n        id: 1,\n        name: \"Player 2\",\n        inputMethod: \"keyboard\",\n        inputLayout: 0,\n    },\n};\n\ninterface PlayerSetting {\n    id: number;\n    name: string;\n    inputMethod: string;\n    inputLayout: number;\n}\n\nexport interface PlayerSettings {\n    [id: number]: PlayerSetting;\n}\n\nexport interface LaunchSettings extends RatingSettings {\n    recyclingMode: string;\n    drawMode: string;\n    //@todo remove, this is contained in playersettings\n    inputMode: string;\n    interactionEntropy: number;\n    baseEntropy: number;\n    suggestionMode: string;\n    players: PlayerSettings;\n    boardMode: string;\n    initialized?: boolean;\n    quickDeal?: boolean;\n    speed?: boolean;\n}\n\nexport interface ClickHandler {\n    dispatchPutDown: (card: Card, position: any, state: Model, index: number) => void;\n    dispatchPickup: (card: Card | null, position: any, state: Model, index: number) => void;\n}\n\nexport type BlinkFunction = (state: Model, index: number) => void;\n\nexport interface RatingSettings {\n    undoPenalty?: boolean;\n    hintPenalty?: boolean;\n    timedMode?: boolean;\n    missPenalty?: boolean;\n}\n\nexport interface EntropySettings {\n    baseEntropy?: number;\n    interactionEntropy?: number;\n}\n","export interface Suit {\n    icon: string;\n    color: string;\n}\n\nconst Suits: { [id: string]: Suit } = {\n    heart: {\n        icon: \"â™¥\",\n        color: \"red\",\n    },\n    club: {\n        icon: \"â™£\",\n        color: \"black\",\n    },\n    diamond: {\n        icon: \"â™¦\",\n        color: \"red\",\n    },\n    spade: {\n        icon: \"â™ \",\n        color: \"black\",\n    },\n};\n\nexport default Suits;\n","import { RatingSettings } from \"../../../Common\";\nimport { StartScreenState } from \"./Context\";\nimport SuggestionModes from \"../../../Model/Game/Settings/SuggestionModes\";\n\nexport interface RatingPreset {\n    id: number;\n    icon: string;\n    label: string;\n    settings: RatingSettings;\n    apply: (s: StartScreenState) => void;\n}\n\nconst apply = (after: RatingSettings, s: StartScreenState, id: number) => {\n    if (!s.ratingSettings.hintPenalty && after.hintPenalty) {\n        s.suggestionMode = SuggestionModes.NONE;\n    }\n    //@todo remember which suggestion mode was there before, and reset to that on next change of hint penalty\n    s.ratingSettings = { ...after };\n    s.ratingPreset = id;\n};\n\nexport default class RatingPresets {\n    static CHILL = {\n        timedMode: false,\n        missPenalty: false,\n        undoPenalty: false,\n        hintPenalty: false,\n    };\n\n    static REGULAR = {\n        timedMode: true,\n        missPenalty: false,\n        undoPenalty: true,\n        hintPenalty: false,\n    };\n\n    static COMPETITIVE = {\n        timedMode: true,\n        missPenalty: true,\n        undoPenalty: true,\n        hintPenalty: true,\n    };\n\n    static ALL: RatingPreset[] = [\n        {\n            id: 0,\n            icon: \"ðŸŒ´\",\n            label: \"Chill\",\n            settings: { ...RatingPresets.CHILL },\n            apply: (s) => apply(RatingPresets.CHILL, s, 0),\n        },\n        {\n            id: 1,\n            icon: \"âš–ï¸\",\n            label: \"Regular\",\n            settings: { ...RatingPresets.REGULAR },\n            apply: (s) => apply(RatingPresets.REGULAR, s, 1),\n        },\n        {\n            id: 2,\n            icon: \"ðŸ†\",\n            label: \"Competitive\",\n            settings: { ...RatingPresets.COMPETITIVE },\n            apply: (s) => apply(RatingPresets.COMPETITIVE, s, 2),\n        },\n    ];\n\n    static matchPreset = (settings: any) => {\n        const filterd = RatingPresets.ALL.filter((preset) => RatingPresets.equals(preset.settings, settings));\n        if (filterd.length > 0) {\n            return filterd[0].id;\n        }\n        return -1;\n    };\n\n    static equals = (s1: any, s2: any) =>\n        s1.timedMode === s2.timedMode &&\n        s1.missPenalty === s2.missPenalty &&\n        s1.undoPenalty === s2.undoPenalty &&\n        s1.hintPenalty === s2.hintPenalty;\n}\n","import { XY } from \"../XY\";\n\nexport default class AbstractNavigator {\n    rows: any[];\n    constructor() {\n        this.rows = [];\n    }\n    getRows = () => this.rows;\n    getRow = (x: number) => this.getRows()[x];\n    goToRow = (pos: XY) => {\n        const rows = this.getRows();\n        const row = rows[pos.y];\n        if (row.buttons.length - 1 < pos.x) {\n            return { ...pos, x: row.buttons.length - 1 };\n        }\n\n        return pos;\n    };\n}\n","const EntropyLevels = [\"none\", \"low\", \"regular\", \"high\", \"extreme\"];\nexport default EntropyLevels;","import { NavigationContext } from \"../Context\";\nimport React from \"react\";\nimport { TreeNavigator } from \"./TreeNavigator\";\nimport { XY } from \"../../XY\";\n\ninterface _MenuButtonProps extends StaticMenuButtonProps {\n    x?: number;\n    y?: number;\n    navigator?: TreeNavigator;\n}\n\nexport interface StaticMenuButtonProps {\n    icon: string;\n    title: string;\n    onClick: (pos: XY) => void;\n    toggled?: boolean;\n    children?: any[];\n    disabled?: boolean;\n    skip?: boolean;\n}\ninterface MenuButtonProps extends StaticMenuButtonProps {\n    x: number;\n    y: number;\n    menuX: number;\n    menuY: number;\n    menuFocus: string;\n    active: boolean;\n    toggled: boolean;\n    onFocus: (pos: XY) => void;\n}\nconst MenuButton = (props: _MenuButtonProps) => {\n    if (typeof props.x == \"undefined\" || typeof props.y == \"undefined\") {\n        return null;\n    }\n\n    const { navigation, setNavigation } = React.useContext(NavigationContext);\n\n    const onFocus = (pos: XY) => setNavigation({ ...navigation, menu: pos });\n\n    const addItem = (child: any, index: number) => {\n        const assign = (n: any[]) => {\n            n[props.x || 0].buttons[index + 1] = { ...props, x: props.x, y: index + 1 };\n        };\n        assign(props.navigator?.rows || []);\n\n        return React.cloneElement(child, { key: index, x: props.x, y: index + 1, navigator: props.navigator });\n    };\n\n    return (\n        <_MenuButton\n            title={props.title}\n            x={props.x || 0}\n            y={props.y || 0}\n            icon={props.icon}\n            menuX={navigation.menu.x}\n            menuY={navigation.menu.y}\n            menuFocus={navigation.focus}\n            disabled={props.disabled}\n            active={false}\n            onFocus={onFocus}\n            onClick={props.onClick}\n            toggled={!!props.toggled}\n            skip={props.skip}\n        >\n            {props.children?.map(addItem)}\n        </_MenuButton>\n    );\n};\nconst _MenuButton = (props: MenuButtonProps) => {\n    const inputEl = React.useRef<HTMLButtonElement>(null);\n\n    let className = \"\";\n\n    if (props.y > 0) {\n        className += \" indented\";\n    }\n\n    const shouldBeFocus = props.menuX == props.x && props.menuY == props.y && props.menuFocus == \"menu\";\n\n    if (shouldBeFocus && !props.skip) {\n        className += \" highlight\";\n    }\n\n    React.useEffect(() => {\n        if (\n            props.menuX == props.x &&\n            props.menuY == props.y &&\n            props.menuFocus == \"menu\" &&\n            inputEl.current &&\n            inputEl.current !== document.activeElement\n        ) {\n            setClicking(true);\n            inputEl && inputEl.current && inputEl.current.focus();\n        }\n    }, [props.menuFocus, props.menuX, props.menuY, props.x, props.y]);\n\n    if (props.active) {\n        className += \" active\";\n    }\n\n    //omg this is the worst but it works (5h lost)\n    const [isClicking, setClicking] = React.useState(false);\n\n    const focus = () => {\n        if (!isClicking && !(props.menuX == props.x && props.menuY == props.y) && props.menuFocus == \"menu\") {\n            props.onFocus({ x: props.x, y: props.y });\n            setClicking(false);\n        }\n    };\n\n    const click = () => {\n        setClicking(false);\n        props.onClick({ x: props.x, y: props.y });\n    };\n\n    return (\n        <>\n            <button\n                ref={inputEl}\n                className={className}\n                title={props.title}\n                onFocus={focus}\n                onClick={click}\n                disabled={props.skip}\n                onMouseDown={() => setClicking(true)}\n            >\n                <div className=\"icon\">{props.icon}</div>\n                <div className=\"label\">{props.title}</div>\n            </button>\n            <div>{!props.toggled ? null : props.children}</div>\n        </>\n    );\n};\nexport default MenuButton;\n","import React from \"react\";\n\nconst MenuTitle = (props: { label: string }) => {\n    return <div className=\"title maintitle\">{props.label}</div>;\n};\nexport default MenuTitle;\n","import GamePad from \"../../../../common/GamePad\";\nimport Keyboard from \"../../../../common/Keyboard\";\nimport KeyboardLayout from \"../../../../common/KeyboardLayouts\";\nimport { NavigationContext } from \"../Context\";\nimport React from \"react\";\nimport { TreeNavigator } from \"../Menu/TreeNavigator\";\nimport { XY } from \"../../XY\";\n\nconst TreeNavWrapper = (props: { navigator: TreeNavigator; keyboardLayout: KeyboardLayout }) => {\n    const { navigator } = props;\n    const { navigation, setNavigation } = React.useContext(NavigationContext);\n\n    const assignState = (result: XY) => {\n        if (navigation.focus == \"menu\") {\n            setNavigation({ ...navigation, menu: result });\n        }\n    };\n\n    const inputHandlers = {\n        onCancel: () =>\n            setNavigation({ ...navigation, focus: \"menu\", screeen: \"\", mainMenu: navigation.mainMenu, menu: { ...navigation.menu } }),\n        onUp: () => assignState(navigator.moveUp(navigation.menu.x, navigation.menu.y)),\n        onDown: () => assignState(navigator.moveDown(navigation.menu.x, navigation.menu.y)),\n        onLeft: () => assignState(navigator.moveLeft(navigation.menu.x, navigation.menu.y)),\n        onRight: () => assignState(navigator.moveRight(navigation.menu.x, navigation.menu.y)),\n        onAction: () => navigator.action(navigation.menu),\n    };\n\n    return navigation.focus == \"menu\" ? (\n        <>\n            <Keyboard layout={props.keyboardLayout} {...inputHandlers} />\n            <GamePad {...inputHandlers} />\n        </>\n    ) : null;\n};\n\nexport default TreeNavWrapper;\n","import AbstractNavigator from \"../AbstractNavigator\";\nimport { NavHandler } from \"../../NavHandler\";\nimport { XY } from \"../../XY\";\n\nexport class TreeNavigator extends AbstractNavigator implements NavHandler {\n    moveUp: (x: number, y: number) => XY = (x, y) => {\n        if (x == 0) {\n            return { x: this.rows.length - 1, y: 0 };\n        }\n\n        if (y > 0) {\n            return { x: x, y: y - 1 };\n        }\n\n        if (y == 0) {\n            const row = this.getRow(x - 1);\n            if (row.toggled) {\n                return { x: x - 1, y: row.buttons.length - 1 };\n            } else {\n                return { x: x - 1, y: y };\n            }\n        }\n\n        return { x: x - 1, y: y };\n    };\n\n    moveDown: (x: number, y: number) => XY = (x, y) => {\n        const row = this.getRow(x);\n        if (y == 0 && row.toggled) {\n            return { x: x, y: 1 };\n        }\n\n        if (y > 0 && y < row.buttons.length - 1) {\n            return { x: x, y: y + 1 };\n        }\n\n        if (y > 0) {\n            return { x: x + 1, y: 0 };\n        }\n\n        if (x < this.rows.length - 1) {\n            return { x: x + 1, y: y };\n        }\n\n        return { x: 0, y: 0 };\n    };\n\n    moveLeft: (x: number, y: number) => XY = (x, y) => ({ x: x, y: y });\n\n    moveRight: (x: number, y: number) => XY = (x, y) => ({ x: x, y: y });\n\n    action: (xy: XY) => void = () => {\n        const activeElement: any = document.activeElement;\n        activeElement && activeElement.click();\n    };\n}\n","import KeyboardLayout from \"../../../../common/KeyboardLayouts\";\nimport React from \"react\";\nimport TreeNavWrapper from \"./TreeNavWrapper\";\nimport { TreeNavigator } from \"./TreeNavigator\";\n\nconst MenuTree = (props: { children: any[]; keyboardLayout: KeyboardLayout }) => {\n    const navigator = new TreeNavigator();\n    navigator.rows = [];\n    let index = -1;\n    let _i = -1;\n    const addItem = (child: any) => {\n        _i++;\n        if (!child.props.skip) {\n            index++;\n            navigator.rows[index] = { x: index, y: 0, ...child.props, buttons: [] };\n        }\n        return React.cloneElement(child, { key: _i, x: index, y: 0, navigator: navigator });\n    };\n    return (\n        <>\n            {props.children.map(addItem)}\n            <TreeNavWrapper navigator={navigator} keyboardLayout={props.keyboardLayout} />\n        </>\n    );\n};\nexport default MenuTree;\n"],"sourceRoot":""}